<html lang="cs" xml:lang="cs" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema" xmlns:twitter="http://api.twitter.com/"> <head> <title>Dajbych.net</title> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width" /> <link rel="stylesheet" href="/style.css" /> <link rel="icon" type="image/x-icon" href="/design/favicon.ico" /> <meta name="application-name" content="Dajbych.net" /> <meta name="msapplication-config" content="/browserconfig/en" /> <meta name="msapplication-starturl" content="https://dajbych.net/blog/en" /> <meta name="msapplication-tap-highlight" content="no" /> <meta name="description" content="Web Com­po­nents je snaha za­vést vlastní ovlá­dací prvky do HTML5. Ovlá­dací pr­vek, který je izo­lo­vaný, mající vlastní zdro­jový kód a…" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:url" content="https://dajbych.net/zacal-vyvoj-web-components-pro-microsoft-edge" /> <meta name="twitter:title" content="Začal vývoj Web Components pro Microsoft Edge" /> <meta name="twitter:description" content="Web Com­po­nents je snaha za­vést vlastní ovlá­dací prvky do HTML5. Ovlá­dací pr­vek, který je…" /> <meta name="twitter:image" content="https://dajbych.net/assets/square-150x150.png" /> <meta name="twitter:creator" content="@Dajbych" /> <meta property="og:url" content="https://dajbych.net/zacal-vyvoj-web-components-pro-microsoft-edge" /> <meta property="og:title" content="Začal vývoj Web Components pro Microsoft Edge" /> <meta property="og:description" content="Web Com­po­nents je snaha za­vést vlastní ovlá­dací prvky do HTML5. Ovlá­dací pr­vek, který je izo­lo­vaný, mající vlastní zdro­jový kód a uži­va­tel­ské roz­hraní, byla úplně běžná věc už v Del­phi nebo Windows Forms (třída User­Con­t­rol). Ve světě we­bo­vých tech­no­lo­gií se ale vše stále lepí…" /> <meta property="og:image" content="https://dajbych.net/assets/square-310x310.png" /> <script type="text/javascript" src="/scripts/syntax.js" /> </head> <body itemscope="itemscope" itemtype="http://schema.org/TechArticle"> <header> <div> <h1><a href="/" rel="home">Dajbych.net</a></h1> </div> <hr /> <h2 class="article" itemprop="headline">Začal vývoj Web Components pro Microsoft Edge</h2> <p><time datetime="2015-07-26 22:00:00Z">červenec 2015</time>, 4 minuty čtení</p> </header> <article itemprop="articleBody"><meta itemprop="datePublished" content="2015-07-26T22:00:00" /><meta itemprop="dateModified" content="2015-07-28T06:22:00" /><section><p class="perex" itemprop="description">Web Com­po­nents je snaha za­vést vlastní ovlá­dací prvky do HTML5. Ovlá­dací pr­vek, který je izo­lo­vaný, mající vlastní zdro­jový kód a uži­va­tel­ské roz­hraní, byla úplně běžná věc už v Del­phi nebo Windows Forms (třída User­Con­t­rol). Ve světě we­bo­vých tech­no­lo­gií se ale vše stále lepí do jed­noho vel­kého ne­pře­hled­ného celku. Je­den ob­jekt, na­pří­klad vyhle­dá­vací pole, máme na třech různých mís­tech. Ně­kde je HTML, jinde CSS a kdesi Ja­vaScript. Nový HTML ele­ment Tem­plate do­káže vše za­pouz­d­řit.</p><p class="indented">Snaha o vy­tvo­ření we­bo­vých sou­částí tu byla už v roce 1998, kdy Micro­soft na­vrhl a im­ple­men­to­val <a href="http://www.w3.org/TR/NOTE-HTMLComponents" target="_blank">HTML Com­po­nents</a> do IE 5.5. Ná­sle­do­valy další po­kusy jako <a href="http://www.w3.org/TR/2001/NOTE-xbl-20010223/" target="_blank">XBL</a> a <a href="http://www.w3.org/TR/xbl/" target="_blank">XBL2</a> od Mo­zilly nebo <a href="http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/" target="_blank">Sha­dow DOM</a> od Go­o­glu. Tyto tech­niky měly pouze úzkou ob­last vyu­žití. Sou­čas­nou sna­hou všech hlav­ních tvůrců pro­hlí­žečů je ně­ko­lik jed­not­li­vých tech­nik do­hro­mady sla­dit tak, aby spo­lečně umož­ňo­valy sklá­dat we­bo­vou stránku z jed­not­li­vých sou­částí, které jsou samy o sobě sa­mo­statné a za­pouz­dřené.</p><p class="indented">V <a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/filters/top" target="_blank">Micro­soft Edge De­ve­lo­per Su­g­ges­tion Boxu</a> jsou nej­žá­da­nější tech­niky <a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6263785-shadow-dom-unprefixed" target="_blank">Sha­dow DOM</a>, <a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6261298-custom-elements" target="_blank">Cus­tom Ele­ments</a> a <a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6261273-template-element" target="_blank">Tem­plate Ele­ment</a>. We­bové kom­po­nenty jsou tak jed­no­značně mezi no­vými tech­ni­kami ob­lastí, o kte­rou mají we­boví vý­vo­jáři zá­jem. Micro­soft proto <a href="http://blogs.windows.com/msedgedev/2015/07/15/microsoft-edge-and-web-components/" target="_blank">za­čal s im­ple­men­tací</a> HTML ele­mentu <em>tem­plate</em>. Poté bude práce po­kra­čo­vat na Sha­dow DOM a Cus­tom Ele­ments.</p><h3>Element &lt;template&gt;</h3><p>HTML ele­ment <em>tem­plate</em>, jak už ná­zev na­po­vídá, slouží jako šab­lona. Ele­ment sa­motný se ne­vy­kres­luje, ani nemá žádný sé­man­tický význam. Po­mocí ja­vascrip­tové me­tody <em>im­port­Node</em> se dá na­klo­no­vat, na­pl­nit ob­sahem a vlo­žit do DOMu.</p><p class="indented">Proč místo toho ne­mů­žeme po­u­žít oby­čejný <em>div</em>, který by měl na­sta­ve­nou CSS vlast­nost <em>dis­play</em> na hod­notu <em>none</em>? Pro­tože po­kud by <em>div</em> ob­saho­val ob­rá­zek, pro­hlí­žeč by ho totiž za­čal staho­vat. A kdyby ob­saho­val skript, pro­hlí­žeč by ho za­čal vy­ko­ná­vat.</p><p class="indented">Možná vás na­padne ne­po­u­žít <em>div</em>, ale třeba ele­ment <em>script</em>, který má atri­but <em>script</em> na­sta­vený na něco ji­ného než <em>text/</em><em>ja­vascript</em>, a jeho tex­tový ob­sah vlo­žit po­mocí vlast­nosti <em>in­nerHTML</em>. To je však po­ten­ci­álně ne­bez­pečné, pro­tože tex­tový ob­sah ele­mentu <em>script</em> musí být dů­sledně ošet­řen proti XSS útoku.</p><p class="indented">Jak tedy vy­padá kód, který <em>tem­plate</em> vyu­žívá?</p></section><div class="code"><div><code class="syntax_xml">&lt;template id=&quot;template&quot;&gt; &lt;style&gt; … &lt;/style&gt; &lt;script&gt; … &lt;/script&gt; &lt;p class=&quot;…&quot;&gt;&lt;/p&gt; &lt;img src=&quot;…&quot; /&gt; &lt;/template&gt; </code></div></div><section><p>Toto je HTML mar­kup, který ob­sahuje styl, skript, od­sta­vec a ob­rá­zek. Vše je zabalené do šab­lony.</p></section><div class="code"><div><code>var template = document.querySelector(&quot;#template&quot;); var clone = document.importNode(template.content, true); var p = clone.querySelector(&quot;p&quot;); p.textContent = &quot;Nějaký text.&quot;; document.body.appendChild(clone); </code></div></div><section><p>Ja­vascrip­tový kód nej­prve na­jde ten správný tem­plate. Poté vy­tvoří klon jeho ob­sahu. Každý ele­ment totiž může být v DOMu nej­výše jed­nou. Dále se na­jde od­sta­vec a na­plní se ně­jakým tex­tem. Na­ko­nec se klon vloží do DOMu. V tom okamžiku se apli­kuje styl, vy­koná skript a začne na­čítat ob­rá­zek.</p><p class="indented">Zatím není jasné, jakým způ­so­bem se pro­vede za­pouz­dření. Styly by správně měly být uplat­něny jen na ele­menty, které jsou v šab­loně, ni­ko­liv na jiné ele­menty v okolí. Po­dobně skript by měl mít přístup jen k ele­men­tům v šab­loně, ne k ce­lému DOMu.</p><p class="indented">Spe­ci­fi­kace se vy­víjí a bude ještě ně­ja­kou dobu tr­vat, než se ustálí. Psát ně­jaký web zalo­žený na web com­po­nents se v sou­časné době ještě nevyplatí. Je­jich im­ple­men­tace v Chrome je už teď ne­kom­pa­ti­bilní s po­slední spe­ci­fi­kací.</p></section><div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dajbych.net" /><div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://dajbych.net/assets/wide-300x60.png" /><meta itemprop="width" content="300" /><meta itemprop="height" content="60" /></div></div></article> <footer> <section class="tags"> <h3>Štítky</h3> <p class="tags"> <a href="/tag/Web Components" rel="tag">Web Components</a> <a href="/tag/Edge" rel="tag">Edge</a> </p> </section> <section class="author"> <p itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"> <img src="/design/mvp.png" width="94" height="148" alt="Microsoft MVP" /> napsal <span itemprop="name">Václav Dajbych</span>, <a href="https://mvp.microsoft.com/en-us/mvp/V%C3%A1clav%20Dajbych-5000527" target="_blank" rel="nofollow">Microsoft <abbr title="Most Valuable Professional">MVP</abbr></a> <br /> softwarový vývojář, školitel a konzultant <br /> <a id="em" /> <script type="text/javascript" async="async">
                if (typeof(atob) == &apos;undefined&apos;) {
                    function atob(s) {
                        var e = {}, i, k, v = [], r = &apos;&apos;, w = String.fromCharCode;
                        var n = [[65, 91], [97, 123], [48, 58], [43, 44], [47, 48]];
                        for (z in n) {
                            for (i = n[z][0]; i &amp;lt; n[z][1]; i++) {
                                v.push(w(i));
                            }
                        }
                        for (i = 0; i &amp;lt; 64; i++) {
                            e[v[i]] = i;
                        }
                        for (i = 0; i &amp;lt; s.length; i += 72) {
                            var b = 0, c, x, l = 0, o = s.substring(i, i + 72);
                            for (x = 0; x &amp;lt; o.length; x++) {
                                c = e[o.charAt(x)];
                                b = (b &amp;lt;&amp;lt; 6) + c;
                                l += 6;
                                while (l &amp;gt;= 8) {
                                    r += w((b &amp;gt;&amp;gt;&amp;gt; (l -= 8)) % 256);
                                }
                            }
                        }
                        return r;
                    }
                }
                var em = document.getElementById(&apos;em&apos;);
                em.innerText = atob(&apos;dmFjbGF2QGRhamJ5Y2gubmV0&apos;);
                em.setAttribute(&apos;href&apos;, &apos;mailto:&apos; + em.innerText);
            </script> </p> </section> <section class="misc"> <div class="flex"> <div class="subscribe"> <h3>Odebírat</h3> <p class="socialite"> <a class="twitter" href="https://twitter.com/Dajbych" target="_blank" rel="nofollow"></a> <a class="feed" target="_blank" rel="nofollow"></a> </p> </div> <div class="share"> <h3>Sdílet</h3> <p class="socialite"> <a class="twitter" href="https://twitter.com/intent/tweet?text=Za%C4%8Dal+v%C3%BDvoj+Web+Components+pro+Microsoft+Edge&url=https%3A%2F%2Fdajbych.net%2Fzacal-vyvoj-web-components-pro-microsoft-edge" target="_blank" rel="nofollow"></a> <a class="facebook" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fdajbych.net%2Fzacal-vyvoj-web-components-pro-microsoft-edge&t=Za%C4%8Dal+v%C3%BDvoj+Web+Components+pro+Microsoft+Edge" target="_blank" rel="nofollow"></a> <a class="linkedin" href="https://www.linkedin.com/shareArticle?miniu=true&url=https%3A%2F%2Fdajbych.net%2Fzacal-vyvoj-web-components-pro-microsoft-edge&title=Za%C4%8Dal+v%C3%BDvoj+Web+Components+pro+Microsoft+Edge" target="_blank" rel="nofollow"></a> <a class="gplus" href="https://plus.google.com/share?url=https%3A%2F%2Fdajbych.net%2Fzacal-vyvoj-web-components-pro-microsoft-edge" target="_blank" rel="nofollow"></a> <a class="reddit" href="https://www.reddit.com/submit?url=https%3A%2F%2Fdajbych.net%2Fzacal-vyvoj-web-components-pro-microsoft-edge&title=Za%C4%8Dal+v%C3%BDvoj+Web+Components+pro+Microsoft+Edge" target="_blank" rel="nofollow"></a> </p> </div> </div> <div class="reco"> <h3>Další</h3> <p class="reco"> <ul> <li> <a href="/novinky-v-edgehtml-13-10586-pro-vyvojare"> <span> <img src="/logos/edge.png" draggable="false" alt="edge" /> </span> <span>Novinky v EdgeHTML 13.10586 pro vývojáře</span> </a> </li> <li> <a href="/internet-explorer-podporuje-http-strict-transport-security"> <span> <img src="/logos/windows-update.png" draggable="false" alt="windows update" /> </span> <span>Internet Explorer podporuje HTTP Strict Transport Security</span> </a> </li> <li> <a href="/projekt-spartan-5-dil-windows-api-pro-webove-aplikace"> <span> <img src="/logos/spartan.png" draggable="false" alt="spartan" /> </span> <span>Projekt Spartan, 5. díl – Windows API pro webové aplikace</span> </a> </li> <li> <a href="/jaky-je-microsoft-edge-po-3-mesicich-od-uvedeni"> <span> <img src="/logos/edge.png" draggable="false" alt="edge" /> </span> <span>Jaký je Microsoft Edge po 3 měsících od uvedení</span> </a> </li> </ul> </p> </div> </section> <section class="disqus"> <div id="disqus_thread" /> <script type="text/javascript" async="async">
                    var disqus_shortname = &apos;dajbych&apos;;
                    (function () { var dsq = document.createElement(&apos;script&apos;); dsq.type = &apos;text/javascript&apos;; dsq.async = true; dsq.src = &apos;//&apos; + disqus_shortname + &apos;.disqus.com/embed.js&apos;; (document.getElementsByTagName(&apos;head&apos;)[0] || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(dsq); })();
                </script> </section> <section> <div id="footer1" /> <div id="footer2"> <p>Spuštěním webového prohlížeče s vypnutým posíláním žádosti Do Not Track (Nesledovat) udělujete souhlas s použitím souborů cookie.</p> </div> </section> <environment names="Production"> <script type="text/javascript" async="async">
                (function (i, s, o, g, r, a, m) { i[&apos;GoogleAnalyticsObject&apos;] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, &apos;script&apos;, &apos;//www.google-analytics.com/analytics.js&apos;, &apos;ga&apos;);
                ga(&apos;create&apos;, &apos;UA-2191362-10&apos;, &apos;dajbych.net&apos;);
ga(&apos;set&apos;, &apos;dimension1&apos;, &apos;Front End Web Dev&apos;);                ga(&apos;send&apos;, &apos;pageview&apos;);
                </script> </environment> </footer> </body> </html>