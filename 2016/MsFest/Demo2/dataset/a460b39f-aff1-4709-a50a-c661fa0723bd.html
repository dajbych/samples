<html lang="cs" xml:lang="cs" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema" xmlns:twitter="http://api.twitter.com/"> <head> <title>Dajbych.net</title> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width" /> <link rel="stylesheet" href="/style.css" /> <link rel="icon" type="image/x-icon" href="/design/favicon.ico" /> <meta name="application-name" content="Dajbych.net" /> <meta name="msapplication-config" content="/browserconfig/en" /> <meta name="msapplication-starturl" content="https://dajbych.net/blog/en" /> <meta name="msapplication-tap-highlight" content="no" /> <meta name="description" content="HTTP St­rict Trans­port Secu­rity (HSTS) po­sky­tuje sluš­nou obranu proti man-in-the-mi­d­dle úto­kům. Stačí, aby ser­ver po­slal ur­či­tou…" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:url" content="https://dajbych.net/internet-explorer-podporuje-http-strict-transport-security" /> <meta name="twitter:title" content="Internet Explorer podporuje HTTP Strict Transport Security" /> <meta name="twitter:description" content="HTTP St­rict Trans­port Secu­rity (HSTS) po­sky­tuje sluš­nou obranu proti man-in-the-mi­d­dle…" /> <meta name="twitter:image" content="https://dajbych.net/assets/square-150x150.png" /> <meta name="twitter:creator" content="@Dajbych" /> <meta property="og:url" content="https://dajbych.net/internet-explorer-podporuje-http-strict-transport-security" /> <meta property="og:title" content="Internet Explorer podporuje HTTP Strict Transport Security" /> <meta property="og:description" content="HTTP St­rict Trans­port Secu­rity (HSTS) po­sky­tuje sluš­nou obranu proti man-in-the-mi­d­dle úto­kům. Stačí, aby ser­ver po­slal ur­či­tou hla­vičku, a pro­hlí­žeč s ním bude na­va­zo­vat spo­jení pouze přes TLS. Ni­kde už pak ne­bude spo­jení, které by bylo nezašif­ro­vané a umožňovalo tak…" /> <meta property="og:image" content="https://dajbych.net/assets/square-310x310.png" /> <script type="text/javascript" src="/scripts/syntax.js" /> </head> <body itemscope="itemscope" itemtype="http://schema.org/TechArticle"> <header> <div> <h1><a href="/" rel="home">Dajbych.net</a></h1> </div> <hr /> <h2 class="article" itemprop="headline">Internet Explorer podporuje HTTP Strict Transport Security</h2> <p><time datetime="2015-06-08 22:00:00Z">červen 2015</time>, 4 minuty čtení</p> </header> <article itemprop="articleBody"><meta itemprop="datePublished" content="2015-06-08T22:00:00" /><meta itemprop="dateModified" content="2015-06-09T22:42:00" /><section><p class="perex" itemprop="description">HTTP St­rict Trans­port Secu­rity (HSTS) po­sky­tuje sluš­nou obranu proti man-in-the-mi­d­dle úto­kům. Stačí, aby ser­ver po­slal ur­či­tou hla­vičku, a pro­hlí­žeč s ním bude na­va­zo­vat spo­jení pouze přes TLS. Ni­kde už pak ne­bude spo­jení, které by bylo nezašif­ro­vané a umožňovalo tak útoč­ní­kovi ovlá­dající sí­ťový pro­voz ne­vě­domky pře­smě­ro­vat uži­va­tele na pod­vod­nou stránku. Dnešní ak­tua­li­zace (3058515) při­dává pod­poru HSTS do In­ter­net Ex­plo­reru 11 pro Win­dows 7 a Win­dows 8.1.</p><h3>Man-in-the-middle útok</h3><p>Zís­kat uži­va­tel­ské jméno a heslo je pro útoč­níka ve­lice jed­no­duché, po­kud spo­jení není za­šif­ro­vané do­sta­tečně sil­nou šif­rou. Uži­va­tel musí své heslo po­slat ser­veru v ta­kové po­době, aby ho pře­četl pouze ser­ver, a musí mít jis­totu, že ho po­sílá právě tomu ser­veru, kte­rému si myslí, že ho po­sílá. Trans­port Layer Secu­rity (TLS) toto zjed­no­du­šuje na to, že si stačí ohlí­dat, aby byly v po­čítači na­in­stalované ko­ře­nové cer­ti­fi­káty pouze těch cer­ti­fi­kač­ních au­to­rit, kterým dů­vě­řujeme.</p><p class="indented">V sou­časné době je asi nej­větší sla­bi­nou fakt, že z dů­vodů zpětné kom­pa­ti­bi­lity je nej­prve na­vá­záno ne­za­šif­ro­vané spo­jení, které je poté pře­smě­ro­váno na spo­jení šif­ro­vané. Po­kud se útoč­ní­kovi po­vede ovlád­nout sí­ťový pro­voz (stačí, aby se uži­va­tel při­po­jil přes Wi-Fi, kterou útoč­ník ovládl), může toto pře­smě­ro­vání poupra­vit tak, aby uži­va­tele pře­smě­ro­val na svůj ser­ver. Poté už pouze stačí, aby do­sta­tečně na­po­do­bil we­bovou stránku, za kterou se vy­dává, a se­hnal si pro ni SSL cer­ti­fi­kát. Po­kud se to útoč­ní­kovi po­vede do­sta­tečně dobře na­to­lik, že uži­va­tel na první po­hled nic ne­po­zná a zadá do ta­kové stránky své při­hla­šo­vací údaje, po­skytl tím útoč­ní­kovi kon­t­rolu nad svým účtem. Uži­va­tel na­víc ne­musí nic poznat, pro­tože útoč­ník na­pro­gra­muje svou stránku tak, aby fun­go­vala jako proxy.</p><h3>Obrana</h3><p>Zra­ni­tel­nost se dá jed­no­duše vyře­šit tím, že bude veš­kerý pro­voz už od za­čátku šif­ro­vaný. To však není možné, pro­tože vět­šina we­bo­vých ser­verů TLS ne­pod­po­ruje. Ře­še­ním je dr­žet si údaje o tom, které stránky TLS pod­po­rují, a na­va­zo­vat rov­nou TLS spo­jení pouze s nimi.</p><p class="indented">Zna­lost pro­hlí­žeče o strán­kách, které TLS pod­po­rují, pra­mení ze dvou zdrojů. První zdroj je <a href="https://hstspreload.appspot.com/" target="_blank">prostý se­znam ser­verů</a>, které TLS pod­po­rují. Ten je zkom­pi­lo­vaný do zdro­jo­vých kódů hlav­ních pro­hlí­žečů. Není to zrovna aka­de­mický přístup, jeho funkč­nost však nelze po­přít.</p><p class="indented">Druhým způ­so­bem je (po pře­smě­ro­vání na TLS) po­slat kli­en­tovi tuto HTTP hla­vičku:</p></section><div class="code"><div><code>Strict-Transport-Security: max-age=15552000 </code></div></div><section><p>Pa­ra­metr <em>max-age</em> značí dobu v sekun­dách, po kte­rou bude pro­hlí­žeč na­va­zo­vat spo­jení se ser­ve­rem výhradně přes TLS. Mi­ni­mální hod­nota je 10886400 (18 týdnů).</p><h3>Podpora v Internet Exploreru a Microsoft Edge</h3><p>Pod­pora HSTS v In­ter­net Ex­plo­reru byla ozná­mena 16. února pro In­ter­net Ex­plo­rer ve Win­dows 10 Tech­ni­cal Pre­view. HSTS pod­po­ruje jak In­ter­net Ex­plo­rer 11, tak i Micro­soft Edge (stále pod ozna­če­ním pro­jekt Spar­tan) ve Win­dows 10 In­si­der Pre­view. S červ­no­vými ak­tua­li­za­cemi při­byla tato pod­pora i pro In­ter­net Ex­plo­rer 10 ve Win­dows 7 a Win­dows 8.1.</p><h3>Kde SSL certifikáty získat?</h3><p>Mož­ností je spousta. Dobrou nabídku má na­pří­klad <a href="https://www.startssl.com/" target="_blank">Start­Com</a>, který nabízí cer­ti­fi­káty pro ne­ko­merční weby zdarma. Pro ko­merční weby má za­jí­ma­vou nabídku <a href="https://crt.simplia.cz/" target="_blank">Sim­plia</a>, která nabízí cer­ti­fi­kát za 297 Kč na 3 roky.</p></section><div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dajbych.net" /><div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://dajbych.net/assets/wide-300x60.png" /><meta itemprop="width" content="300" /><meta itemprop="height" content="60" /></div></div></article> <footer> <section class="tags"> <h3>Štítky</h3> <p class="tags"> <a href="/tag/Aktualizace" rel="tag">Aktualizace</a> <a href="/tag/HTTP" rel="tag">HTTP</a> </p> </section> <section class="author"> <p itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"> <img src="/design/mvp.png" width="94" height="148" alt="Microsoft MVP" /> napsal <span itemprop="name">Václav Dajbych</span>, <a href="https://mvp.microsoft.com/en-us/mvp/V%C3%A1clav%20Dajbych-5000527" target="_blank" rel="nofollow">Microsoft <abbr title="Most Valuable Professional">MVP</abbr></a> <br /> softwarový vývojář, školitel a konzultant <br /> <a id="em" /> <script type="text/javascript" async="async">
                if (typeof(atob) == &apos;undefined&apos;) {
                    function atob(s) {
                        var e = {}, i, k, v = [], r = &apos;&apos;, w = String.fromCharCode;
                        var n = [[65, 91], [97, 123], [48, 58], [43, 44], [47, 48]];
                        for (z in n) {
                            for (i = n[z][0]; i &amp;lt; n[z][1]; i++) {
                                v.push(w(i));
                            }
                        }
                        for (i = 0; i &amp;lt; 64; i++) {
                            e[v[i]] = i;
                        }
                        for (i = 0; i &amp;lt; s.length; i += 72) {
                            var b = 0, c, x, l = 0, o = s.substring(i, i + 72);
                            for (x = 0; x &amp;lt; o.length; x++) {
                                c = e[o.charAt(x)];
                                b = (b &amp;lt;&amp;lt; 6) + c;
                                l += 6;
                                while (l &amp;gt;= 8) {
                                    r += w((b &amp;gt;&amp;gt;&amp;gt; (l -= 8)) % 256);
                                }
                            }
                        }
                        return r;
                    }
                }
                var em = document.getElementById(&apos;em&apos;);
                em.innerText = atob(&apos;dmFjbGF2QGRhamJ5Y2gubmV0&apos;);
                em.setAttribute(&apos;href&apos;, &apos;mailto:&apos; + em.innerText);
            </script> </p> </section> <section class="misc"> <div class="flex"> <div class="subscribe"> <h3>Odebírat</h3> <p class="socialite"> <a class="twitter" href="https://twitter.com/Dajbych" target="_blank" rel="nofollow"></a> <a class="feed" target="_blank" rel="nofollow"></a> </p> </div> <div class="share"> <h3>Sdílet</h3> <p class="socialite"> <a class="twitter" href="https://twitter.com/intent/tweet?text=Internet+Explorer+podporuje+HTTP+Strict+Transport+Security&url=https%3A%2F%2Fdajbych.net%2Finternet-explorer-podporuje-http-strict-transport-security" target="_blank" rel="nofollow"></a> <a class="facebook" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fdajbych.net%2Finternet-explorer-podporuje-http-strict-transport-security&t=Internet+Explorer+podporuje+HTTP+Strict+Transport+Security" target="_blank" rel="nofollow"></a> <a class="linkedin" href="https://www.linkedin.com/shareArticle?miniu=true&url=https%3A%2F%2Fdajbych.net%2Finternet-explorer-podporuje-http-strict-transport-security&title=Internet+Explorer+podporuje+HTTP+Strict+Transport+Security" target="_blank" rel="nofollow"></a> <a class="gplus" href="https://plus.google.com/share?url=https%3A%2F%2Fdajbych.net%2Finternet-explorer-podporuje-http-strict-transport-security" target="_blank" rel="nofollow"></a> <a class="reddit" href="https://www.reddit.com/submit?url=https%3A%2F%2Fdajbych.net%2Finternet-explorer-podporuje-http-strict-transport-security&title=Internet+Explorer+podporuje+HTTP+Strict+Transport+Security" target="_blank" rel="nofollow"></a> </p> </div> </div> <div class="reco"> <h3>Další</h3> <p class="reco"> <ul> <li> <a href="/projekt-spartan-5-dil-windows-api-pro-webove-aplikace"> <span> <img src="/logos/spartan.png" draggable="false" alt="spartan" /> </span> <span>Projekt Spartan, 5. díl – Windows API pro webové aplikace</span> </a> </li> <li> <a href="/ie-11-0-16-40-oprav"> <span> <img src="/logos/windows-update.png" draggable="false" alt="windows update" /> </span> <span>IE 11.0.16 – 40 oprav</span> </a> </li> <li> <a href="/jak-se-ucinne-branit-zranitelnostem-flashe"> <span> <img src="/logos/flash.png" draggable="false" alt="flash" /> </span> <span>Jak se účinně bránit zranitelnostem Flashe</span> </a> </li> <li> <a href="/zacal-vyvoj-web-components-pro-microsoft-edge"> <span> <img src="/logos/web-components.png" draggable="false" alt="web components" /> </span> <span>Začal vývoj Web Components pro Microsoft Edge</span> </a> </li> </ul> </p> </div> </section> <section class="disqus"> <div id="disqus_thread" /> <script type="text/javascript" async="async">
                    var disqus_shortname = &apos;dajbych&apos;;
                    (function () { var dsq = document.createElement(&apos;script&apos;); dsq.type = &apos;text/javascript&apos;; dsq.async = true; dsq.src = &apos;//&apos; + disqus_shortname + &apos;.disqus.com/embed.js&apos;; (document.getElementsByTagName(&apos;head&apos;)[0] || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(dsq); })();
                </script> </section> <section> <div id="footer1" /> <div id="footer2"> <p>Spuštěním webového prohlížeče s vypnutým posíláním žádosti Do Not Track (Nesledovat) udělujete souhlas s použitím souborů cookie.</p> </div> </section> <environment names="Production"> <script type="text/javascript" async="async">
                (function (i, s, o, g, r, a, m) { i[&apos;GoogleAnalyticsObject&apos;] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, &apos;script&apos;, &apos;//www.google-analytics.com/analytics.js&apos;, &apos;ga&apos;);
                ga(&apos;create&apos;, &apos;UA-2191362-10&apos;, &apos;dajbych.net&apos;);
ga(&apos;set&apos;, &apos;dimension1&apos;, &apos;Front End Web Dev&apos;);                ga(&apos;send&apos;, &apos;pageview&apos;);
                </script> </environment> </footer> </body> </html>