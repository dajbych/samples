<html lang="cs" xml:lang="cs" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema" xmlns:twitter="http://api.twitter.com/"> <head> <title>Dajbych.net</title> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width" /> <link rel="stylesheet" href="/style.css" /> <link rel="icon" type="image/x-icon" href="/design/favicon.ico" /> <meta name="application-name" content="Dajbych.net" /> <meta name="msapplication-config" content="/browserconfig/en" /> <meta name="msapplication-starturl" content="https://dajbych.net/blog/en" /> <meta name="msapplication-tap-highlight" content="no" /> <meta name="description" content="Příští we­bový pro­hlí­žeč od Micro­softu bude mít pře­pra­co­vané já­dro. Jedná se o změnu, která v dě­ji­nách IE ni­kdy ne­na­stala. Nové já­dro…" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:url" content="https://dajbych.net/projekt-spartan-3-dil-nove-jadro" /> <meta name="twitter:title" content="Projekt Spartan, 3. díl – nové jádro" /> <meta name="twitter:description" content="Příští we­bový pro­hlí­žeč od Micro­softu bude mít pře­pra­co­vané já­dro. Jedná se o změnu, která…" /> <meta name="twitter:image" content="https://dajbych.net/assets/square-150x150.png" /> <meta name="twitter:creator" content="@Dajbych" /> <meta property="og:url" content="https://dajbych.net/projekt-spartan-3-dil-nove-jadro" /> <meta property="og:title" content="Projekt Spartan, 3. díl – nové jádro" /> <meta property="og:description" content="Příští we­bový pro­hlí­žeč od Micro­softu bude mít pře­pra­co­vané já­dro. Jedná se o změnu, která v dě­ji­nách IE ni­kdy ne­na­stala. Nové já­dro po­tlačí zpět­nou kom­pa­ti­bi­litu ve prospěch stan­dardů. Uži­va­tel by ne­měl nic po­znat, vý­vo­jář se ne­bude muset zabý­vat vy­kres­lo­va­cími…" /> <meta property="og:image" content="https://dajbych.net/assets/square-310x310.png" /> <script type="text/javascript" src="/scripts/syntax.js" /> </head> <body itemscope="itemscope" itemtype="http://schema.org/TechArticle"> <header> <div> <h1><a href="/" rel="home">Dajbych.net</a></h1> </div> <hr /> <h2 class="article" itemprop="headline">Projekt Spartan, 3. díl – nové jádro</h2> <p><time datetime="2015-02-15 23:00:00Z">únor 2015</time>, 5 minut čtení</p> </header> <article itemprop="articleBody"><meta itemprop="datePublished" content="2015-02-15T23:00:00" /><meta itemprop="dateModified" content="2015-07-30T10:38:00" /><section><p class="perex" itemprop="description">Příští we­bový pro­hlí­žeč od Micro­softu bude mít pře­pra­co­vané já­dro. Jedná se o změnu, která v dě­ji­nách IE ni­kdy ne­na­stala. Nové já­dro po­tlačí zpět­nou kom­pa­ti­bi­litu ve prospěch stan­dardů. Uži­va­tel by ne­měl nic po­znat, vý­vo­jář se ne­bude muset zabý­vat vy­kres­lo­va­cími re­žimy a správce sítě už ne­bude mít problémy s kom­pa­ti­bi­li­tou in­tra­netu po up­gradu pro­hlí­žeče. Stejné am­bice měl už In­ter­net Ex­plo­rer 7. Proč to ten­krát ne­vyšlo a proč si Micro­soft myslí, že to ten­to­krát vyjde?</p><p class="indented">V <a href="https://dajbych.net/projekt-spartan-2-dil-prohlizec-v-korporaci">mi­nulém díle</a> jsem psal o ná­stro­jích, které umož­ňují pro­vést up­grade pro­hlí­žeče ve fi­rem­ním prostředí a zacho­vat při­tom kom­pa­ti­bi­litu in­tra­netu. V tomto díle se budu zabý­vat no­vým já­drem bu­dou­cího pro­hlí­žeče.</p><h3>EdgeHTML</h3><p>Cílem pro­jektu Spar­tan je vy­tvo­ření no­vého já­dra we­bo­vého pro­hlí­žeče, které na­hradí sou­časný Tri­dent. Knihovna <em>MSHTML.dll</em> je za­sta­ralá a na­hradí ji <em>Ed­geHTML.dll</em>. Pří­či­nami jsem se zabý­val v <a href="https://dajbych.net/projekt-spartan-1-dil-dejiny-internet-exploreru-v-kostce">prv­ním díle</a>.</p></section><figure itemprop="image" itemscope="itemscope" itemtype="http://schema.org/ImageObject"><img width="701" height="370" src="/image/projekt-spartan-3-dil-nove-jadro.image1.png" class="border" /><meta itemprop="url" content="http://dajbych.net/image/projekt-spartan-3-dil-nove-jadro.image1.png" /><meta itemprop="width" content="701" /><meta itemprop="height" content="370" /></figure><section><p>Pro do­má­cího uži­va­tele bude Ed­geHTML to je­diné, co bude moci po­u­ží­vat. Ve fi­rem­ním prostředí bude možné pro ur­čité do­mény z Inter­netu vy­nu­tit starší MSHTML. Sou­časně se bude MSHTML po­u­ží­vat pro in­tra­net.</p><h4>V čem se liší?</h4><p>Ed­geHTML se od MSHTML od­li­šuje mno­hem více, než Blink od Web­Kitu.</p><ul> <li>Ed­geHTML pře­de­vším ne­ob­sahuje 6 ro­din vy­kres­lo­va­cích re­žimů. Všechny kom­pa­tibilní části kódu byly od­stra­něny, včetně <a href="https://en.wikipedia.org/wiki/Quirks_mode" target="_blank">Quirks</a> re­žimů. Hla­vička <em>X-UA-</em><em>Com­pa­ti­ble</em> tedy nic přepínat ne­bude, pro­tože není co. Od­stra­ně­ním kom­pa­ti­bil­ních kon­t­rol se zrych­lila odezva pro­hlí­žeče. Bude se moct ino­vo­vat rych­leji, pro­tože bude méně kódu, o který bude nutné se sta­rat.</li> <li>Ed­geHTML je na­vr­žený pro Win­dows 10. To samé já­dro bude na stol­ním po­čítači, tabletu i te­le­fonu. Dříve byl IE pro WP pa­ra­lelní vě­tev pro­hlí­žeče, pro­tože i sa­motný WP byl pa­ra­lelní vě­tev Win­dows.</li> <li>Ed­geHTML nepod­po­ruje VB­Script, ani ja­vascrip­tové me­tody spe­ci­fické pro IE jako <em>at­ta­chE­vent</em> nebo <em>current­Style</em>.</li> <li>Ed­geHTML bude pod­po­ro­vat <a href="https://status.modern.ie/webrtcobjectrtcapi?iestatuses=indevelopment,iedev&browserstatuses=&browsers=chrome,firefox,opera,safari&ieversion=11" target="_blank">mnoho no­vých tech­nik</a>. V sou­čas­nosti víme o <a href="https://en.wikipedia.org/wiki/HTTP/2" target="_blank">HTTP/2</a>, <a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security" target="_blank">HSTS</a>, <a href="https://en.wikipedia.org/wiki/HTTP_Live_Streaming" target="_blank">HLS</a>, <a href="https://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP" target="_blank">DASH</a>, <a href="https://en.wikipedia.org/wiki/Content_Security_Policy" target="_blank">CSP</a> a <a href="https://en.wikipedia.org/wiki/WebRTC" target="_blank">ORTC</a>. Všechny no­vinky sou­hrnně po­píšu v sa­mo­stat­ném článku, až bu­dou známé všechny. Bude jich přes 40.</li> <li>Ed­geHTML se bude aktua­li­zo­vat měsíčně přes Win­dows Up­date. Už v před­cho­zím roce byl IE ně­ko­li­krát ak­tua­li­zo­ván, aniž změny vyšly jako sa­mo­statná nová verze pro­hlí­žeče. Všichni uži­va­telé Win­dows 10 tak budou mít nej­no­vější verzi pro­hlí­žeče.</li> <li>Ed­geHTML je prav­dě­po­dobně po­sta­vený na ji­ném prin­cipu, než <a href="https://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows" target="_blank">message loop</a>, který po­u­žívá Tri­dent i <a href="https://www.belshe.com/2010/06/04/chrome-cranking-up-the-clock/" target="_blank">Web­Kit</a>. Bude o tom ještě řeč, až bude do­stupný do­sta­tek přes­ných in­for­mací.</li> </ul><h4>Co všechno to rozbije?</h4><p>Nic, pro­tože se Ed­geHTML bude cho­vat jako mo­derní pro­hlí­žeč. Se vším všudy. To zna­mená, že větve kódu na­psané spe­ci­ficky pro IE se ne­bu­dou vy­ko­ná­vat. Od­stra­něno bylo pře­de­vším to, co vý­vo­jáři po­u­ží­vali k de­tekci IE. Takže věci jako tyto ne­bu­dou fun­go­vat.</p></section><div class="code"><div><code>document.all document.compatMode navigator.userAgent.indexOf(&apos;MSIE&apos;) &gt; -1 </code></div></div><section><p>Tím se Ed­geHTML zá­sadně liší od toho, s čím při­šel IE 7. Ten sice opra­vil mnoho chyb, ale sou­časně s tím stále fun­go­valy (špatné) de­tekce pro IE 6. Kdo po­u­ží­val <a href="https://msdn.microsoft.com/en-us/library/ms537512.aspx" target="_blank">pod­mí­něné ko­men­táře</a>, toho to trá­pit ne­mu­selo. Fakt je ale ta­kový, že web je plný chyb a chybná de­tekce pro­hlí­žeče se pro­je­vila v mo­mentě, kdy vy­šel IE 7 a ne už ve chvíli, kdy se web tes­to­val na IE 6.</p><h3>Proč Microsoft nepoužil WebKit?</h3><p>Pro­tože vyjít z já­dra Tri­dent bylo mno­hem výhod­nější. Třeba už jen proto, že vý­vo­jáři IE Tri­dent moc dobře znají. Na­víc před­stava, že Chrome a Sa­fari po­u­žívají Web­Kit, je ve­lice mylná. Chrome po­u­žívá Blink, což je fork Web­Kitu, a Sa­fari po­u­žívá port Web­Kitu. Jak Chrome, tak i Sa­fari po­u­ží­vají vlastní ja­vascriptové en­giny, které ale ne­mají tak dobrou pod­poru ES6, ja­kou má Cha­kra. Takže ke sjed­no­cení webu by to vů­bec ne­přispělo. Nao­pak by to mohlo zpo­ma­lit jeho vý­voj, jako se stalo v do­bách IE 6.</p><h3>Je to definitivní konec verzování?</h3><p>Zdá se, že ano. Web ve sku­teč­nosti už dlouho fun­guje ji­nak. Ne­kon­t­ro­luje se <a href="https://dajbych.net/prepinani-vykreslovacich-rezimu-internet-exploreru">číslo verze</a>, ale <a href="https://dajbych.net/internet-explorer-opet-zmeni-user-agent-retezec">pod­pora kon­krétní tech­niky</a>. Jak se ale může kon­krétní tech­nika vy­víjet, opra­vo­vat, nebo vylep­šo­vat? Jed­no­duše ne­může. Musí se při tom zacho­vá­vat zpětná kom­pa­ti­bi­lita a ta staví po­měrně úzké man­ti­nely. V dnešní době se stan­dard prak­ticky za­kon­zer­vuje v mo­mentě, kdy se začne ma­sově po­u­ží­vat. V bu­doucnu ne­vznikne jeho nová verze, prostě se vymyslí něco ji­ného, co ho na­hradí. Tak web dnes fun­guje a tomu se musí prohlí­žeče při­způ­so­bit. A nejen ty, ale i výrobci pro­ce­sorů v za­ří­zeních, na kterých běží we­bový pro­hlí­žeč.</p><p class="indented"> <a href="https://dajbych.net/projekt-spartan-4-dil-vylepseni-v-javascriptu">4. díl – vylep­šení v Ja­vaScriptu</a> </p></section><div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dajbych.net" /><div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="http://dajbych.net/assets/wide-300x60.png" /><meta itemprop="width" content="300" /><meta itemprop="height" content="60" /></div></div></article> <footer> <section class="tags"> <h3>Štítky</h3> <p class="tags"> <a href="/tag/Spartan" rel="tag">Spartan</a> <a href="/tag/Edge" rel="tag">Edge</a> </p> </section> <section class="author"> <p itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"> <img src="/design/mvp.png" width="94" height="148" alt="Microsoft MVP" /> napsal <span itemprop="name">Václav Dajbych</span>, <a href="https://mvp.microsoft.com/en-us/mvp/V%C3%A1clav%20Dajbych-5000527" target="_blank" rel="nofollow">Microsoft <abbr title="Most Valuable Professional">MVP</abbr></a> <br /> softwarový vývojář, školitel a konzultant <br /> <a id="em" /> <script type="text/javascript" async="async">
                if (typeof(atob) == &apos;undefined&apos;) {
                    function atob(s) {
                        var e = {}, i, k, v = [], r = &apos;&apos;, w = String.fromCharCode;
                        var n = [[65, 91], [97, 123], [48, 58], [43, 44], [47, 48]];
                        for (z in n) {
                            for (i = n[z][0]; i &amp;lt; n[z][1]; i++) {
                                v.push(w(i));
                            }
                        }
                        for (i = 0; i &amp;lt; 64; i++) {
                            e[v[i]] = i;
                        }
                        for (i = 0; i &amp;lt; s.length; i += 72) {
                            var b = 0, c, x, l = 0, o = s.substring(i, i + 72);
                            for (x = 0; x &amp;lt; o.length; x++) {
                                c = e[o.charAt(x)];
                                b = (b &amp;lt;&amp;lt; 6) + c;
                                l += 6;
                                while (l &amp;gt;= 8) {
                                    r += w((b &amp;gt;&amp;gt;&amp;gt; (l -= 8)) % 256);
                                }
                            }
                        }
                        return r;
                    }
                }
                var em = document.getElementById(&apos;em&apos;);
                em.innerText = atob(&apos;dmFjbGF2QGRhamJ5Y2gubmV0&apos;);
                em.setAttribute(&apos;href&apos;, &apos;mailto:&apos; + em.innerText);
            </script> </p> </section> <section class="misc"> <div class="flex"> <div class="subscribe"> <h3>Odebírat</h3> <p class="socialite"> <a class="twitter" href="https://twitter.com/Dajbych" target="_blank" rel="nofollow"></a> <a class="feed" target="_blank" rel="nofollow"></a> </p> </div> <div class="share"> <h3>Sdílet</h3> <p class="socialite"> <a class="twitter" href="https://twitter.com/intent/tweet?text=Projekt+Spartan%2C+3.+d%C3%ADl+%E2%80%93+nov%C3%A9+j%C3%A1dro&url=https%3A%2F%2Fdajbych.net%2Fprojekt-spartan-3-dil-nove-jadro" target="_blank" rel="nofollow"></a> <a class="facebook" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fdajbych.net%2Fprojekt-spartan-3-dil-nove-jadro&t=Projekt+Spartan%2C+3.+d%C3%ADl+%E2%80%93+nov%C3%A9+j%C3%A1dro" target="_blank" rel="nofollow"></a> <a class="linkedin" href="https://www.linkedin.com/shareArticle?miniu=true&url=https%3A%2F%2Fdajbych.net%2Fprojekt-spartan-3-dil-nove-jadro&title=Projekt+Spartan%2C+3.+d%C3%ADl+%E2%80%93+nov%C3%A9+j%C3%A1dro" target="_blank" rel="nofollow"></a> <a class="gplus" href="https://plus.google.com/share?url=https%3A%2F%2Fdajbych.net%2Fprojekt-spartan-3-dil-nove-jadro" target="_blank" rel="nofollow"></a> <a class="reddit" href="https://www.reddit.com/submit?url=https%3A%2F%2Fdajbych.net%2Fprojekt-spartan-3-dil-nove-jadro&title=Projekt+Spartan%2C+3.+d%C3%ADl+%E2%80%93+nov%C3%A9+j%C3%A1dro" target="_blank" rel="nofollow"></a> </p> </div> </div> <div class="reco"> <h3>Další</h3> <p class="reco"> <ul> <li> <a href="/ie-11-0-16-40-oprav"> <span> <img src="/logos/windows-update.png" draggable="false" alt="windows update" /> </span> <span>IE 11.0.16 – 40 oprav</span> </a> </li> <li> <a href="/projekt-spartan-2-dil-prohlizec-v-korporaci"> <span> <img src="/logos/spartan.png" draggable="false" alt="spartan" /> </span> <span>Projekt Spartan, 2. díl – prohlížeč v korporaci</span> </a> </li> <li> <a href="/projekt-spartan-4-dil-vylepseni-v-javascriptu"> <span> <img src="/logos/spartan.png" draggable="false" alt="spartan" /> </span> <span>Projekt Spartan, 4. díl – vylepšení v JavaScriptu</span> </a> </li> <li> <a href="/projekt-spartan-5-dil-windows-api-pro-webove-aplikace"> <span> <img src="/logos/spartan.png" draggable="false" alt="spartan" /> </span> <span>Projekt Spartan, 5. díl – Windows API pro webové aplikace</span> </a> </li> </ul> </p> </div> </section> <section class="disqus"> <div id="disqus_thread" /> <script type="text/javascript" async="async">
                    var disqus_shortname = &apos;dajbych&apos;;
                    (function () { var dsq = document.createElement(&apos;script&apos;); dsq.type = &apos;text/javascript&apos;; dsq.async = true; dsq.src = &apos;//&apos; + disqus_shortname + &apos;.disqus.com/embed.js&apos;; (document.getElementsByTagName(&apos;head&apos;)[0] || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(dsq); })();
                </script> </section> <section> <div id="footer1" /> <div id="footer2"> <p>Spuštěním webového prohlížeče s vypnutým posíláním žádosti Do Not Track (Nesledovat) udělujete souhlas s použitím souborů cookie.</p> </div> </section> <environment names="Production"> <script type="text/javascript" async="async">
                (function (i, s, o, g, r, a, m) { i[&apos;GoogleAnalyticsObject&apos;] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, &apos;script&apos;, &apos;//www.google-analytics.com/analytics.js&apos;, &apos;ga&apos;);
                ga(&apos;create&apos;, &apos;UA-2191362-10&apos;, &apos;dajbych.net&apos;);
ga(&apos;set&apos;, &apos;dimension1&apos;, &apos;Front End Web Dev&apos;);                ga(&apos;send&apos;, &apos;pageview&apos;);
                </script> </environment> </footer> </body> </html>