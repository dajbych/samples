    <html lang="en-US">  <head> <meta charset="UTF-8" /> <meta name="viewport" content="width=device-width" /> <title>Managed configuration in Spring | All things digital</title> <link rel="profile" href="http://gmpg.org/xfn/11" /> <link rel="pingback" href="https://www.allthingsdigital.nl/xmlrpc.php" />  <link rel="dns-prefetch" href="//www.allthingsdigital.nl" /> <link rel="dns-prefetch" href="//fonts.googleapis.com" /> <link rel="dns-prefetch" href="//s.w.org" /> <link rel="alternate" type="application/rss+xml" title="All things digital » Feed" href="https://www.allthingsdigital.nl/feed/" /> <link rel="alternate" type="application/rss+xml" title="All things digital » Comments Feed" href="https://www.allthingsdigital.nl/comments/feed/" /> <link rel="alternate" type="application/rss+xml" title="All things digital » Managed configuration in Spring Comments Feed" href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/feed/" /> <script type="text/javascript">
			window._wpemojiSettings = {&quot;baseUrl&quot;:&quot;https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/&quot;,&quot;ext&quot;:&quot;.png&quot;,&quot;svgUrl&quot;:&quot;https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/&quot;,&quot;svgExt&quot;:&quot;.svg&quot;,&quot;source&quot;:{&quot;concatemoji&quot;:&quot;https:\/\/www.allthingsdigital.nl\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1&quot;}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement(&quot;canvas&quot;),i=h.getContext&amp;&amp;h.getContext(&quot;2d&quot;),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline=&quot;top&quot;,i.font=&quot;600 32px Arial&quot;,a){case&quot;flag&quot;:return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length&lt;3e3)&amp;&amp;(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case&quot;diversity&quot;:return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;,&quot;+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;,&quot;+e[3],f!==g;case&quot;simple&quot;:return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case&quot;unicode8&quot;:return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case&quot;unicode9&quot;:return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement(&quot;script&quot;);c.src=a,c.type=&quot;text/javascript&quot;,b.getElementsByTagName(&quot;head&quot;)[0].appendChild(c)}var f,g,h,i;for(i=Array(&quot;simple&quot;,&quot;flag&quot;,&quot;unicode8&quot;,&quot;diversity&quot;,&quot;unicode9&quot;),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h&lt;i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&amp;&amp;c.supports[i[h]],&quot;flag&quot;!==i[h]&amp;&amp;(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&amp;&amp;c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&amp;&amp;!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener(&quot;DOMContentLoaded&quot;,g,!1),a.addEventListener(&quot;load&quot;,g,!1)):(a.attachEvent(&quot;onload&quot;,g),b.attachEvent(&quot;onreadystatechange&quot;,function(){&quot;complete&quot;===b.readyState&amp;&amp;c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&amp;&amp;f.twemoji&amp;&amp;(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> <style type="text/css"> img.wp-smiley, img.emoji { display: inline !important; border: none !important; box-shadow: none !important; height: 1em !important; width: 1em !important; margin: 0 .07em !important; vertical-align: -0.1em !important; background: none !important; padding: 0 !important; } </style> <link rel="stylesheet" id="otw_grid_manager-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_grid_manager/css/otw-grid.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="general_foundicons-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_shortcode/css/general_foundicons.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="social_foundicons-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_shortcode/css/social_foundicons.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="otw_shortocde-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_shortcode/css/otw_shortcode.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="twentyfourteen-lato-css" href="https://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic&subset=latin%2Clatin-ext" type="text/css" media="all" /> <link rel="stylesheet" id="genericons-css" href="https://www.allthingsdigital.nl/wp-content/themes/twentyfourteen/genericons/genericons.css?ver=3.0.3" type="text/css" media="all" /> <link rel="stylesheet" id="twentyfourteen-style-css" href="https://www.allthingsdigital.nl/wp-content/themes/twentyfourteen/style.css?ver=4.6.1" type="text/css" media="all" />  <link rel="stylesheet" id="wp-html-sitemap-style-css" href="https://www.allthingsdigital.nl/wp-content/plugins/wp-html-sitemap/css/sitemap.css?ver=4.6.1" type="text/css" media="all" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-includes/js/jquery/jquery.js?ver=1.12.4" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1" /> <link rel="https://api.w.org/" href="https://www.allthingsdigital.nl/wp-json/" /> <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.allthingsdigital.nl/xmlrpc.php?rsd" /> <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.allthingsdigital.nl/wp-includes/wlwmanifest.xml" /> <link rel="prev" title="Setting up an SFTP-only account with OpenSSH" href="https://www.allthingsdigital.nl/2013/05/12/setting-up-an-sftp-only-account-with-openssh/" /> <link rel="next" title="CrashPlan on Mavericks with Java 1.7" href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/" /> <meta name="generator" content="WordPress 4.6.1" /> <link rel="canonical" href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/" /> <link rel="shortlink" href="https://www.allthingsdigital.nl/?p=286" /> <link rel="alternate" type="application/json+oembed" href="https://www.allthingsdigital.nl/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.allthingsdigital.nl%2F2013%2F09%2F21%2Fmanaged-configuration-in-spring%2F" /> <link rel="alternate" type="text/xml+oembed" href="https://www.allthingsdigital.nl/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.allthingsdigital.nl%2F2013%2F09%2F21%2Fmanaged-configuration-in-spring%2F&format=xml" /> <style type="text/css" id="syntaxhighlighteranchor" /> </head> <body class="single single-post postid-286 single-format-standard masthead-fixed singular"> <div id="page" class="hfeed site"> <header id="masthead" class="site-header" role="banner"> <div class="header-main"> <h1 class="site-title"><a href="https://www.allthingsdigital.nl/" rel="home">All things digital</a></h1> <div class="search-toggle"> <a href="#search-container" class="screen-reader-text" aria-expanded="false" aria-controls="search-container">Search</a> </div> <nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation"> <button class="menu-toggle">Primary Menu</button> <a class="screen-reader-text skip-link" href="#content">Skip to content</a> <div class="menu-main-menu-container"><ul id="primary-menu" class="nav-menu"><li id="menu-item-234" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-has-children menu-item-234"><a href="http://www.allthingsdigital.nl/">Home</a> <ul class="sub-menu"> <li id="menu-item-315" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-315"><a href="https://www.allthingsdigital.nl/sitemap/">Sitemap</a></li> <li id="menu-item-316" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-316"><a href="https://www.allthingsdigital.nl/privacy-cookies/">Privacy &amp; cookies</a></li> <li id="menu-item-165" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-165"><a href="https://www.allthingsdigital.nl/about/">About me</a></li> </ul> </li> <li id="menu-item-230" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-230"><a href="https://www.allthingsdigital.nl/category/how-to/">HOWTO</a></li> <li id="menu-item-231" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-231"><a href="https://www.allthingsdigital.nl/category/review/">Review</a></li> <li id="menu-item-232" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-232"><a href="https://www.allthingsdigital.nl/category/column/">Column</a></li> <li id="menu-item-233" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-233"><a href="https://www.allthingsdigital.nl/category/tips-and-tricks/">Tips &amp; Tricks</a></li> <li id="menu-item-336" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-336"><a href="/wp-login.php">Login</a></li> </ul></div> </nav> </div> <div id="search-container" class="search-box-wrapper hide"> <div class="search-box"> <form role="search" method="get" class="search-form" action="https://www.allthingsdigital.nl/"> <label> <span class="screen-reader-text">Search for:</span> <input type="search" class="search-field" placeholder="Search …" value name="s" /> </label> <input type="submit" class="search-submit" value="Search" /> </form> </div> </div> </header> <div id="main" class="site-main"> <div id="primary" class="content-area"> <div id="content" class="site-content" role="main"> <article id="post-286" class="post-286 post type-post status-publish format-standard hentry category-how-to tag-java tag-devel"> <header class="entry-header"> <div class="entry-meta"> <span class="cat-links"><a href="https://www.allthingsdigital.nl/category/how-to/" rel="category tag">HOWTO</a></span> </div> <h1 class="entry-title">Managed configuration in Spring</h1> <div class="entry-meta"> <span class="entry-date"><a href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/" rel="bookmark"><time class="entry-date" datetime="2013-09-21T16:40:35+00:00">September 21, 2013</time></a></span> <span class="byline"><span class="author vcard"><a class="url fn n" href="https://www.allthingsdigital.nl/author/admin/" rel="author">David van Enckevort</a></span></span> <span class="comments-link"><a href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/#respond">Leave a comment</a></span> </div> </header> <div class="entry-content"> <p>The Spring Framework offers many options to configure your applications. Most of these options, however depend on a fixed location for your properties file. Though having a fixed location offers a lot of convenience, sometimes this is not what you want.<br /> For a reason project I investigated a method to allow early checking for the configuration. I found that Spring Framework offers a ApplicationContextInitializer that allows you to inject custom initialisation code early in the wiring of the context. This simple example shows how to set it based on a system property and check that the file is readable.</p> <pre class="brush: java; title: ; notranslate" title> public class PropertiesInitializer implements ApplicationContextInitializer&lt;ConfigurableWebApplicationContext&gt; { /** * A logger instance used for logging messages. */ private static final Logger logger = LoggerFactory.getLogger(PropertiesInitializer.class); private static final String CONFIG_PATH = &quot;WEBCONFIG_LOCATION&quot;; @Override public void initialize(ConfigurableWebApplicationContext ctx) { final String userLocation = System.getProperty(CONFIG_PATH); if (userLocation != null) { Path propertiesFile = Paths.get(userLocation); if (propertiesFile.toFile().canRead()) { final Properties userProperties = new Properties(); try (Reader propertiesReader = Files.newBufferedReader(propertiesFile, StandardCharsets.UTF_8)) { userProperties.load(propertiesReader); final PropertiesPropertySource ps = new PropertiesPropertySource(&quot;USER_PROPERTIES&quot;, userProperties); ctx.getEnvironment().getPropertySources().addFirst(ps); } catch (final IOException ex) { logger.warn(&quot;Exception while reading the properties&quot;, ex); } } else { logger.warn(&quot;The file {} does not exist.&quot;, userLocation); } } else { logger.info(&quot;The Java system property {} was not set.&quot; + &quot; You can set it to the location of a properties file to override the default configuration.&quot;, CONFIG_PATH); } } } </pre> <p>This technique however allows to do a lot more than that. For instance you could do extensive validation on your properties: are all properties set; are file locations valid; is the database readable; etc. The advantage of checking this yourself is that you can fail early with a clear error message instead of making the administrator go throw a long list of exceptions to find out what’s wrong.</p> <p>The complete code for this example project can be found in my github repository: <a href="https://github.com/djvanenckevort/allthingsdigital/">https://github.com/djvanenckevort/allthingsdigital/</a></p> </div> <footer class="entry-meta"><span class="tag-links"><a href="https://www.allthingsdigital.nl/tag/java/" rel="tag">Java</a><a href="https://www.allthingsdigital.nl/tag/devel/" rel="tag">Software Development</a></span></footer></article> <nav class="navigation post-navigation" role="navigation"> <h1 class="screen-reader-text">Post navigation</h1> <div class="nav-links"> <a href="https://www.allthingsdigital.nl/2013/05/12/setting-up-an-sftp-only-account-with-openssh/" rel="prev"><span class="meta-nav">Previous Post</span>Setting up an SFTP-only account with OpenSSH</a><a href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/" rel="next"><span class="meta-nav">Next Post</span>CrashPlan on Mavericks with Java 1.7</a> </div> </nav> <div id="comments" class="comments-area"> <div id="respond" class="comment-respond"> <h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2013/09/21/managed-configuration-in-spring/#respond" style="display:none;">Cancel reply</a></small></h3> <form action="https://www.allthingsdigital.nl/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate> <p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required" /></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value size="30" maxlength="245" aria-required="true" required="required" /></p> <p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required" /></p> <p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value size="30" maxlength="200" /></p> <p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type="hidden" name="comment_post_ID" value="286" id="comment_post_ID" /> <input type="hidden" name="comment_parent" id="comment_parent" value="0" /> </p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="5e9d0648a0" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="141" /></p> </form> </div> </div> </div> </div> <div id="content-sidebar" class="content-sidebar widget-area" role="complementary"> <aside id="text-3" class="widget widget_text"><h1 class="widget-title">License</h1> <div class="textwidget"><p>This work by <a href="http://www.vanenckevort.net/about-me/" property="cc:attributionName" rel="cc:attributionURL" xmlns:cc="http://creativecommons.org/ns#">David van Enckevort</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p> <p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></p> </div> </aside> <aside id="recent-posts-4" class="widget widget_recent_entries"> <h1 class="widget-title">Recent Posts</h1> <ul> <li> <a href="https://www.allthingsdigital.nl/2014/07/24/a-trick-to-upload-large-files-to-box-com/">A trick to upload large files to box.com</a> </li> <li> <a href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/">CrashPlan on Mavericks with Java 1.7</a> </li> <li> <a href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/">Managed configuration in Spring</a> </li> <li> <a href="https://www.allthingsdigital.nl/2013/05/12/setting-up-an-sftp-only-account-with-openssh/">Setting up an SFTP-only account with OpenSSH</a> </li> <li> <a href="https://www.allthingsdigital.nl/2012/10/07/automated-image-manipulation-on-the-mac-for-pre-printing/">Automated image manipulation on the Mac for pre-printing</a> </li> </ul> </aside> <aside id="text-4" class="widget widget_text"><h1 class="widget-title">Statistics</h1> <div class="textwidget"><iframe src="https://www.vanenckevort.net/analytics/index.php?module=CoreAdminHome&action=optOut&language=nl" /></div> </aside></div> <div id="secondary"> <h2 class="site-description">Thoughts about things digital</h2> <nav role="navigation" class="navigation site-navigation secondary-navigation"> <div class="menu-social-container"><ul id="menu-social" class="menu"><li id="menu-item-334" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-334"><a href="https://www.vanenckevort.net/">Personal site</a></li> <li id="menu-item-335" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-335"><a href="/feed/">RSS</a></li> <li id="menu-item-332" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-332"><a href="https://www.facebook.com/djvanenckevort">Facebook</a></li> <li id="menu-item-333" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-333"><a href="https://www.linkedin.com/in/djvanenckevort">LinkedIn</a></li> </ul></div> </nav> </div> </div> <footer id="colophon" class="site-footer" role="contentinfo"> <div class="site-info"> <a href="https://wordpress.org/">Proudly powered by WordPress</a> </div> </footer> </div> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/akismet/_inc/form.js?ver=3.2" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0.9b" /> <script type="text/javascript">
	(function(){
		var corecss = document.createElement(&apos;link&apos;);
		var themecss = document.createElement(&apos;link&apos;);
		var corecssurl = &quot;https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b&quot;;
		if ( corecss.setAttribute ) {
				corecss.setAttribute( &quot;rel&quot;, &quot;stylesheet&quot; );
				corecss.setAttribute( &quot;type&quot;, &quot;text/css&quot; );
				corecss.setAttribute( &quot;href&quot;, corecssurl );
		} else {
				corecss.rel = &quot;stylesheet&quot;;
				corecss.href = corecssurl;
		}
		document.getElementsByTagName(&quot;head&quot;)[0].insertBefore( corecss, document.getElementById(&quot;syntaxhighlighteranchor&quot;) );
		var themecssurl = &quot;https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b&quot;;
		if ( themecss.setAttribute ) {
				themecss.setAttribute( &quot;rel&quot;, &quot;stylesheet&quot; );
				themecss.setAttribute( &quot;type&quot;, &quot;text/css&quot; );
				themecss.setAttribute( &quot;href&quot;, themecssurl );
		} else {
				themecss.rel = &quot;stylesheet&quot;;
				themecss.href = themecssurl;
		}
		//document.getElementById(&quot;syntaxhighlighteranchor&quot;).appendChild(themecss);
		document.getElementsByTagName(&quot;head&quot;)[0].insertBefore( themecss, document.getElementById(&quot;syntaxhighlighteranchor&quot;) );
	})();
	SyntaxHighlighter.config.strings.expandSource = &apos;+ expand source&apos;;
	SyntaxHighlighter.config.strings.help = &apos;?&apos;;
	SyntaxHighlighter.config.strings.alert = &apos;SyntaxHighlighter\n\n&apos;;
	SyntaxHighlighter.config.strings.noBrush = &apos;Can\&apos;t find brush for: &apos;;
	SyntaxHighlighter.config.strings.brushNotHtmlScript = &apos;Brush wasn\&apos;t configured for html-script option: &apos;;
	SyntaxHighlighter.defaults[&apos;pad-line-numbers&apos;] = false;
	SyntaxHighlighter.defaults[&apos;toolbar&apos;] = false;
	SyntaxHighlighter.all();
</script> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/themes/twentyfourteen/js/functions.js?ver=20150315" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-includes/js/wp-embed.min.js?ver=4.6.1" /> </body> </html>