    <html lang="en-US">  <head> <meta charset="UTF-8" /> <meta name="viewport" content="width=device-width" /> <title>CrashPlan on Mavericks with Java 1.7 | All things digital</title> <link rel="profile" href="http://gmpg.org/xfn/11" /> <link rel="pingback" href="https://www.allthingsdigital.nl/xmlrpc.php" />  <link rel="dns-prefetch" href="//www.allthingsdigital.nl" /> <link rel="dns-prefetch" href="//fonts.googleapis.com" /> <link rel="dns-prefetch" href="//s.w.org" /> <link rel="alternate" type="application/rss+xml" title="All things digital » Feed" href="https://www.allthingsdigital.nl/feed/" /> <link rel="alternate" type="application/rss+xml" title="All things digital » Comments Feed" href="https://www.allthingsdigital.nl/comments/feed/" /> <link rel="alternate" type="application/rss+xml" title="All things digital » CrashPlan on Mavericks with Java 1.7 Comments Feed" href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/feed/" /> <script type="text/javascript">
			window._wpemojiSettings = {&quot;baseUrl&quot;:&quot;https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/&quot;,&quot;ext&quot;:&quot;.png&quot;,&quot;svgUrl&quot;:&quot;https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/&quot;,&quot;svgExt&quot;:&quot;.svg&quot;,&quot;source&quot;:{&quot;concatemoji&quot;:&quot;https:\/\/www.allthingsdigital.nl\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1&quot;}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement(&quot;canvas&quot;),i=h.getContext&amp;&amp;h.getContext(&quot;2d&quot;),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline=&quot;top&quot;,i.font=&quot;600 32px Arial&quot;,a){case&quot;flag&quot;:return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length&lt;3e3)&amp;&amp;(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case&quot;diversity&quot;:return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;,&quot;+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;,&quot;+e[3],f!==g;case&quot;simple&quot;:return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case&quot;unicode8&quot;:return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case&quot;unicode9&quot;:return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement(&quot;script&quot;);c.src=a,c.type=&quot;text/javascript&quot;,b.getElementsByTagName(&quot;head&quot;)[0].appendChild(c)}var f,g,h,i;for(i=Array(&quot;simple&quot;,&quot;flag&quot;,&quot;unicode8&quot;,&quot;diversity&quot;,&quot;unicode9&quot;),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h&lt;i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&amp;&amp;c.supports[i[h]],&quot;flag&quot;!==i[h]&amp;&amp;(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&amp;&amp;c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&amp;&amp;!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener(&quot;DOMContentLoaded&quot;,g,!1),a.addEventListener(&quot;load&quot;,g,!1)):(a.attachEvent(&quot;onload&quot;,g),b.attachEvent(&quot;onreadystatechange&quot;,function(){&quot;complete&quot;===b.readyState&amp;&amp;c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&amp;&amp;f.twemoji&amp;&amp;(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> <style type="text/css"> img.wp-smiley, img.emoji { display: inline !important; border: none !important; box-shadow: none !important; height: 1em !important; width: 1em !important; margin: 0 .07em !important; vertical-align: -0.1em !important; background: none !important; padding: 0 !important; } </style> <link rel="stylesheet" id="otw_grid_manager-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_grid_manager/css/otw-grid.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="general_foundicons-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_shortcode/css/general_foundicons.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="social_foundicons-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_shortcode/css/social_foundicons.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="otw_shortocde-css" href="https://www.allthingsdigital.nl/wp-content/plugins/widgetize-pages-light/include/otw_components/otw_shortcode/css/otw_shortcode.css?ver=1.1" type="text/css" media="all" /> <link rel="stylesheet" id="twentyfourteen-lato-css" href="https://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic&subset=latin%2Clatin-ext" type="text/css" media="all" /> <link rel="stylesheet" id="genericons-css" href="https://www.allthingsdigital.nl/wp-content/themes/twentyfourteen/genericons/genericons.css?ver=3.0.3" type="text/css" media="all" /> <link rel="stylesheet" id="twentyfourteen-style-css" href="https://www.allthingsdigital.nl/wp-content/themes/twentyfourteen/style.css?ver=4.6.1" type="text/css" media="all" />  <link rel="stylesheet" id="wp-html-sitemap-style-css" href="https://www.allthingsdigital.nl/wp-content/plugins/wp-html-sitemap/css/sitemap.css?ver=4.6.1" type="text/css" media="all" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-includes/js/jquery/jquery.js?ver=1.12.4" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1" /> <link rel="https://api.w.org/" href="https://www.allthingsdigital.nl/wp-json/" /> <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.allthingsdigital.nl/xmlrpc.php?rsd" /> <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.allthingsdigital.nl/wp-includes/wlwmanifest.xml" /> <link rel="prev" title="Managed configuration in Spring" href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/" /> <link rel="next" title="A trick to upload large files to box.com" href="https://www.allthingsdigital.nl/2014/07/24/a-trick-to-upload-large-files-to-box-com/" /> <meta name="generator" content="WordPress 4.6.1" /> <link rel="canonical" href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/" /> <link rel="shortlink" href="https://www.allthingsdigital.nl/?p=301" /> <link rel="alternate" type="application/json+oembed" href="https://www.allthingsdigital.nl/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.allthingsdigital.nl%2F2013%2F11%2F07%2Fcrashplan-on-mavericks-with-java-1-7%2F" /> <link rel="alternate" type="text/xml+oembed" href="https://www.allthingsdigital.nl/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.allthingsdigital.nl%2F2013%2F11%2F07%2Fcrashplan-on-mavericks-with-java-1-7%2F&format=xml" /> <style type="text/css" id="syntaxhighlighteranchor" /> </head> <body class="single single-post postid-301 single-format-standard masthead-fixed singular"> <div id="page" class="hfeed site"> <header id="masthead" class="site-header" role="banner"> <div class="header-main"> <h1 class="site-title"><a href="https://www.allthingsdigital.nl/" rel="home">All things digital</a></h1> <div class="search-toggle"> <a href="#search-container" class="screen-reader-text" aria-expanded="false" aria-controls="search-container">Search</a> </div> <nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation"> <button class="menu-toggle">Primary Menu</button> <a class="screen-reader-text skip-link" href="#content">Skip to content</a> <div class="menu-main-menu-container"><ul id="primary-menu" class="nav-menu"><li id="menu-item-234" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-has-children menu-item-234"><a href="http://www.allthingsdigital.nl/">Home</a> <ul class="sub-menu"> <li id="menu-item-315" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-315"><a href="https://www.allthingsdigital.nl/sitemap/">Sitemap</a></li> <li id="menu-item-316" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-316"><a href="https://www.allthingsdigital.nl/privacy-cookies/">Privacy &amp; cookies</a></li> <li id="menu-item-165" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-165"><a href="https://www.allthingsdigital.nl/about/">About me</a></li> </ul> </li> <li id="menu-item-230" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-230"><a href="https://www.allthingsdigital.nl/category/how-to/">HOWTO</a></li> <li id="menu-item-231" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-231"><a href="https://www.allthingsdigital.nl/category/review/">Review</a></li> <li id="menu-item-232" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-232"><a href="https://www.allthingsdigital.nl/category/column/">Column</a></li> <li id="menu-item-233" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-233"><a href="https://www.allthingsdigital.nl/category/tips-and-tricks/">Tips &amp; Tricks</a></li> <li id="menu-item-336" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-336"><a href="/wp-login.php">Login</a></li> </ul></div> </nav> </div> <div id="search-container" class="search-box-wrapper hide"> <div class="search-box"> <form role="search" method="get" class="search-form" action="https://www.allthingsdigital.nl/"> <label> <span class="screen-reader-text">Search for:</span> <input type="search" class="search-field" placeholder="Search …" value name="s" /> </label> <input type="submit" class="search-submit" value="Search" /> </form> </div> </div> </header> <div id="main" class="site-main"> <div id="primary" class="content-area"> <div id="content" class="site-content" role="main"> <article id="post-301" class="post-301 post type-post status-publish format-standard hentry category-how-to tag-crashplan tag-java tag-mac"> <header class="entry-header"> <div class="entry-meta"> <span class="cat-links"><a href="https://www.allthingsdigital.nl/category/how-to/" rel="category tag">HOWTO</a></span> </div> <h1 class="entry-title">CrashPlan on Mavericks with Java 1.7</h1> <div class="entry-meta"> <span class="entry-date"><a href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/" rel="bookmark"><time class="entry-date" datetime="2013-11-07T22:10:15+00:00">November 7, 2013</time></a></span> <span class="byline"><span class="author vcard"><a class="url fn n" href="https://www.allthingsdigital.nl/author/admin/" rel="author">David van Enckevort</a></span></span> <span class="comments-link"><a href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/#comments">1 Comment</a></span> </div> </header> <div class="entry-content"> <p>Last month Apple released OS X Mavericks (10.9) and again removed Java 1.6 from your system during the upgrade. Since Oracle stopped support for Java 1.6 I think this is a good thing, and I want to avoid installing Java 1.6 for any application. At first CrashPlan seemed to work with Java 1.7 just fine, Crashplan’s menubar icon told me it was backing up and I didn’t get any alerts from Crashplan about my backups either. However today I noticed that CrashPlan will not start the client. When I start the CrashPlan client I’m greeted by a dialog that tells me that I need Java 1.6. When I looked at <a href="http://support.code42.com/CrashPlan/Latest/Troubleshooting/Systems_Upgraded_to_Mac_OS_X_Mavericks_Require_Manual_Intervention" title="Crashplan support site" target="_blank">the CrashPlan support site</a> it told me to install Java 1.6, what a shame! CrashPlan does offer an alternative, but it comes with a warning that it might cause problems with other applications and involves changing the application settings for Java 1.7. Since these settings are stored in a Info.plist file within the Java installation directory I would have to remember to set this each time I install a Java update. All in all not a good proposition, so armed with the knowledge that the application should work with Java 1.7 I started to look for a way to start it.</p> <h2>Piecing it together</h2> <p>The first clues for figuring out how to start the application come from the file /Applications/CrashPlan.app/Contents/Info.plist. This file holds information that is used by the system to determine how to start an application. For a java application like CrashPlan it tells about specific Java options and arguments to the Java Virtual Machine. The part that was of particular interest was the following:</p> <pre class="brush: xml; title: ; notranslate" title> &lt;key&gt;Java&lt;/key&gt; &lt;dict&gt; &lt;key&gt;ClassPath&lt;/key&gt; &lt;array&gt; &lt;string&gt;$JAVAROOT/lib/com.backup42.desktop.jar&lt;/string&gt; &lt;string&gt;$JAVAROOT/skin&lt;/string&gt; &lt;string&gt;$JAVAROOT/lang&lt;/string&gt; &lt;/array&gt; &lt;key&gt;JVMVersion&lt;/key&gt; &lt;string&gt;1.5*&lt;/string&gt; &lt;key&gt;JVMArches&lt;/key&gt; &lt;array&gt; &lt;string&gt;i386&lt;/string&gt; &lt;string&gt;ppc&lt;/string&gt; &lt;/array&gt; &lt;key&gt;MainClass&lt;/key&gt; &lt;string&gt;com.backup42.desktop.CPDesktopWrapper&lt;/string&gt; &lt;key&gt;StartOnMainThread&lt;/key&gt; &lt;true/&gt; &lt;key&gt;VMOptions&lt;/key&gt; &lt;array&gt; &lt;string&gt;-Dfile.encoding=UTF-8&lt;/string&gt; &lt;string&gt;-DappBaseName=CrashPlan&lt;/string&gt; &lt;string&gt;-Dsun.net.inetaddr.ttl=300&lt;/string&gt; &lt;string&gt;-Dnetworkaddress.cache.ttl=300&lt;/string&gt; &lt;string&gt;-Dsun.net.inetaddr.negative.ttl=0&lt;/string&gt; &lt;string&gt;-Dnetworkaddress.cache.negative.ttl=0&lt;/string&gt; &lt;string&gt;-Djava.net.preferIPv4Stack=true&lt;/string&gt; &lt;/array&gt; &lt;key&gt;WorkingDirectory&lt;/key&gt; &lt;string&gt;$APP_PACKAGE/Contents/Resources/Java&lt;/string&gt; &lt;/dict&gt; </pre> <p>In this block some crucial information is set. The name of the main class that has to be invoked (MainClass key), the class path used by the application (ClassPath key), options to the JVM (VMOptions key) and the working directory of the application (WorkingDirectory key).</p> <h2>Exceptions…</h2> <p>With this information I created a first version of a shell script to start the application. However it quickly failed with an Exception:</p> <pre class="brush: plain; title: ; notranslate" title> [11.06.13 22:12:15.057 ERROR main root ] Failed to launch CPDesktop; java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display at com.backup42.desktop.CPDesktop.&lt;init&gt;(CPDesktop.java:266) at com.backup42.desktop.CPDesktop.main(CPDesktop.java:200) at com.backup42.desktop.CPDesktopWrapper.main(CPDesktopWrapper.java:23) Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.widgets.Display at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:425) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) at java.lang.ClassLoader.loadClass(ClassLoader.java:358) ... 3 more </pre> <p>So the application was not finding all the classes. An ls on the lib directory gave a list of additional jar files.</p> <pre class="brush: plain; title: ; notranslate" title> darwin:Java enckevort$ ls -l lib/ total 40568 -rw-r--r-- 1 root staff 1290808 18 apr 2013 c42_protolib.jar -rw-r--r-- 1 root staff 5716574 18 apr 2013 com.backup42.desktop.jar -rw-r--r-- 1 root staff 215243 18 apr 2013 com.jniwrapper.jniwrap.jar -rw-r--r-- 1 root staff 1285054 18 apr 2013 com.jniwrapper.macpack.jar -rw-r--r-- 1 root staff 706581 18 apr 2013 com.jniwrapper.winpack.jar -rw-rw-r-- 1 enckevort staff 268794 16 mrt 2011 commons-jxpath-1.1.jar -rw-r--r-- 1 enckevort staff 946973 16 mrt 2011 jna-3.2.5.jar -rw-r--r-- 1 enckevort staff 41829 16 mrt 2011 json-20070829.jar -rw-r--r-- 1 root staff 159123 27 mrt 2012 json-lib-2.4.jar -rw-rw-r-- 1 enckevort staff 41291 16 mrt 2011 jtux.jar -rw-r--r-- 1 root staff 481534 27 mrt 2012 log4j-1.2.16.jar -rw-rw-r-- 1 enckevort staff 69028 16 mrt 2011 miglayout15-swt.jar -rw-r--r-- 1 root staff 108731 18 apr 2013 org.eclipse.core.commands_3.6.1.v20120814-150512.jar -rw-r--r-- 1 root staff 106763 18 apr 2013 org.eclipse.equinox.common_3.6.100.v20120522-1841.jar -rw-r--r-- 1 root staff 1090959 18 apr 2013 org.eclipse.jface_3.8.101.v20120817-083647.jar -rw-r--r-- 1 root staff 1396459 18 apr 2013 org.eclipse.osgi_3.8.1.v20120830-144521.jar -rw-r--r-- 1 root staff 450279 27 mrt 2012 protobuf-java-2.4.1.jar -rw-rw-r-- 1 enckevort staff 81591 16 mrt 2011 sbbi-upnplib-1.0.4.jar -rw-r--r-- 1 root staff 25496 18 apr 2013 slf4j-api-1.6.1.jar -rw-r--r-- 1 root staff 9753 18 apr 2013 slf4j-log4j12-1.6.1.jar -rw-r--r-- 1 root staff 1664400 18 apr 2013 swt-64.jar -rw-r--r-- 1 root staff 1760744 18 apr 2013 swt.jar -rw-r--r-- 1 root staff 2522902 27 mrt 2012 trove-3.0.2.jar -rw-r--r-- 1 root staff 284059 18 apr 2013 twitter4j.jar </pre> <p>So my second attempt was to just add all those jar files to the classpath. Unfortunately, and slightly surprisingly that didn’t work! I got a new exception:</p> <pre class="brush: plain; title: ; notranslate" title> [11.06.13 22:15:31.797 ERROR main com.backup42.desktop.CPDesktop ] Failed to launch CPDesktop; java.lang.UnsatisfiedLinkError: Cannot load 32-bit SWT libraries on 64-bit JVM, java.lang.UnsatisfiedLinkError: Cannot load 32-bit SWT libraries on 64-bit JVM java.lang.UnsatisfiedLinkError: Cannot load 32-bit SWT libraries on 64-bit JVM at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source) at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source) at org.eclipse.swt.internal.C.&lt;clinit&gt;(Unknown Source) at org.eclipse.swt.widgets.Display.&lt;clinit&gt;(Unknown Source) at com.backup42.desktop.CPDesktop.&lt;init&gt;(CPDesktop.java:266) at com.backup42.desktop.CPDesktop.main(CPDesktop.java:200) at com.backup42.desktop.CPDesktopWrapper.main(CPDesktopWrapper.java:23) </pre> <p>Okay, so it is trying to load the wrong libraries… what’s going on?</p> <p>I decided to check if the application had a manifest file. This is a file that can be present in a jar file and describes the additional jar files to add to the classpath when trying to load a class. The file has a fixed location and name: META-INF/MANIFEST.MF. So I checked for the presence with the following command:</p> <pre class="brush: plain; title: ; notranslate" title> unzip -l lib/com.backup42.desktop.jar META-INF/MANIFEST.MF </pre> <p>I was in luck, the jar file did indeed come with a manifest file. I extracted it and got the following file:</p> <pre class="brush: plain; title: ; notranslate" title> Manifest-Version: 1.0 Ant-Version: Apache Ant 1.8.2 Created-By: 1.6.0_31-b04-415-11M3646 (Apple Inc.) Built-By: Code 42 Software Class-Path: c42_protolib.jar com.jniwrapper.jniwrap.jar com.jniwrapper .macpack.jar com.jniwrapper.winpack.jar comfyj-2.10.jar commons-colle ctions-3.2.1-mini.jar commons-jxpath-1.1.jar jna-3.2.5.jar json-20070 829.jar json-lib-2.4.jar jtux.jar log4j-1.2.16.jar miglayout15-swt.ja r org.eclipse.core.commands_3.6.1.v20120814-150512.jar org.eclipse.eq uinox.common_3.6.100.v20120522-1841.jar org.eclipse.jface_3.8.101.v20 120817-083647.jar org.eclipse.osgi_3.8.1.v20120830-144521.jar protobu f-java-2.4.1.jar rhino-1.7r3.jar sbbi-upnplib-1.0.4.jar slf4j-api-1.6 .1.jar slf4j-log4j12-1.6.1.jar trove-3.0.2.jar twitter4j.jar </pre> <p>When I created the classpath based on this list I got again one step further. However I still hadn’t solved the puzzle, because I got another Exception:</p> <pre class="brush: plain; title: ; notranslate" title> ***WARNING: Display must be created on main thread due to Cocoa restrictions. [11.06.13 22:27:46.058 ERROR main root ] Failed to launch CPDesktop; org.eclipse.swt.SWTException: Invalid thread access Exception in thread &quot;main&quot; org.eclipse.swt.SWTException: Invalid thread access at org.eclipse.swt.SWT.error(Unknown Source) at org.eclipse.swt.SWT.error(Unknown Source) at org.eclipse.swt.SWT.error(Unknown Source) at org.eclipse.swt.widgets.Display.error(Unknown Source) at org.eclipse.swt.widgets.Display.createDisplay(Unknown Source) at org.eclipse.swt.widgets.Display.create(Unknown Source) at org.eclipse.swt.graphics.Device.&lt;init&gt;(Unknown Source) at org.eclipse.swt.widgets.Display.&lt;init&gt;(Unknown Source) at org.eclipse.swt.widgets.Display.&lt;init&gt;(Unknown Source) at org.eclipse.swt.widgets.Display.getDefault(Unknown Source) at com.backup42.desktop.CPDesktop.&lt;init&gt;(CPDesktop.java:354) at com.backup42.desktop.CPDesktop.main(CPDesktop.java:200) at com.backup42.desktop.CPDesktopWrapper.main(CPDesktopWrapper.java:23) </pre> <p>I was pretty convinced that I had the options right, and the warning message told me I was looking at a OS X specific issue, so I did a quick internet search for the message “***WARNING: Display must be created on main thread due to Cocoa restrictions.”. Quickly I found out that I was missing one OS X specific setting: -XstartOnFirstThread. When I added it my last exception was gone and I could start the CrashPlan client!</p> <h2>The script</h2> <p>The final version of the shell script lives in my /usr/local/bin and looks like this:</p> <pre class="brush: plain; title: ; notranslate" title> #!/bin/bash -e APP_PACKAGE=&apos;/Applications/CrashPlan.app&apos; JAVAROOT=&quot;${APP_PACKAGE}/Contents/Resources/Java&quot; cd &quot;${JAVAROOT}&quot; CLASSPATH=&quot;${JAVAROOT}/skin:${JAVAROOT}/lang&quot; JARS=&quot;com.backup42.desktop.jar c42_protolib.jar com.jniwrapper.jniwrap.jar com.jniwrapper.macpack.jar com.jniwrapper.winpack.jar comfyj-2.10.jar commons-collections-3.2.1-mini.jar commons-jxpath-1.1.jar jna-3.2.5.jar json-20070829.jar json-lib-2.4.jar jtux.jar log4j-1.2.16.jar miglayout15-swt.jar org.eclipse.core.commands_3.6.1.v20120814-150512.jar org.eclipse.equinox.common_3.6.100.v20120522-1841.jar org.eclipse.jface_3.8.101.v20120817-083647.jar org.eclipse.osgi_3.8.1.v20120830-144521.jar protobuf-java-2.4.1.jar rhino-1.7r3.jar sbbi-upnplib-1.0.4.jar slf4j-api-1.6.1.jar slf4j-log4j12-1.6.1.jar trove-3.0.2.jar twitter4j.jar&quot; for JAR in ${JARS} do CLASSPATH=&quot;${JAVAROOT}/lib/${JAR}:${CLASSPATH}&quot; done java -XstartOnFirstThread -Dfile.encoding=UTF-8 -DappBaseName=CrashPlan -Dsun.net.inetaddr.ttl=300 -Dnetworkaddress.cache.ttl=300 -Dsun.net.inetaddr.negative.ttl=0 -Dnetworkaddress.cache.negative.ttl=0 -Djava.net.preferIPv4Stack=true -cp &quot;${CLASSPATH}&quot; com.backup42.desktop.CPDesktopWrapper </pre> <h2>Conclusion</h2> <p>I can now start the CrashPlan client with the command crashplan in Terminal. Trying to start CrashPlan from the menubar icon or from /Applications still gives the same message about needing Java 1.6. This script shows however that there is no reason why CrashPlan shouldn’t support Java 1.7 and I hope it will help convince Code 42 to resolve this issue. It is already three years ago that <a href="https://www.allthingsdigital.nl/2010/11/16/openjdk-on-the-mac/" title="OpenJDK on the Mac">Apple announced that it would phase out support for its Java Virtual Machine</a>, so it is really a shame that Code 42 hash’t made an effort to support Java 1.7.</p> </div> <footer class="entry-meta"><span class="tag-links"><a href="https://www.allthingsdigital.nl/tag/crashplan/" rel="tag">CrashPlan</a><a href="https://www.allthingsdigital.nl/tag/java/" rel="tag">Java</a><a href="https://www.allthingsdigital.nl/tag/mac/" rel="tag">Mac OS X</a></span></footer></article> <nav class="navigation post-navigation" role="navigation"> <h1 class="screen-reader-text">Post navigation</h1> <div class="nav-links"> <a href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/" rel="prev"><span class="meta-nav">Previous Post</span>Managed configuration in Spring</a><a href="https://www.allthingsdigital.nl/2014/07/24/a-trick-to-upload-large-files-to-box-com/" rel="next"><span class="meta-nav">Next Post</span>A trick to upload large files to box.com</a> </div> </nav> <div id="comments" class="comments-area"> <h2 class="comments-title"> One thought on “CrashPlan on Mavericks with Java 1.7” </h2> <ol class="comment-list"> <li id="comment-3074" class="comment even thread-even depth-1"> <article id="div-comment-3074" class="comment-body"> <footer class="comment-meta"> <div class="comment-author vcard"> <img alt src="https://secure.gravatar.com/avatar/c50ac6705593834945b68a05927577a3?s=34&d=mm&r=g" srcset="https://secure.gravatar.com/avatar/c50ac6705593834945b68a05927577a3?s=68&d=mm&r=g 2x" class="avatar avatar-34 photo" height="34" width="34" /> <b class="fn">Joshua May</b> <span class="says">says:</span> </div> <div class="comment-metadata"> <a href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/#comment-3074"> <time datetime="2014-06-17T12:22:35+00:00"> June 17, 2014 at 12:22 pm </time> </a> </div> </footer> <div class="comment-content"> <p>Thanks for this! I had no other (obvious) way to exclude my WWDC2014 videos from backing up 😉</p> </div> </article> </li> </ol> <div id="respond" class="comment-respond"> <h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2013/11/07/crashplan-on-mavericks-with-java-1-7/#respond" style="display:none;">Cancel reply</a></small></h3> <form action="https://www.allthingsdigital.nl/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate> <p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required" /></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value size="30" maxlength="245" aria-required="true" required="required" /></p> <p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required" /></p> <p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value size="30" maxlength="200" /></p> <p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type="hidden" name="comment_post_ID" value="301" id="comment_post_ID" /> <input type="hidden" name="comment_parent" id="comment_parent" value="0" /> </p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="77412afe4e" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="232" /></p> </form> </div> </div> </div> </div> <div id="content-sidebar" class="content-sidebar widget-area" role="complementary"> <aside id="text-3" class="widget widget_text"><h1 class="widget-title">License</h1> <div class="textwidget"><p>This work by <a href="http://www.vanenckevort.net/about-me/" property="cc:attributionName" rel="cc:attributionURL" xmlns:cc="http://creativecommons.org/ns#">David van Enckevort</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p> <p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></p> </div> </aside> <aside id="recent-posts-4" class="widget widget_recent_entries"> <h1 class="widget-title">Recent Posts</h1> <ul> <li> <a href="https://www.allthingsdigital.nl/2014/07/24/a-trick-to-upload-large-files-to-box-com/">A trick to upload large files to box.com</a> </li> <li> <a href="https://www.allthingsdigital.nl/2013/11/07/crashplan-on-mavericks-with-java-1-7/">CrashPlan on Mavericks with Java 1.7</a> </li> <li> <a href="https://www.allthingsdigital.nl/2013/09/21/managed-configuration-in-spring/">Managed configuration in Spring</a> </li> <li> <a href="https://www.allthingsdigital.nl/2013/05/12/setting-up-an-sftp-only-account-with-openssh/">Setting up an SFTP-only account with OpenSSH</a> </li> <li> <a href="https://www.allthingsdigital.nl/2012/10/07/automated-image-manipulation-on-the-mac-for-pre-printing/">Automated image manipulation on the Mac for pre-printing</a> </li> </ul> </aside> <aside id="text-4" class="widget widget_text"><h1 class="widget-title">Statistics</h1> <div class="textwidget"><iframe src="https://www.vanenckevort.net/analytics/index.php?module=CoreAdminHome&action=optOut&language=nl" /></div> </aside></div> <div id="secondary"> <h2 class="site-description">Thoughts about things digital</h2> <nav role="navigation" class="navigation site-navigation secondary-navigation"> <div class="menu-social-container"><ul id="menu-social" class="menu"><li id="menu-item-334" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-334"><a href="https://www.vanenckevort.net/">Personal site</a></li> <li id="menu-item-335" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-335"><a href="/feed/">RSS</a></li> <li id="menu-item-332" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-332"><a href="https://www.facebook.com/djvanenckevort">Facebook</a></li> <li id="menu-item-333" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-333"><a href="https://www.linkedin.com/in/djvanenckevort">LinkedIn</a></li> </ul></div> </nav> </div> </div> <footer id="colophon" class="site-footer" role="contentinfo"> <div class="site-info"> <a href="https://wordpress.org/">Proudly powered by WordPress</a> </div> </footer> </div> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/akismet/_inc/form.js?ver=3.2" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.9b" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0.9b" /> <script type="text/javascript">
	(function(){
		var corecss = document.createElement(&apos;link&apos;);
		var themecss = document.createElement(&apos;link&apos;);
		var corecssurl = &quot;https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b&quot;;
		if ( corecss.setAttribute ) {
				corecss.setAttribute( &quot;rel&quot;, &quot;stylesheet&quot; );
				corecss.setAttribute( &quot;type&quot;, &quot;text/css&quot; );
				corecss.setAttribute( &quot;href&quot;, corecssurl );
		} else {
				corecss.rel = &quot;stylesheet&quot;;
				corecss.href = corecssurl;
		}
		document.getElementsByTagName(&quot;head&quot;)[0].insertBefore( corecss, document.getElementById(&quot;syntaxhighlighteranchor&quot;) );
		var themecssurl = &quot;https://www.allthingsdigital.nl/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b&quot;;
		if ( themecss.setAttribute ) {
				themecss.setAttribute( &quot;rel&quot;, &quot;stylesheet&quot; );
				themecss.setAttribute( &quot;type&quot;, &quot;text/css&quot; );
				themecss.setAttribute( &quot;href&quot;, themecssurl );
		} else {
				themecss.rel = &quot;stylesheet&quot;;
				themecss.href = themecssurl;
		}
		//document.getElementById(&quot;syntaxhighlighteranchor&quot;).appendChild(themecss);
		document.getElementsByTagName(&quot;head&quot;)[0].insertBefore( themecss, document.getElementById(&quot;syntaxhighlighteranchor&quot;) );
	})();
	SyntaxHighlighter.config.strings.expandSource = &apos;+ expand source&apos;;
	SyntaxHighlighter.config.strings.help = &apos;?&apos;;
	SyntaxHighlighter.config.strings.alert = &apos;SyntaxHighlighter\n\n&apos;;
	SyntaxHighlighter.config.strings.noBrush = &apos;Can\&apos;t find brush for: &apos;;
	SyntaxHighlighter.config.strings.brushNotHtmlScript = &apos;Brush wasn\&apos;t configured for html-script option: &apos;;
	SyntaxHighlighter.defaults[&apos;pad-line-numbers&apos;] = false;
	SyntaxHighlighter.defaults[&apos;toolbar&apos;] = false;
	SyntaxHighlighter.all();
</script> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-content/themes/twentyfourteen/js/functions.js?ver=20150315" /> <script type="text/javascript" src="https://www.allthingsdigital.nl/wp-includes/js/wp-embed.min.js?ver=4.6.1" /> </body> </html>