 <html lang="ru" class="no-js"> <head> <meta http-equiv="content-type" content="text/html; charset=utf-8" /> <meta content="width=1024" name="viewport" /> <title>Читаем контейнер закрытого ключа КриптоПро средствами OpenSSL / Хабрахабр</title> <meta name="description" content="Речь пойдет о файлах primary.key, masks.key и header.key, которые лежат в директории ххххх.000 на флешке. Данные файлы входят в состав криптоконтейнера закрытого ключа электронной подписи..." /> <meta name="keywords" content="криптопро, криптопровайдер, закрытый ключ" /> <meta property="fb:app_id" content="444736788986613" /> <meta property="og:type" content="article" /> <meta property="og:url" content="https://habrahabr.ru/post/275039/" /> <meta property="og:title" content="Читаем контейнер закрытого ключа КриптоПро средствами OpenSSL" /> <meta property="og:image" content="https://habrastorage.org/files/0aa/ee2/1ef/0aaee21ef1774fd790b79cdaa1aa6bf3.png" /> <link rel="image_src" href="https://habrastorage.org/files/0aa/ee2/1ef/0aaee21ef1774fd790b79cdaa1aa6bf3.png" /><meta property="og:image" content="https://habrastorage.org/files/675/6dc/117/6756dc11714849d6a26ffdca792675bd.png" /> <link rel="image_src" href="https://habrastorage.org/files/675/6dc/117/6756dc11714849d6a26ffdca792675bd.png" /><meta property="og:image" content="https://habrastorage.org/files/bbb/049/353/bbb049353e3048fd84751d45cdcdfc84.png" /> <link rel="image_src" href="https://habrastorage.org/files/bbb/049/353/bbb049353e3048fd84751d45cdcdfc84.png" /> <meta property="og:description" content="Речь пойдет о файлах primary.key, masks.key и header.key, которые лежат в директории ххххх.000 на флешке. Данные файлы входят в состав криптоконтейнера..." /> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@habrahabr" /> <meta property="al:android:url" content="habrahabr://post/275039" /> <meta property="al:android:app_name" content="Habrahabr" /> <meta property="al:android:package" content="ru.habrahabr" /> <meta property="al:windows_phone:url" content="habrahabr://post/275039" /> <meta property="al:windows_phone:app_name" content="Habrahabr" /> <meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060" /> <link rel="canonical" href="https://habrahabr.ru/post/275039/" /> <link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.habrahabr.ru/post/275039/" /> <meta name="yandex-verification" content="71593b225aeafc4e" /> <meta name="referrer" content="unsafe-url" /> <meta name="pocket-site-verification" content="ed24b2b9721edf0a282c5b4a3232c4" /> <style type="text/css"> @font-face{font-family:&apos;Fira Sans&apos;;font-style:normal;font-weight:400;src:url(/fonts/0/FiraSans/hg-FiraSans-Regular.eot);src:local(&quot;Fira Sans&quot;),local(&quot;FiraSans-Regular&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Regular.eot?#iefix) format(&quot;embedded-opentype&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Regular.woff2) format(&quot;woff2&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Regular.woff) format(&quot;woff&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Regular.ttf) format(&quot;truetype&quot;)}@font-face{font-family:&apos;Fira Sans&apos;;font-style:normal;font-weight:500;src:url(/fonts/0/FiraSans/hg-FiraSans-Medium.eot);src:local(&quot;Fira Sans Medium&quot;),local(&quot;FiraSans-Medium&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Medium.eot?#iefix) format(&quot;embedded-opentype&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Medium.woff2) format(&quot;woff2&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Medium.woff) format(&quot;woff&quot;),url(/fonts/0/FiraSans/hg-FiraSans-Medium.ttf) format(&quot;truetype&quot;)} </style> <link href="https://habracdn.net/habr/styles/1480084008/_build/post_common_css.css" rel="stylesheet" media="all" /> <link href="https://habracdn.net/habr/styles/1480084008/users/all.css" rel="stylesheet" media="all" /> <link href="https://habracdn.net/habr/styles/1480084008/_build/global_main.css" rel="stylesheet" media="all" /> <meta name="yandex-verification" content="67d46b975fa41645" /> <meta content="Хабрахабр" name="apple-mobile-web-app-title" /> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png" /> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png" /> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png" /> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png" /> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png" /> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png" /> <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32" /> <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16" /> <meta name="application-name" content="Хабрахабр" /> <meta name="msapplication-TileColor" content="#FFFFFF" /> <meta name="msapplication-TileImage" content="mstile-144x144.png" /> <link title="Хабрахабр / Комментарии к публикации «Читаем контейнер закрытого ключа КриптоПро средствами OpenSSL»" type="application/rss+xml" rel="alternate" href="https://habrahabr.ru/rss/post/275039/" /> <script>
  (function(){&apos;use strict&apos;;var f,g=[];function l(a){g.push(a);1==g.length&amp;&amp;f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&amp;&amp;b.then;if(null!=b&amp;&amp;&quot;object&quot;==typeof b&amp;&amp;&quot;function&quot;==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
  function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?&quot;function&quot;==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&amp;&amp;(&quot;function&quot;==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
  function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&amp;&amp;b(h)}}var e=0,h=[];0==a.length&amp;&amp;b(h);for(var k=0;k&lt;a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d&lt;a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype[&quot;catch&quot;]=n.prototype.g);}());

  (function(){function l(a,b){document.addEventListener?a.addEventListener(&quot;scroll&quot;,b,!1):a.attachEvent(&quot;scroll&quot;,b)}function m(a){document.body?a():document.addEventListener?document.addEventListener(&quot;DOMContentLoaded&quot;,function c(){document.removeEventListener(&quot;DOMContentLoaded&quot;,c);a()}):document.attachEvent(&quot;onreadystatechange&quot;,function k(){if(&quot;interactive&quot;==document.readyState||&quot;complete&quot;==document.readyState)document.detachEvent(&quot;onreadystatechange&quot;,k),a()})};function q(a){this.a=document.createElement(&quot;div&quot;);this.a.setAttribute(&quot;aria-hidden&quot;,&quot;true&quot;);this.a.appendChild(document.createTextNode(a));this.b=document.createElement(&quot;span&quot;);this.c=document.createElement(&quot;span&quot;);this.h=document.createElement(&quot;span&quot;);this.f=document.createElement(&quot;span&quot;);this.g=-1;this.b.style.cssText=&quot;max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;&quot;;this.c.style.cssText=&quot;max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;&quot;;
  this.f.style.cssText=&quot;max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;&quot;;this.h.style.cssText=&quot;display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;&quot;;this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
  function w(a,b){a.a.style.cssText=&quot;max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:&quot;+b+&quot;;&quot;}function x(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+&quot;px&quot;;a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;x(a)&amp;&amp;null!==a.a.parentNode&amp;&amp;b(a.g)}var k=a;l(a.b,c);l(a.c,c);x(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||&quot;normal&quot;;this.weight=c.weight||&quot;normal&quot;;this.stretch=c.stretch||&quot;normal&quot;}var B=null,C=null,D=null;function H(){if(null===C){var a=document.createElement(&quot;div&quot;);try{a.style.font=&quot;condensed 100px sans-serif&quot;}catch(b){}C=&quot;&quot;!==a.style.font}return C}function I(a,b){return[a.style,a.weight,H()?a.stretch:&quot;&quot;,&quot;100px&quot;,b].join(&quot; &quot;)}
  A.prototype.load=function(a,b){var c=this,k=a||&quot;BESbswy&quot;,y=b||3E3,E=(new Date).getTime();return new Promise(function(a,b){null===D&amp;&amp;(D=!!document.fonts);if(D){var J=new Promise(function(a,b){function e(){(new Date).getTime()-E&gt;=y?b():document.fonts.load(I(c,&apos;&quot;&apos;+c.family+&apos;&quot;&apos;),k).then(function(c){1&lt;=c.length?a():setTimeout(e,25)},function(){b()})}e()}),K=new Promise(function(a,c){setTimeout(c,y)});Promise.race([K,J]).then(function(){a(c)},function(){b(c)})}else m(function(){function r(){var b;if(b=
  -1!=f&amp;&amp;-1!=g||-1!=f&amp;&amp;-1!=h||-1!=g&amp;&amp;-1!=h)(b=f!=g&amp;&amp;f!=h&amp;&amp;g!=h)||(null===B&amp;&amp;(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&amp;&amp;(536&gt;parseInt(b[1],10)||536===parseInt(b[1],10)&amp;&amp;11&gt;=parseInt(b[2],10))),b=B&amp;&amp;(f==t&amp;&amp;g==t&amp;&amp;h==t||f==u&amp;&amp;g==u&amp;&amp;h==u||f==v&amp;&amp;g==v&amp;&amp;h==v)),b=!b;b&amp;&amp;(null!==d.parentNode&amp;&amp;d.parentNode.removeChild(d),clearTimeout(G),a(c))}function F(){if((new Date).getTime()-E&gt;=y)null!==d.parentNode&amp;&amp;d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||
  void 0===a)f=e.a.offsetWidth,g=n.a.offsetWidth,h=p.a.offsetWidth,r();G=setTimeout(F,50)}}var e=new q(k),n=new q(k),p=new q(k),f=-1,g=-1,h=-1,t=-1,u=-1,v=-1,d=document.createElement(&quot;div&quot;),G=0;d.dir=&quot;ltr&quot;;w(e,I(c,&quot;sans-serif&quot;));w(n,I(c,&quot;serif&quot;));w(p,I(c,&quot;monospace&quot;));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);t=e.a.offsetWidth;u=n.a.offsetWidth;v=p.a.offsetWidth;F();z(e,function(a){f=a;r()});w(e,I(c,&apos;&quot;&apos;+c.family+&apos;&quot;,sans-serif&apos;));z(n,function(a){g=a;r()});
  w(n,I(c,&apos;&quot;&apos;+c.family+&apos;&quot;,serif&apos;));z(p,function(a){h=a;r()});w(p,I(c,&apos;&quot;&apos;+c.family+&apos;&quot;,monospace&apos;))})})};&quot;undefined&quot;!==typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

  (function( w ){
    if( w.document.documentElement.className.indexOf( &quot;fonts-loaded&quot; ) &gt; -1 ){ return; }

    var html = document.documentElement;
    var FS400 = new w.FontFaceObserver(&quot;Fira Sans&quot;, { weight: 400 });
    var FS500 = new w.FontFaceObserver(&quot;Fira Sans&quot;, { weight: 500 });

    Promise.all([ FS400.check, FS500.check ]).then(function() {
      html.classList.add(&apos;fonts-loaded&apos;);
      sessionStorage.fontsLoaded = true;
      console.log(&apos;fonts-loaded&apos;);
    }).catch(function () {
      sessionStorage.fontsLoaded = false;
      console.log(&apos;fonts-unloaded&apos;);
    });

    if (sessionStorage.fontsLoaded) {
      html.classList.add(&apos;fonts-loaded&apos;);
    }
  }(this));
</script> <script src="https://habracdn.net/habr/javascripts/1480084008/libs/jquery-1.8.3.min.js" /> <script>var N = 5; var ar_duo1 = Math.floor(Math.random()*N+1);</script> <script type="text/javascript" src="https://habracdn.net/habr/javascripts/1480084008/libs/adriver.core.2.js" /> <script src="https://habracdn.net/habr/javascripts/1480084008/_parts/advertising.js" /> <script type="text/javascript">
  if (typeof adriver == &apos;undefined&apos;){ var adb1 = &apos;yes&apos;;}

    var user_type = &apos;guest&apos;;

  var page_type = &quot;publish_ugc&quot;;

  (function(i,s,o,g,r,a,m){i[&apos;GoogleAnalyticsObject&apos;]=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,&apos;script&apos;,&apos;//www.google-analytics.com/analytics.js&apos;,&apos;ga&apos;);

  ga(&apos;create&apos;, &apos;UA-726094-1&apos;,  &apos;auto&apos;);
  ga(&apos;create&apos;, &apos;UA-726094-24&apos;, &apos;auto&apos;, {&apos;name&apos;: &apos;HGM&apos;});

  ga(&apos;require&apos;, &apos;displayfeatures&apos;);
  ga(&apos;set&apos;, &apos;dimension1&apos;, user_type); // user type - guest/readonly/habrauser


  ga(&apos;set&apos;, &apos;dimension4&apos;, adb1);

  ga(&apos;set&apos;, &apos;dimension5&apos;, page_type);


   (function() {
     var win = window;
     var removeUtms = function(){
       var location = win.location;
       if (location.search.indexOf(&apos;utm_&apos;) != -1 &amp;&amp; history.replaceState) {
         history.replaceState({}, &apos;&apos;, window.location.toString().replace(/(\&amp;|\?)utm([_a-z0-9=]+)/g, &quot;&quot;));
       }
     };
     ga(&apos;send&apos;, &apos;pageview&apos;, { &apos;hitCallback&apos;: removeUtms });
   })();

  ga(&apos;HGM.set&apos;, &apos;dimension1&apos;, user_type);
  ga(&apos;HGM.set&apos;, &apos;dimension2&apos;, &quot;habrahabr&quot;);
  ga(&apos;HGM.send&apos;, &apos;pageview&apos;);
</script> <script>
  var adcm_config ={
    id:1034,
    platformId: 34,
    
    tags: [&apos;hub_crypto&apos;, &apos;g_computer_security&apos;],
    init: function () {
      window.adcm.call();
    }
  };
</script> <script src="https://tag.digitaltarget.ru/adcm.js" async /> </head> <body class="nl"> <div class="layout"> <div id="TMpanel"> <div class="container"> <div class="bmenu"> <a href="https://tmfeed.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">TM Feed</a> <a href="https://habrahabr.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo" class="current">Хабрахабр</a> <a href="https://geektimes.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Geektimes</a> <a href="https://toster.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Тостер</a> <a href="https://moikrug.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Мой круг</a> <a href="https://freelansim.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Фрилансим</a> </div> <div class="bmenu_inner" style="display:inline-block!important;visibility:visible!important;"> <span class="bmenu__label">Спецпроекты:</span> <span class="bmenu slink" /> <span id="adriver_banner_465568687" /> </div> </div> </div> <div class="layout__navbar"> <div class="main-navbar"> <div class="main-navbar__section main-navbar__section_left" data-style="display: flex;"> <a href="/" class="logo"> <svg class="icon-svg icon-svg_logo-habrahabr" width="100%" height="100%" viewBox="0 0 181 32" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><title>Хабрахабр</title><path d="M24.736 1.044h-8.582L12.53 6.168 8.91 1.044H.325l7.898 11.194L0 23.888h8.583l3.948-5.58 3.95 5.58h8.583l-8.256-11.65zM34.033 7.082c-3.133 0-6.036.88-8.256 2.61l2.87 3.428c1.502-.98 3.754-1.535 5.255-1.535 1.372 0 2.577.36 2.577 2.09v.49c-6.56 0-11.096 1.142-11.096 5.58 0 3.133 2.252 4.633 5.71 4.633 1.665 0 3.885-.913 5.386-2.61v2.12h6.07V12.696c0-4.765-4.73-5.613-8.516-5.613zm2.448 11.455c-.912 1.21-1.89 1.73-2.773 1.73-1.24 0-1.6-.654-1.6-1.274 0-1.533 1.96-2.087 4.373-2.087v1.63zM53.937 8.746c-1.47 0-3.818.62-4.863 1.894.294-2.448 2.023-3.655 5.32-4.308 1.534-.294 5.155-.98 7.18-1.402L60.463 0c-2.546.62-4.864 1.143-7.508 1.633-6.657 1.24-8.125 5.156-8.125 12.14 0 6.658 2.743 10.608 8.813 10.608 5.188 0 8.615-3.426 8.615-8.517 0-3.983-2.87-7.116-8.32-7.116zm-.39 10.28c-1.437 0-2.644-1.24-2.644-2.675s1.207-2.675 2.643-2.675c1.436 0 2.643 1.24 2.643 2.676s-1.208 2.677-2.644 2.677zM74.82 7.082c-1.664 0-3.46 1.044-4.21 2.61v-2.12h-6.07v22.974h6.07v-8.778c.752 1.567 2.546 2.61 4.21 2.61 4.765 0 7.343-3.883 7.343-8.648 0-4.764-2.577-8.647-7.343-8.647zm-1.957 11.552c-.88 0-1.697-.423-2.252-1.108v-3.622c.555-.653 1.373-1.076 2.253-1.076 1.567 0 2.905 1.273 2.905 2.905 0 1.564-1.338 2.902-2.905 2.902zM92.767 7.082c-3.133 0-6.038.88-8.256 2.61l2.872 3.428c1.5-.98 3.753-1.535 5.254-1.535 1.372 0 2.58.36 2.58 2.09v.49c-6.56 0-11.098 1.142-11.098 5.58 0 3.133 2.252 4.633 5.71 4.633 1.665 0 3.885-.913 5.387-2.61v2.12h6.068V12.696c0-4.765-4.732-5.613-8.516-5.613zm2.448 11.455c-.915 1.21-1.894 1.73-2.775 1.73-1.24 0-1.6-.654-1.6-1.274 0-1.533 1.96-2.087 4.375-2.087v1.63zM122.723 7.57h-7.703l-2.055 4.276-2.057-4.275h-7.7l5.58 7.997-5.874 8.32h7.702l2.35-4.306 2.35 4.308h7.702l-6.528-8.32zM132.967 7.082c-3.133 0-6.038.88-8.257 2.61l2.873 3.428c1.503-.98 3.753-1.535 5.255-1.535 1.37 0 2.58.36 2.58 2.09v.49c-6.56 0-11.098 1.142-11.098 5.58 0 3.133 2.252 4.633 5.71 4.633 1.665 0 3.885-.913 5.386-2.61v2.12h6.068V12.696c0-4.765-4.732-5.613-8.516-5.613zm2.448 11.455c-.913 1.21-1.894 1.73-2.775 1.73-1.24 0-1.6-.654-1.6-1.274 0-1.533 1.96-2.087 4.375-2.087v1.63zM152.87 8.746c-1.468 0-3.817.62-4.862 1.894.294-2.448 2.023-3.655 5.32-4.308 1.536-.294 5.157-.98 7.18-1.402L159.397 0c-2.546.62-4.864 1.143-7.506 1.633-6.657 1.24-8.125 5.156-8.125 12.14 0 6.658 2.742 10.608 8.81 10.608 5.19 0 8.617-3.426 8.617-8.517 0-3.983-2.873-7.116-8.323-7.116zm-.39 10.28c-1.437 0-2.643-1.24-2.643-2.675s1.206-2.675 2.643-2.675c1.436 0 2.643 1.24 2.643 2.676 0 1.437-1.207 2.677-2.643 2.677zM173.754 7.082c-1.664 0-3.46 1.044-4.21 2.61v-2.12h-6.07v22.974h6.07v-8.778c.75 1.567 2.546 2.61 4.21 2.61 4.764 0 7.343-3.883 7.343-8.648 0-4.764-2.58-8.647-7.343-8.647zm-1.958 11.552c-.88 0-1.697-.423-2.252-1.108v-3.622c.554-.653 1.37-1.076 2.252-1.076 1.565 0 2.905 1.273 2.905 2.905 0 1.564-1.34 2.902-2.904 2.902z" /></svg> </a> <ul class="nav-links" id="navbar-links"> <li class="nav-links__item"> <a href="/" class="nav-links__item-link ">Публикации</a> </li> <li class="nav-links__item"> <a href="/hubs/" class="nav-links__item-link ">Хабы</a> </li> <li class="nav-links__item"> <a href="/companies/" class="nav-links__item-link ">Компании</a> </li> <li class="nav-links__item"> <a href="/users/" class="nav-links__item-link ">Пользователи</a> </li> <li class="nav-links__item"> <a href="/sandbox/" class="nav-links__item-link ">Песочница</a> </li> </ul> <form action="/search/#h" method="get" class="search-form" id="search-form">  <button type="button" class="btn btn_navbar_search" id="search-form-btn"> <svg class="icon-svg icon-svg_navbar-search" width="100%" height="100%" viewBox="0 0 32 32" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><title>Поиск</title><path d="M21.416 13.21c0 4.6-3.65 8.34-8.14 8.34S5.11 17.81 5.11 13.21c0-4.632 3.65-8.373 8.167-8.373 4.488 0 8.14 3.772 8.14 8.372zm1.945 7.083c1.407-2.055 2.155-4.57 2.155-7.084C25.515 6.277 20.04.665 13.277.665S1.04 6.278 1.04 13.21c0 6.93 5.475 12.542 12.237 12.542 2.454 0 4.907-.797 6.942-2.208l7.6 7.79 3.14-3.22-7.6-7.82z" /></svg> </button> <label class="search-form__field-wrapper"> <input type="text" name="q" class="search-form__field" id="search-form-field" placeholder="Поиск" tabindex="-1" /> <button type="button" class="btn btn_search-clear" id="search-form-clear"> <svg class="icon-svg icon-svg_navbar-close-search" width="12" height="12" viewBox="0 0 31 32" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><title>search cancel</title><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z" /></svg> </button> </label> </form> </div> <div class="main-navbar__section main-navbar__section_right" data-style="display: flex;"> <a href="https://habrahabr.ru/auth/login/" id="login" class="btn btn_x-large btn_navbar_login">Войти</a> <a href="https://habrahabr.ru/auth/register/" class="btn btn_x-large btn_navbar_registration">Регистрация</a> </div> </div> </div> <div class="layout__base"> <div class="profile-header js-user_1165228"> <div class="profile-header__summary author-info author-info_profile "> <a href="/users/shukan/" class="author-info__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'shukan');}"> <img src="//habrastorage.org/getpro/habr/avatars/d2f/3e5/58f/d2f3e558fa0156c892b836f061ecaca7.png" class="author-info__image-pic" /> </a> <div class="author-info__desc"> <div class="author-info__username"> <a href="/users/shukan/" class="author-info__name" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'shukan');}">Михаил Куликов</a> <a href="/users/shukan/" class="author-info__nickname" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'shukan');}">@shukan</a> </div> <div class="author-info__specialization"> Пользователь </div> </div> </div> <div class="profile-header__stats"> <div class="karma__widjet voting-wjt voting-wjt_user-profile js-karma  "> <div class="voting-wjt__counter js-karma-mark voting-wjt__counter_positive " title="26 голосов"> <div class="voting-wjt__counter-score js-karma_num">22,0</div> <div class="voting-wjt__label">карма</div> </div> </div> <div class="statistic statistic_user-rating" title="Рейтинг пользователя"> <div class="statistic__value statistic__value_magenta">0,0</div> <div class="statistic__label">рейтинг</div> </div> </div> </div> <div class="content_wrapper column-wrapper_content"> <div class="column-wrapper js-sticky-wrapper"> <div class="content_left js-content_left"> <div class="tabs"> <ul class="tabs-menu tabs-menu_habrahabr"> <li class="tabs-menu__item tabs-menu__item_user-profile tabs-menu__item_inline"> <a href="https://habrahabr.ru/users/shukan/" class="tab-item tab-item_stacked "> <span class="tab-item__value stats"> <span class="stats__counters stats__counters_big"> <strong class="counter" /> </span> <span class="stats__value">Профиль</span> </span></a> </li> <li class="tabs-menu__item tabs-menu__item_user-profile tabs-menu__item_inline"> <a href="https://habrahabr.ru/users/shukan/topics/" class="tab-item tab-item_stacked tab-item_current"> <span class="tab-item__value stats"> <span class="stats__counters stats__counters_big"> <strong class="counter">1</strong> </span> <span class="stats__value">Публикации</span> </span></a> </li> <li class="tabs-menu__item tabs-menu__item_user-profile tabs-menu__item_inline"> <a href="https://habrahabr.ru/users/shukan/comments/" class="tab-item tab-item_stacked "> <span class="tab-item__value stats"> <span class="stats__counters stats__counters_big"> <strong class="counter">6</strong> </span> <span class="stats__value">Комментарии</span> </span></a> </li> <li class="tabs-menu__item tabs-menu__item_user-profile tabs-menu__item_inline"> <a href="https://habrahabr.ru/users/shukan/favorites/" class="tab-item tab-item_stacked "> <span class="tab-item__value stats"> <span class="stats__counters stats__counters_big"> <strong class="counter">123</strong> </span> <span class="stats__value">Избранное</span> </span></a> </li> <li class="tabs-menu__item tabs-menu__item_user-profile tabs-menu__item_inline"> <a href="https://habrahabr.ru/users/shukan/subscription/followers/" class="tab-item tab-item_stacked "> <span class="tab-item__value stats"> <span class="stats__counters stats__counters_big"> <strong class="counter">3</strong> </span> <span class="stats__value">Подписчики</span> </span></a> </li> </ul> </div> <div class="post_show"> <div class="post post_full" id="post_275039"> <div class="post__header"> <span class="post__time_published">15 января в 21:41</span> <h1 class="post__title"> <a href="https://habrahabr.ru/flows/develop/" class="post__flow" onclick="if (typeof ga === 'function') { ga('send', 'event', 'flow', 'post page', 'Разработка'); }">Разработка</a><span class="post__title-arrow"> →</span> <span>Читаем контейнер закрытого ключа КриптоПро средствами OpenSSL</span> </h1> <div class="hubs"> <a href="https://habrahabr.ru/hub/crypto/" class="hub " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Криптография'); }">Криптография</a><span class="profiled_hub" title="Профильный хаб">*</span> </div> </div> <div class="post__body post__body_full"> <div class="content html_format">Речь пойдет о файлах primary.key, masks.key и header.key, которые лежат в директории ххххх.000 на флешке. Данные файлы входят в состав криптоконтейнера закрытого ключа электронной подписи криптопровайдера КриптоПро, формат которого нигде не опубликован. Целью данной статьи является чтение контейнера и преобразование закрытого ключа в формат, который может быть прочитан в библиотеке OpenSSL. Долгое время было распространено ошибочное суждение, что достаточно сделать нечто вида (primary_key XOR masks_key) и мы получим закрытый ключ в чистом (raw) виде, однако забегая вперед, можно утверждать, что в КриптоПро было применено более сложное преобразование, в худшем случае состоящее из более чем 2000 (двух тысяч) операций хеширования.<br /> <br /> Стоит упомянуть о существовании утилиты <a href="http://soft.lissi.ru/downloads/">P12FromGostCSP</a> которая позволяет конвертировать ключ в формат P12, доступный для работы с OpenSSL, но утилита имеет следующие существенные недостатки: <br /> <ul> <li>Читает контейнер не напрямую, а через криптопровайдер, поэтому там, где кроме OpenSSL ничего нет, не работает.</li> <li>Если в свойствах ключа не отмечено, что ключ «экспортируемый», то конвертировать его невозможно.</li> <li>В демо версии не формирует файл с ключом, эта возможность присутствует только в платной версии.</li> </ul><br /> <h1>Файл primary.key</h1><br /> Содержит 32 байта ключа в формате Asn1. Это только половина ключа, полный ключ получается при делении этого числа по модулю Q на маску. Поле, хранящее модуль Q в библиотеке OpenSSL имеет название order. Маска лежит в файле masks.key:<br /> <br /> <img alt="primary.key" src="https://habrastorage.org/files/0aa/ee2/1ef/0aaee21ef1774fd790b79cdaa1aa6bf3.png" /><br /> <a name="habracut" /><br /> <h1>Файл masks.key</h1><br /> Содержит 32 байта маски ключа в формате Asn1, зашифрованного на ключе хранения pwd_key. Далее 12 байт «затравочной» информации для генерации ключа хранения pwd_key, если криптоконтейнер защищен паролем, то пароль также участвует в генерации ключа хранения. <br /> <br /> Далее контрольная сумма (имитозащита) 4 байта. Контрольной информацией для простоты мы пользоваться не будем, общий контроль будет осуществляться путем генерации открытого ключа и сравнения первых 8 байт полученного ключа с соответствующим полем из файла header.key:<br /> <br /> <img alt="masks.key" src="https://habrastorage.org/files/675/6dc/117/6756dc11714849d6a26ffdca792675bd.png" /><br /> <br /> <h1>Файл header.key</h1><br /> Из этого файла нам потребуется параметры электронной подписи CryptoProParamSet (подчеркнуто красным).<br /> <ul> <li>GostR3410_2001_CryptoPro_A_ParamSet — 1.2.643.2.2.35.1</li> <li>GostR3410_2001_CryptoPro_B_ParamSet — 1.2.643.2.2.35.2</li> <li>GostR3410_2001_CryptoPro_C_ParamSet — 1.2.643.2.2.35.3</li> <li>GostR3410_2001_CryptoPro_XchA_ParamSet — 1.2.643.2.2.36.0</li> <li>GostR3410_2001_CryptoPro_XchB_ParamSet — 1.2.643.2.2.36.1</li> </ul><br /> А также первые 8 байт открытого ключа (подчеркнуто) для контроля правильности чтения закрытого.<br /> <br /> <img alt="header.key" src="https://habrastorage.org/files/bbb/049/353/bbb049353e3048fd84751d45cdcdfc84.png" /><br /> <br /> <h1>Читаем закрытый ключ и конвертируем</h1><br /> <div class="spoiler"><b class="spoiler_title">Файл privkey.c</b><div class="spoiler_text"><pre><code class="cpp">#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;openssl/pem.h&gt; #include &lt;openssl/cms.h&gt; #include &lt;openssl/err.h&gt; #include &quot;gost_lcl.h&quot; /* Convert little-endian byte array into bignum */ BIGNUM *reverse32bn(char *b, BN_CTX *ctx) { BIGNUM *res; char buf[32]; BUF_reverse(buf, b, 32); res = BN_bin2bn(buf, 32, BN_CTX_get(ctx)); OPENSSL_cleanse(buf, sizeof(buf)); return res; } void xor_material(char *buf36, char *buf5C, char *src) { int i; for(i = 0; i &lt; 32; i++) { buf36[i] = src[i] ^ 0x36; buf5C[i] = src[i] ^ 0x5C; } } int make_pwd_key(char *result_key, char *start12, int start12_len, char *passw) { int result; int i; char pincode4[1024]; int pin_len; char current[32]; char material36[32]; char material5C[32]; char hash_result[32]; gost_hash_ctx ctx; init_gost_hash_ctx(&amp;ctx, &amp;GostR3411_94_CryptoProParamSet); memset(pincode4, 0, sizeof(pincode4)); pin_len = strlen(passw); if (pin_len*4 &gt; sizeof(pincode4)) { result = 1; goto err; } for(i = 0; i &lt; pin_len; i++) pincode4[i*4] = passw[i]; start_hash(&amp;ctx); hash_block(&amp;ctx, start12, start12_len); if (pin_len) hash_block(&amp;ctx, pincode4, pin_len * 4); finish_hash(&amp;ctx, hash_result); memcpy(current, (char*)&quot;DENEFH028.760246785.IUEFHWUIO.EF&quot;, 32); for(i = 0; i &lt; (pin_len?2000:2); i++) { xor_material(material36, material5C, current); start_hash(&amp;ctx); hash_block(&amp;ctx, material36, 32); hash_block(&amp;ctx, hash_result, 32); hash_block(&amp;ctx, material5C, 32); hash_block(&amp;ctx, hash_result, 32); finish_hash(&amp;ctx, current); } xor_material(material36, material5C, current); start_hash(&amp;ctx); hash_block(&amp;ctx, material36, 32); hash_block(&amp;ctx, start12, start12_len); hash_block(&amp;ctx, material5C, 32); if (pin_len) hash_block(&amp;ctx, pincode4, pin_len * 4); finish_hash(&amp;ctx, current); start_hash(&amp;ctx); hash_block(&amp;ctx, current, 32); finish_hash(&amp;ctx, result_key); result = 0; //ok err: return result; } BIGNUM *decode_primary_key(char *pwd_key, char *primary_key, BN_CTX *bn_ctx) { BIGNUM *res; char buf[32]; gost_ctx ctx; gost_init(&amp;ctx, gost_cipher_list-&gt;sblock); gost_key(&amp;ctx, pwd_key); gost_dec(&amp;ctx, primary_key, buf, 4); res = reverse32bn(buf, bn_ctx); OPENSSL_cleanse(buf, sizeof(buf)); return res; } BIGNUM *remove_mask_and_check_public(char *oid_param_set8, BIGNUM *key_with_mask, BIGNUM *mask, char *public8, BN_CTX *ctx) { int result; EC_KEY *eckey = NULL; const EC_POINT *pubkey; const EC_GROUP *group; BIGNUM *X, *Y, *order, *raw_secret, *mask_inv; char outbuf[32], public_X[32]; ASN1_OBJECT *obj; int nid; order = BN_CTX_get(ctx); mask_inv = BN_CTX_get(ctx); raw_secret = BN_CTX_get(ctx); X = BN_CTX_get(ctx); Y = BN_CTX_get(ctx); if (!order || !mask_inv || !raw_secret || !X || !Y) { result = 1; goto err; } obj = ASN1_OBJECT_create(0, oid_param_set8+1, *oid_param_set8, NULL, NULL); nid = OBJ_obj2nid(obj); ASN1_OBJECT_free(obj); if (!(eckey = EC_KEY_new())) { result = 1; goto err; } if (!fill_GOST2001_params(eckey, nid)) { result = 1; goto err; } if (!(group = EC_KEY_get0_group(eckey))) { result = 1; goto err; } if (!EC_GROUP_get_order(group, order, ctx)) { result = 1; goto err; } if (!BN_mod_inverse(mask_inv, mask, order, ctx)) { result = 1; goto err; } if (!BN_mod_mul(raw_secret, key_with_mask, mask_inv, order, ctx)) { result = 1; goto err; } if (!EC_KEY_set_private_key(eckey, raw_secret)) { result = 1; goto err; } if (!gost2001_compute_public(eckey)) { result = 1; goto err; } if (!(pubkey = EC_KEY_get0_public_key(eckey))) { result = 1; goto err; } if (!EC_POINT_get_affine_coordinates_GFp(group, pubkey, X, Y, ctx)) { result = 1; goto err; } store_bignum(X, outbuf, sizeof(outbuf)); BUF_reverse(public_X, outbuf, sizeof(outbuf)); if (memcmp(public_X, public8, 8) != 0) { result = 1; goto err; } result = 0; //ok err: if (eckey) EC_KEY_free(eckey); if (result == 0) return raw_secret; return NULL; } int file_length(char *fname) { int len; FILE *f = fopen(fname, &quot;rb&quot;); if (f == NULL) return -1; fseek(f, 0, SEEK_END); len = ftell(f); fclose(f); return len; } int read_file(char *fname, int start_pos, char *buf, int len) { int read_len; FILE *f = fopen(fname, &quot;rb&quot;); if (f == NULL) return 1; if (start_pos) fseek(f, start_pos, SEEK_SET); read_len = fread(buf, 1, len, f); fclose(f); if (read_len != len) return 1; return 0; //ok } int get_asn1_len(unsigned char *buf, int *size_hdr) { int n, i, res; int pos = 0; if ((buf[pos]&amp;0x80) == 0) { *size_hdr = 1; return buf[pos]; } n = buf[pos++]&amp;0x7f; res = 0; for(i = 0; i &lt; n; i++) { res = res*256 + buf[pos++]; } *size_hdr = n+1; return res; } #define MAX_HEADER 20000 int read_container(char *fpath, int flag2, char *salt12, char *primary_key, char *masks_key, char *public8, char *oid_param_set8) { int result; char primary_path[1024+30]; char masks_path[1024+30]; char header_path[1024+30]; char header_buf[MAX_HEADER]; int header_len; int i, len, pos, size_hdr; if (strlen(fpath)&gt;1024) { result = 1; goto err; } sprintf(header_path, &quot;%s/header.key&quot;, fpath); if (flag2 == 0) { sprintf(primary_path, &quot;%s/primary.key&quot;, fpath); sprintf(masks_path, &quot;%s/masks.key&quot;, fpath); } else { sprintf(primary_path, &quot;%s/primary2.key&quot;, fpath); sprintf(masks_path, &quot;%s/masks2.key&quot;, fpath); } if (read_file(primary_path, 4, primary_key, 32)) { result = 1; goto err; } if (read_file(masks_path, 4, masks_key, 32)) { result = 1; goto err; } if (read_file(masks_path, 0x26, salt12, 12)) { result = 1; goto err; } header_len = file_length(header_path); if (header_len &lt; 0x42 || header_len &gt; MAX_HEADER) { result = 1; goto err; } if (read_file(header_path, 0, header_buf, header_len)) { result = 1; goto err; } //------------- skip certificate --------------------------- pos = 0; for(i = 0; i &lt; 2; i++) { get_asn1_len(header_buf+pos+1, &amp;size_hdr); pos += size_hdr+1; if (pos &gt; header_len-8) { result = 2; goto err; } } //------------------ get oid_param_set8 ----------------------- #define PARAM_SET_POS 34 if (memcmp(header_buf+pos+PARAM_SET_POS, &quot;\x6\x7&quot;, 2) != 0) { result = 2; goto err; } memcpy(oid_param_set8, header_buf+pos+PARAM_SET_POS+1, 8); //------------------ get public8 ----------------------- result = 2; //not found pos += 52; for(i = 0; i &lt; 3; i++) { len = get_asn1_len(header_buf+pos+1, &amp;size_hdr); if (len == 8 &amp;&amp; memcmp(header_buf+pos, &quot;\x8a\x8&quot;, 2) == 0) { memcpy(public8,header_buf+pos+2,8); result = 0; //ok break; } pos += len+size_hdr+1; if (pos &gt; header_len-8) { result = 2; goto err; } } err: OPENSSL_cleanse(header_buf, sizeof(header_buf)); return result; } #define START_OID 0x12 #define START_KEY 0x28 unsigned char asn1_private_key[72] = { 0x30,0x46,2,1,0,0x30,0x1c,6,6,0x2a,0x85,3,2,2,0x13,0x30,0x12,6,7,0x11, 0x11,0x11,0x11,0x11,0x11,0x11,6,7,0x2a,0x85,3,2,2,0x1e,1,4,0x23,2,0x21,0 }; int main(int argc, char **argv) { int result; char *container_path; char *passw; char salt12[12]; char primary_key[32]; char masks_key[32]; char public8[8]; char oid_param_set8[8]; BN_CTX *ctx; BIGNUM *key_with_mask; BIGNUM *mask; BIGNUM *raw_key; char pwd_key[32]; char outbuf[32]; ctx = BN_CTX_new(); if (argc == 2) { container_path = argv[1]; passw = &quot;&quot;; } else if (argc == 3) { container_path = argv[1]; passw = argv[2]; } else { printf(&quot;get_private container_path [passw]\n&quot;); result = 1; goto err; } if (read_container(container_path, 0, salt12, primary_key, masks_key, public8, oid_param_set8) != 0 &amp;&amp; read_container(container_path, 1, salt12, primary_key, masks_key, public8, oid_param_set8) != 0) { printf(&quot;can not read container from %s\n&quot;, container_path); result = 2; goto err; } make_pwd_key(pwd_key, salt12, 12, passw); key_with_mask = decode_primary_key(pwd_key, primary_key, ctx); OPENSSL_cleanse(pwd_key, sizeof(pwd_key)); mask = reverse32bn(masks_key, ctx); raw_key = remove_mask_and_check_public(oid_param_set8, key_with_mask, mask, public8, ctx); if (raw_key) { BIO *bio; store_bignum(raw_key, outbuf, sizeof(outbuf)); memcpy(asn1_private_key+START_OID, oid_param_set8, 8); memcpy(asn1_private_key+START_KEY, outbuf, 32); //bio = BIO_new_file(&quot;private.key&quot;, &quot;w&quot;); bio = BIO_new_fp(stdout, BIO_NOCLOSE | BIO_FP_TEXT); PEM_write_bio(bio, &quot;PRIVATE KEY&quot;, &quot;&quot;, asn1_private_key, sizeof(asn1_private_key)); BIO_free(bio); OPENSSL_cleanse(outbuf, sizeof(outbuf)); OPENSSL_cleanse(asn1_private_key, sizeof(asn1_private_key)); result = 0; //ok } else { printf(&quot;Error check public key\n&quot;); result = 3; } err: BN_CTX_free(ctx); OPENSSL_cleanse(salt12, sizeof(salt12)); OPENSSL_cleanse(primary_key, sizeof(primary_key)); OPENSSL_cleanse(masks_key, sizeof(masks_key)); return result; } </code></pre></div></div><br /> <br /> Небольшой комментарий.<br /> <br /> Основную работу выполняют следующие 3 функции:<br /> <br /> 1. Создаем ключ хранения исходя из 12-ти байтовой «соли» и пароля.<br /> <pre><code class="cpp">make_pwd_key(pwd_key, salt12, 12, passw); </code></pre><br /> 2. Расшифровываем основной ключ на ключе хранения.<br /> <pre><code class="cpp">key_with_mask = decode_primary_key(pwd_key, primary_key, ctx); </code></pre><br /> 3. Делим ключ с маской на маску. <br /> <pre><code class="cpp">raw_key = remove_mask_and_check_public(oid_param_set8, key_with_mask, mask, public8, ctx); </code></pre><br /> Но так как в библиотеке OpenSLL операция деления по модулю традиционно отсутствует, пользуемся операцией взятия обратного числа и умножением.<br /> <pre><code class="cpp">if (!BN_mod_inverse(mask_inv, mask, order, ctx)) { result = 1; goto err; } if (!BN_mod_mul(raw_secret, key_with_mask, mask_inv, order, ctx)) { result = 1; goto err; } </code></pre><br /> <br /> <h1>Сборка утилиты конвертирования ключа</h1><br /> Далее сборка исходников описана для Linux версии. <br /> <br /> Версию для Windows можно <a href="https://cloud.mail.ru/public/HYAi/LMK6PKgLF">скачать отсюда</a> там же есть сертификаты и закрытый ключ для тестирования, для сборки потребуется бесплатный компилятор <a href="https://downloads.embarcadero.com/free/c_builder">Borland C++ 5.5</a><br /> <br /> <h3>Компиляция OpenSSL библиотеки</h3><br /> После <a href="https://github.com/openssl/openssl">скачивания</a> и распаковки исходных текстов openssl в целевой директории выполняем команды:<br /> <br /> <pre><code class="cpp">./config make </code></pre><br /> Получаем готовую библиотеку libcrypto.a в текущей директории. <br /> Также потребуются заголовочные файлы из директорий engines/ccgost и include.<br /> <br /> <h3>Компиляция privkey.c</h3><br /> <pre><code class="cpp">gcc -o privkey -Iengines/ccgost -Iinclude privkey.c libcrypto.a -pthread -ldl </code></pre><br /> <h3>Формирование файла закрытого ключа private.key</h3><br /> <pre><code class="cpp">./privkey /mnt/usbflash/lp-9a0fe.000 </code></pre><br /> Тестовый закрытый ключ в криптоконтейнере lp-9a0fe.000, сертификат открытого ключа signer.cer и другие файлы для тестирования можно <a href="https://cloud.mail.ru/public/HYAi/LMK6PKgLF">взять отсюда</a><br /> <br /> Получаем результат работы:<br /> <pre><code class="cpp">-----BEGIN PRIVATE KEY----- MEYCAQAwHAYGKoUDAgITMBIGByqFAwICJAAGByqFAwICHgEEIwIhAKzsrv/l1Uwk uzph/LQN9mux0Jz0yaW21kOYEFv0Xyut -----END PRIVATE KEY----- </code></pre><br /> Cохраняем в private.key<br /> <br /> <h3>Пользуемся закрытым ключом private.key для подписывания файла file.txt</h3><br /> <pre><code class="cpp">openssl cms -sign -inkey private.key -in file.txt -CAfile CA.cer -signer signer.cer -engine gost -out test.sign -outform DER -noattr -binary </code></pre><br /> <h3>Проверяем подпись</h3><br /> <pre><code class="cpp">openssl cms -verify -content file.txt -in test.sign -CAfile CA.cer -signer signer.cer -engine gost -inform DER -noattr -binary </code></pre><br /> Все работает просто замечательно!<br /> <br /> Спасибо за внимание. Это была моя первая статья на хабре.</div> <div class="post__tags"> <ul class="tags icon_tag"> <li><a href="https://habrahabr.ru/search/?q=%5B%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%BF%D1%80%D0%BE%5D&target_type=posts" rel="tag">криптопро</a>, </li> <li><a href="https://habrahabr.ru/search/?q=%5B%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%BF%D1%80%D0%BE%D0%B2%D0%B0%D0%B9%D0%B4%D0%B5%D1%80%5D&target_type=posts" rel="tag">криптопровайдер</a>, </li> <li><a href="https://habrahabr.ru/search/?q=%5B%D0%B7%D0%B0%D0%BA%D1%80%D1%8B%D1%82%D1%8B%D0%B9%20%D0%BA%D0%BB%D1%8E%D1%87%5D&target_type=posts" rel="tag">закрытый ключ</a></li> </ul> </div> </div> </div> </div> </div> <div class="sidebar_right sidebar_content-area"> <div class="xyz_wrapper is_visible"> <div class="xyz_wrapper_inner" id="xyz_wrapper" style="width:100%;min-height: 250px;"> <span class="xyz_wrapper_text" id="xyz_text">Реклама помогает поддерживать и развивать наши сервисы<br /><br /><a href="/adblock/" class="xyz_wrapper_button" target="_blank">Подробнее</a></span>  <div id="adriver_banner_1096808718" style="background:#fff;width: 100%;text-align:center;" /> <script type="text/javascript">
        var keyword = &apos;&apos;;
        var custom = [];
        custom[7] = ar_duo1;

        if (typeof crtg_content !== &apos;undefined&apos; &amp;&amp; crtg_content) { keyword = crtg_content; }
         custom[1] = &apos;h_crypto&apos;;  custom[2] = &apos;f_develop&apos;; 

        if ( typeof(adriver) !== &apos;undefined&apos;){
          hidePlaceholder();
          new adriver(&quot;adriver_banner_1096808718&quot;, {sid:176776, bt:52, bn:1, custom: custom, keyword: keyword});
        }

        function hidePlaceholder(){
          document.getElementById(&apos;xyz_wrapper&apos;).style.background = &quot;white&quot;;
          document.getElementById(&apos;xyz_text&apos;).style.display = &quot;none&quot;;
        }
      </script>  </div> <a href="https://special.habrahabr.ru/advertising/" class="firskill__label">Реклама</a> </div> <div class="sidebar-block sidebar-block_top-hubs js-tophubs"> <h2 class="sidebar-block__title">Хабы</h2> <div class="sidebar-block__content"> <ul class="content-list top-hubs"> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/webdev/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Разработка веб-сайтов'); }">Разработка веб-сайтов</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/programming/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Программирование'); }">Программирование</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/gamedev/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Разработка игр'); }">Разработка игр</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/mobile_dev/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Разработка мобильных приложений'); }">Разработка мобильных приложений</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/machine_learning/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Машинное обучение'); }">Машинное обучение</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/bigdata/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Big Data'); }">Big Data</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/java/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Java'); }">Java</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/cpp/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'C++'); }">C++</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/web_testing/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Тестирование веб-сервисов'); }">Тестирование веб-сервисов</a> </li> <li class="content-list__item top-hubs__item"> <a href="https://habrahabr.ru/hub/qt_software/" class="content-list__item-link top-hubs__item-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'Qt'); }">Qt</a> </li> </ul> </div> <div class="sidebar-block__footer"> <a href="/flows/develop/hubs/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'hubs', 'all_hubs'); }">Все хабы</a> </div> </div> <div class="js-ad_sticky"><div class="xyz_wrapper"> <div class="xyz_wrapper_inner"> <span class="xyz_wrapper_text">Реклама помогает поддерживать и развивать наши сервисы<br /><br /><a href="/adblock/" class="xyz_wrapper_button" target="_blank">Подробнее</a></span>  <div id="yandex_rtb_R-A-149298-19" style="background: #fff;" /> <script type="text/javascript">
        (function(w, d, n, s, t) {
            w[n] = w[n] || [];
            w[n].push(function() {
                Ya.Context.AdvManager.render({
                    blockId: &quot;R-A-149298-19&quot;,
                    renderTo: &quot;yandex_rtb_R-A-149298-19&quot;,
                    async: true
                });
            });
            t = d.getElementsByTagName(&quot;script&quot;)[0];
            s = d.createElement(&quot;script&quot;);
            s.type = &quot;text/javascript&quot;;
            s.src = &quot;//an.yandex.ru/system/context.js&quot;;
            s.async = true;
            t.parentNode.insertBefore(s, t);
        })(this, this.document, &quot;yandexContextAsyncCallbacks&quot;);
    </script> </div> <a href="https://special.habrahabr.ru/advertising/" class="firskill__label">Реклама</a> </div> </div> </div> </div> <div class="column-wrapper"> <div class="content_left indented"> <div class="post-additionals"> <div class="infopanel_wrapper js-user_1165228"> <ul class="postinfo-panel postinfo-panel_post" id="infopanel_post_275039"> <li class="postinfo-panel__item"> <div class="voting-wjt voting-wjt_infopanel js-voting  "> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи."> <span>↑</span> </button> <div class="voting-wjt__counter voting-wjt__counter_positive  js-mark"> <span class="voting-wjt__counter-score js-score" title="Общий рейтинг 58: ↑56 и ↓2">+54</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи."> <span>↓</span> </button> </div> </li> <li class="postinfo-panel__item"> <div class="views-count_post" title="Просмотры публикации">19,5k</div> </li> <li class="postinfo-panel__item"> <div class="favorite-wjt favorite"> <button type="button" disabled class="favorite-wjt__button favorite-wjt__button_disabled" onclick="return false;" title="Только зарегистрированные пользователи могут добавлять публикации в избранное"> <span>Добавить в избранное</span> </button> <span class="favorite-wjt__counter js-favs_count" title="Количество пользователей, добавивших публикацию в избранное">224</span> </div> </li> <li class="postinfo-panel__item postinfo-panel__item_align-right">  <ul class="post-share"> <li class="post-share__item"> <a href="https://twitter.com/intent/tweet?text=%D0%A7%D0%B8%D1%82%D0%B0%D0%B5%D0%BC+%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80+%D0%B7%D0%B0%D0%BA%D1%80%D1%8B%D1%82%D0%BE%D0%B3%D0%BE+%D0%BA%D0%BB%D1%8E%D1%87%D0%B0+%D0%9A%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%9F%D1%80%D0%BE+%D1%81%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B2%D0%B0%D0%BC%D0%B8+OpenSSL+https://habr.ru/p/275039/+via+%40habrahabr+%23habr" class="post-share__item-link twitter" onclick="window.open(this.href, 'Опубликовать ссылку  в Twitter', 'width=800,height=300,resizable=yes,toolbar=0,status=0'); return false" title="Опубликовать ссылку в Twitter" /> </li> <li class="post-share__item"> <a href="https://vk.com/share.php?url=https://habrahabr.ru/post/275039/" class="post-share__item-link vkontakte" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, 'Опубликовать ссылку во Вконтакте', 'width=800,height=300,toolbar=0,status=0'); return false" /> </li> <li class="post-share__item"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://habrahabr.ru/post/275039/" class="post-share__item-link facebook" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, 'Опубликовать ссылку в Facebook', 'width=640,height=436,toolbar=0,status=0'); return false" /> </li> <li class="post-share__item"> <a href="https://getpocket.com/edit?url=https://habrahabr.ru/post/275039/&title=Читаем контейнер закрытого ключа КриптоПро средствами OpenSSL" target="_blank" class="post-share__item-link pocket" title="Добавить ссылку в Pocket" /> </li> </ul> </li> </ul> </div> <form action="/conversations/shukan/" method="GET" class="form form_admin-causes hidden" id="admin_causes"> <input type="hidden" name="moderation" value="275039" /> <fieldset class="form__fieldset form__fieldset_admin-causes"> <legend class="form__legend">Выберите рекомендации для отправки автору:</legend> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="1" /> <span class="form__label-text">Указан только блог</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="2" /> <span class="form__label-text">Орфографические ошибки</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="3" /> <span class="form__label-text">Пунктуационные ошибки</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="4" /> <span class="form__label-text">Отступы</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="5" /> <span class="form__label-text">Текст-простыня</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="6" /> <span class="form__label-text">Короткие предложения</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="7" /> <span class="form__label-text">Смайлики</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="8" /> <span class="form__label-text">Много форматирования</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" value="9" /> <span class="form__label-text">Картинки</span> </label> <label class="form__label form__label_block"> <input type="checkbox" class="form__input form__input_checkbox" name="id[]" " value="10" /> <span class="form__label-text">Ссылки</span> </label> </fieldset> <button type="submit" class="btn btn_medium btn_grey">Отправить</button> </form> <div class="author-info "> <a href="/users/shukan" class="author-info__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_bottom', 'profile', 'shukan');}"> <img src="//habrastorage.org/getpro/habr/avatars/d2f/3e5/58f/d2f3e558fa0156c892b836f061ecaca7.png" class="author-info__image-pic" /> </a> <div class="author-info__desc js-user_1165228"> <div class="author-info__username"> <a href="/users/shukan" class="author-info__name" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_bottom', 'profile', 'shukan');}">Михаил Куликов</a> <a href="/users/shukan" class="author-info__nickname" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_bottom', 'profile', 'shukan');}">@shukan</a> <div class="karma__widjet voting-wjt voting-wjt_small js-karma  " title="Карма пользователя"> <div class="voting-wjt__counter js-karma-mark voting-wjt__counter_positive " title="26 голосов"> <div class="voting-wjt__label">карма</div> <div class="voting-wjt__counter-score js-karma_num">22,0</div> </div> </div> <div class="user-rating" title="Рейтинг пользователя"> <span class="user-rating__label">рейтинг</span> <span class="user-rating__value">0,0</span> </div> </div> <div class="author-info__specialization"> Пользователь </div> </div> </div> </div> <div class="similar-posts"> <h2 class="similar-posts__title">Похожие публикации</h2> <ul class="content-list content-list_posts"> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+11</div> <div class="post-preview__desc"> <a class="post-preview__link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }" href="/post/253431/">Переопределяем первичный ключ в Ruby on Rails</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">5,4k</span> <span class="inline-list__item favorites-count">36</span> <span class="inline-list__item comments-count">8</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+13</div> <div class="post-preview__desc"> <a class="post-preview__link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }" href="/post/231629/">Поиск оптимальной системы аудио распознавания речи с закрытым исходным кодом, но имеющими открытые API, для возможности интеграции</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">54,3k</span> <span class="inline-list__item favorites-count">169</span> <span class="inline-list__item comments-count">10</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+82</div> <div class="post-preview__desc"> <a class="post-preview__link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }" href="/post/117212/">Опубликован закрытый ключ AirPort Express</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">3,9k</span> <span class="inline-list__item favorites-count">45</span> <span class="inline-list__item comments-count">84</span> </span> </div> </div> </li> </ul> </div> <div class="html_banner_wrap ">  <div class="html_banner" id="adriver_banner_1109509440"> <span class="html_banner_text">Реклама помогает поддерживать и развивать наши сервисы<br /><br /><a href="/adblock/" class="xyz_wrapper_button" target="_blank">Подробнее</a></span> </div> <a href="https://special.habrahabr.ru/advertising/" class="firskill__label">Спецпроект</a> <script type="text/javascript">
        function loadAdriverBanner(){
          var keyword = &apos;&apos;;
          var custom = [];
          custom[7] = ar_duo1;

          if (typeof crtg_content !== &apos;undefined&apos; &amp;&amp; crtg_content) { keyword = crtg_content; }
           custom[1] = &apos;h_crypto&apos;;  custom[2] = &apos;f_develop&apos;; 

          if ( typeof(adriver) !== &apos;undefined&apos;){
            new adriver(&quot;adriver_banner_1109509440&quot;, {sid:176776, bt:52, bn:13, custom: custom, keyword: keyword})
          }
        }
      </script> </div> <div class="similar-posts similar-posts_full"> <h2 class="similar-posts__title_wrap"> <span class="similar-posts__title">Самое читаемое</span> <span class="similar-posts__flow"> <a href="https://habrahabr.ru/flows/develop/" class="similar-posts__flow-link">Разработка</a> </span> </h2> <div class="live-broadcast__tabs tabs" id="broadcast_tabs_posts"> <ul class="tabs__menu tabs__menu_posts menu menu_inline"> <li class="menu__item"><a href="#broadcast_posts_now" class="menu__item-tab">Сейчас</a></li> <li class="menu__item"><a href="#broadcast_posts_today" class="menu__item-tab">Сутки</a></li> <li class="menu__item"><a href="#broadcast_posts_week" class="menu__item-tab">Неделя</a></li> <li class="menu__item"><a href="#broadcast_posts_month" class="menu__item-tab">Месяц</a></li> </ul> <div class="tabs__content tabs__content_reading" id="broadcast_posts_now"> <ul class="content-list content-list_posts content-list_most-reading"> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+12</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/316160/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Что означает ноябрьское обновление Steam для инди-разработчиков?</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">2,8k</span> <span class="inline-list__item favorites-count">8</span> <span class="inline-list__item comments-count">5</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+46</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/ruvds/blog/316132/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Консоль разработчика Google Chrome: десять неочевидных полезностей</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">10,4k</span> <span class="inline-list__item favorites-count">299</span> <span class="inline-list__item comments-count">26</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+5</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/316064/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">10 причин почему именно сейчас стоит попробовать Microsoft SQL Server</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">4,8k</span> <span class="inline-list__item favorites-count">33</span> <span class="inline-list__item comments-count">61</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+270</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/88161/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">5 способов, которыми игры пытаются вызвать зависимость</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">108k</span> <span class="inline-list__item favorites-count">766</span> <span class="inline-list__item comments-count">247</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+17</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/piter/blog/316118/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Издательство Питер. Черная пятница 2016</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">7,6k</span> <span class="inline-list__item favorites-count">19</span> <span class="inline-list__item comments-count">13</span> </span> </div> </div> </li> </ul> </div> <div class="tabs__content tabs__content_reading" id="broadcast_posts_today"> <ul class="content-list content-list_posts content-list_most-reading"> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+46</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/ruvds/blog/316132/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Консоль разработчика Google Chrome: десять неочевидных полезностей</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">10,4k</span> <span class="inline-list__item favorites-count">299</span> <span class="inline-list__item comments-count">26</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+60</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/316008/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Google избавляется от частных клиентов в России</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">32,5k</span> <span class="inline-list__item favorites-count">47</span> <span class="inline-list__item comments-count">210</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+17</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/piter/blog/316118/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Издательство Питер. Черная пятница 2016</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">7,6k</span> <span class="inline-list__item favorites-count">19</span> <span class="inline-list__item comments-count">13</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+12</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/316090/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Вышел Riot.js 3.0</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">6,1k</span> <span class="inline-list__item favorites-count">36</span> <span class="inline-list__item comments-count">21</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+27</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/JetBrains/blog/316068/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Релиз PyCharm 2016.3: Полная поддержка Python 3.6, улучшения в Python консоли, обозревателе переменных, и многое другое</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">8,2k</span> <span class="inline-list__item favorites-count">21</span> <span class="inline-list__item comments-count">41</span> </span> </div> </div> </li> </ul> </div> <div class="tabs__content tabs__content_reading" id="broadcast_posts_week"> <ul class="content-list content-list_posts content-list_most-reading"> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+46</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/edison/blog/315668/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Код, за который мне до сих пор стыдно</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">44,9k</span> <span class="inline-list__item favorites-count">70</span> <span class="inline-list__item comments-count">240</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+60</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/316008/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Google избавляется от частных клиентов в России</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">32,5k</span> <span class="inline-list__item favorites-count">47</span> <span class="inline-list__item comments-count">210</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+50</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/edison/blog/315724/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Обучаемся самостоятельно: подборка видеокурсов по Computer Science</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">26k</span> <span class="inline-list__item favorites-count">807</span> <span class="inline-list__item comments-count">20</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+34</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/fpi_russia/blog/315886/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">«Вечная флешка»: как создать надежный носитель, который сохранит данные на тысячи лет</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">24,4k</span> <span class="inline-list__item favorites-count">44</span> <span class="inline-list__item comments-count">79</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+9</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/1cloud/blog/315852/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Навыки опытного программиста: Самые популярные советы начинающим</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">22,7k</span> <span class="inline-list__item favorites-count">141</span> <span class="inline-list__item comments-count">32</span> </span> </div> </div> </li> </ul> </div> <div class="tabs__content tabs__content_reading" id="broadcast_posts_month"> <ul class="content-list content-list_posts content-list_most-reading"> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+135</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/313926/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Массовое ограбление покупателей Fix-Price</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">104k</span> <span class="inline-list__item favorites-count">82</span> <span class="inline-list__item comments-count">163</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+20</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/315152/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Ваш язык программирования — отстой</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">66,7k</span> <span class="inline-list__item favorites-count">419</span> <span class="inline-list__item comments-count">350</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+88</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/post/313890/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Как работает Git</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">56,7k</span> <span class="inline-list__item favorites-count">774</span> <span class="inline-list__item comments-count">38</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+129</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/yandex/blog/314222/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Искусственный интеллект в поиске. Как Яндекс научился применять нейронные сети, чтобы искать по смыслу, а не по словам</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">45,2k</span> <span class="inline-list__item favorites-count">249</span> <span class="inline-list__item comments-count">113</span> </span> </div> </div> </li> <li class="content-list__item"> <div class="post-preview"> <div class="post-preview__rating">+46</div> <div class="post-preview__desc"> <a href="https://habrahabr.ru/company/edison/blog/315668/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post-preview__link">Код, за который мне до сих пор стыдно</a> <span class="post-preview__attrs inline-list inline-list_attrs"> <span class="inline-list__item views-count">44,9k</span> <span class="inline-list__item favorites-count">70</span> <span class="inline-list__item comments-count">240</span> </span> </div> </div> </li> </ul> </div> </div> </div> </div> </div> </div> <div class="column-wrapper column-wrapper_comments"> <div class="content_left"> <div class="comments_list " id="comments"> <h2 class="title "> Комментарии (<span id="comments_count">39</span>) </h2> <ul id="comments-list"> <li class="comment_item" id="comment_8740779"> <span class="parent_id" data-parent_id="0" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8740779"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="erlyvideo"> <a href="https://habrahabr.ru/users/erlyvideo/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/erlyvideo/" class="comment-item__username">erlyvideo</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 00:37 </time> <span class="comment-item__controls"> <a href="#comment_8740779" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8740779" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 3: ↑2 и ↓1">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> очень круто! </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8740779"> </ul> </li> <li class="comment_item" id="comment_8740889"> <span class="parent_id" data-parent_id="0" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8740889"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Cosmonaut"> <a href="https://habrahabr.ru/users/Cosmonaut/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_green" /> </a> <a href="https://habrahabr.ru/users/Cosmonaut/" class="comment-item__username">Cosmonaut</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 09:13 </time> <span class="comment-item__controls"> <a href="#comment_8740889" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8740889" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 3: ↑3 и ↓0">+3</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Достойный ответ проприентарному криптопровайдеру! </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8740889"> </ul> </li> <li class="comment_item" id="comment_8740893"> <span class="parent_id" data-parent_id="0" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8740893"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="mva"> <a href="https://habrahabr.ru/users/mva/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/fd3/78b/152/fd378b1523d555bf417182fa49245fb1_small.png" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/mva/" class="comment-item__username">mva</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 09:23 </time> <span class="comment-item__controls"> <a href="#comment_8740893" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8740893" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑1 и ↓0">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Но остаётся открытым вопрос о том, как без «проприетарного криптопровайдера» (как сказали выше) вытащить со «свистка» криптоконтейнер (потому что далеко не все из предоставляемых «свистков» (если честно, я вообще ни с одним таким не сталкивался) монтируются как флешки, чтобы была возможность просто взять и добраться до /mnt/bla/*.000 </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8740893"> <li class="comment_item" id="comment_8741023"> <span class="parent_id" data-parent_id="8740893" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741023"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="vsb"> <a href="https://habrahabr.ru/users/vsb/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_green" /> </a> <a href="https://habrahabr.ru/users/vsb/" class="comment-item__username">vsb</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 13:21 </time> <span class="comment-item__controls"> <a href="#comment_8741023" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741023" data-parent_id="8740893" title="Показать ветку комментариев" /> <a href="#comment_8740893" class="icon_comment-parent js-comment_parent" data-id="8741023" data-parent_id="8740893" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741023" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Вообще в нормальном криптотокене ключи лежат в защищённом хранилище, специально спроектированном так, чтобы вытащить их было нельзя, а все криптооперации выполняются самим токеном. Если у вас такой — за разумные деньги никак не вытащить. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741023"> <li class="comment_item" id="comment_8741125"> <span class="parent_id" data-parent_id="8741023" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741125"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Maysoft"> <a href="https://habrahabr.ru/users/Maysoft/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/Maysoft/" class="comment-item__username">Maysoft</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 16:54 <span class="comment-item__time_changed icon_comment-edit" title="Kомментарий был изменён"> <i class="comment-item__sign_changed">(комментарий был изменён)</i> </span> </time> <span class="comment-item__controls"> <a href="#comment_8741125" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741125" data-parent_id="8741023" title="Показать ветку комментариев" /> <a href="#comment_8741023" class="icon_comment-parent js-comment_parent" data-id="8741125" data-parent_id="8741023" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741125" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  voting-wjt__counter_negative"> <span class="voting-wjt__counter-score js-score" title="Всего 4: ↑0 и ↓4">–4</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format bad bad4"> Позвольте не согласиться: вытащить можно и даже нужно (ну хотя бы для резервной копии). Делается это на машине с установленным КриптоПро CSP + драйвера токена:<br /> запускаем КриптоПро CSP (в Windows cpconfig.cpl);<br /> на вкладке Сервис выбираем кнопку Скопировать...;<br /> источник токен, приемник флешка (могут быть проблемы, если не установлен считыватель «Все съемные диски»).<br /> С флешки можно спокойно пересылать контейнер хоть по мылу. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741125"> <li class="comment_item" id="comment_8741147"> <span class="parent_id" data-parent_id="8741125" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741147"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="grossws"> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/be3/21c/e59/be321ce5998c10ffff4b20f0c5dd9862_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__username">grossws</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 17:56 </time> <span class="comment-item__controls"> <a href="#comment_8741147" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741147" data-parent_id="8741125" title="Показать ветку комментариев" /> <a href="#comment_8741125" class="icon_comment-parent js-comment_parent" data-id="8741147" data-parent_id="8741125" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741147" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 4: ↑4 и ↓0">+4</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Если используется реальный токен (хоть тот же рутокен эцп или etoken), а не поделие на основе флешки, то вытащить оттуда приватный ключ — крайне сложная деструктивная операция (микросхема, на которой хранится ключ, будет физически разрушена). </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741147"> <li class="comment_item" id="comment_8741159"> <span class="parent_id" data-parent_id="8741147" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741159"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Maysoft"> <a href="https://habrahabr.ru/users/Maysoft/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/Maysoft/" class="comment-item__username">Maysoft</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 18:04 </time> <span class="comment-item__controls"> <a href="#comment_8741159" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741159" data-parent_id="8741147" title="Показать ветку комментариев" /> <a href="#comment_8741147" class="icon_comment-parent js-comment_parent" data-id="8741159" data-parent_id="8741147" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741159" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  voting-wjt__counter_negative"> <span class="voting-wjt__counter-score js-score" title="Всего 6: ↑0 и ↓6">–6</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format bad bad5"> Боюсь, что вы плохо представляете, что любое обращение к ключу — это чтение даже из самого супер защищенного хранилища, операция копирования требует только чтения. Дальше додумаетесь сами? </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741159"> <li class="comment_item" id="comment_8741165"> <span class="parent_id" data-parent_id="8741159" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741165"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="grossws"> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/be3/21c/e59/be321ce5998c10ffff4b20f0c5dd9862_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__username">grossws</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 18:09 </time> <span class="comment-item__controls"> <a href="#comment_8741165" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741165" data-parent_id="8741159" title="Показать ветку комментариев" /> <a href="#comment_8741159" class="icon_comment-parent js-comment_parent" data-id="8741165" data-parent_id="8741159" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741165" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 5: ↑5 и ↓0">+5</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Криптотокен часто не предоставляет операции чтения. Он предоставляет операции типа хэширования, подписи и дешифрования (всё это выполняется на токене). Плюс управление приватными ключами и сертификатами, которое в случае ключей часто сводится к «сгенерировать ключ», «записать ключ» (с хоста на токен). Посмотрите на интерфейс pkcs11 или pcsc. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741165"> </ul> </li> <li class="comment_item" id="comment_8741211"> <span class="parent_id" data-parent_id="8741159" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741211"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Kolyuchkin"> <a href="https://habrahabr.ru/users/Kolyuchkin/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_pink" /> </a> <a href="https://habrahabr.ru/users/Kolyuchkin/" class="comment-item__username">Kolyuchkin</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 19:25 </time> <span class="comment-item__controls"> <a href="#comment_8741211" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741211" data-parent_id="8741159" title="Показать ветку комментариев" /> <a href="#comment_8741159" class="icon_comment-parent js-comment_parent" data-id="8741211" data-parent_id="8741159" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741211" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 3: ↑3 и ↓0">+3</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Я разрабатывал подобные «крипто-свистки» и архитектура была спроектирована таким образом, что исключалась возможность чтения ключей ЭП даже инвазивными методами, не говоря уж о программных. Это закладывалось в топологию микроконтроллера. Вот) И запросы библиотеки криптоинтерфейсов анализировались строжайшим образом перед их выполнением) Компания «Крипто-Про» и ее партнеры заботятся о своих ключах не хуже (в серьезных продуктах, конечно). Так что, на мой взгляд, легче «купить» владельца или прибегнуть к «термо-криптоанализу», чем пытаться вытащить ключ из серьезного крипто-свистка. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741211"> <li class="comment_item" id="comment_8741493"> <span class="parent_id" data-parent_id="8741211" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741493"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="erlyvideo"> <a href="https://habrahabr.ru/users/erlyvideo/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/erlyvideo/" class="comment-item__username">erlyvideo</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 11:06 </time> <span class="comment-item__controls"> <a href="#comment_8741493" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741493" data-parent_id="8741211" title="Показать ветку комментариев" /> <a href="#comment_8741211" class="icon_comment-parent js-comment_parent" data-id="8741493" data-parent_id="8741211" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741493" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> исключается возможность или делается очень дорогой? </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741493"> <li class="comment_item" id="comment_8741533"> <span class="parent_id" data-parent_id="8741493" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741533"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Kolyuchkin"> <a href="https://habrahabr.ru/users/Kolyuchkin/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_pink" /> </a> <a href="https://habrahabr.ru/users/Kolyuchkin/" class="comment-item__username">Kolyuchkin</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 12:30 </time> <span class="comment-item__controls"> <a href="#comment_8741533" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741533" data-parent_id="8741493" title="Показать ветку комментариев" /> <a href="#comment_8741493" class="icon_comment-parent js-comment_parent" data-id="8741533" data-parent_id="8741493" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741533" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> делает возможность настолько дорогой, что «овчинка выделки не стоит») </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741533"> <li class="comment_item" id="comment_8743607"> <span class="parent_id" data-parent_id="8741533" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8743607"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="dmitrmax"> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__username">dmitrmax</a> </span> <time class="comment-item__time_published"> 18 января 2016 в 19:52 </time> <span class="comment-item__controls"> <a href="#comment_8743607" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8743607" data-parent_id="8741533" title="Показать ветку комментариев" /> <a href="#comment_8741533" class="icon_comment-parent js-comment_parent" data-id="8743607" data-parent_id="8741533" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8743607" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Неужели нет секретной команды «выдай мне все ключи»? Неужели ФСБ такое сертифицирует? ) </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8743607"> <li class="comment_item" id="comment_8743857"> <span class="parent_id" data-parent_id="8743607" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8743857"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Kolyuchkin"> <a href="https://habrahabr.ru/users/Kolyuchkin/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_pink" /> </a> <a href="https://habrahabr.ru/users/Kolyuchkin/" class="comment-item__username">Kolyuchkin</a> </span> <time class="comment-item__time_published"> 19 января 2016 в 01:55 </time> <span class="comment-item__controls"> <a href="#comment_8743857" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8743857" data-parent_id="8743607" title="Показать ветку комментариев" /> <a href="#comment_8743607" class="icon_comment-parent js-comment_parent" data-id="8743857" data-parent_id="8743607" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8743857" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> «Нет», конечно. О чем Вы говорите?)) </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8743857"> <li class="comment_item" id="comment_8743867"> <span class="parent_id" data-parent_id="8743857" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8743867"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="dmitrmax"> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__username">dmitrmax</a> </span> <time class="comment-item__time_published"> 19 января 2016 в 02:18 </time> <span class="comment-item__controls"> <a href="#comment_8743867" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8743867" data-parent_id="8743857" title="Показать ветку комментариев" /> <a href="#comment_8743857" class="icon_comment-parent js-comment_parent" data-id="8743867" data-parent_id="8743857" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8743867" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑1 и ↓0">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <a href="https://youtu.be/7gRsgkdfYJ8">youtu.be/7gRsgkdfYJ8</a> </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8743867"> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class="comment_item" id="comment_8741403"> <span class="parent_id" data-parent_id="8741159" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741403"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="dmitrmax"> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__username">dmitrmax</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 01:37 </time> <span class="comment-item__controls"> <a href="#comment_8741403" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741403" data-parent_id="8741159" title="Показать ветку комментариев" /> <a href="#comment_8741159" class="icon_comment-parent js-comment_parent" data-id="8741403" data-parent_id="8741159" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741403" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 3: ↑3 и ↓0">+3</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Боюсь, что вы плохо разбираетесь в предмете и осмеливаетесь других в этом обвинять. Вам не приходило в голову, что можно закачать в токен информацию, которую надо зашифровать или подписать, и получить из токена зашифрованную инфу или подпись? и тогда ключу нет нужды покидать пределы носителя. Так работают нормальные токены и смарт-карты. Потому они и смарт. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741403"> </ul> </li> </ul> </li> </ul> </li> <li class="comment_item" id="comment_8741151"> <span class="parent_id" data-parent_id="8741125" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741151"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Greyushko"> <a href="https://habrahabr.ru/users/Greyushko/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/45d/300/f1c/45d300f1cdfc51e4ee6e0be5ba5049b8_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/Greyushko/" class="comment-item__username">Greyushko</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 17:56 </time> <span class="comment-item__controls"> <a href="#comment_8741151" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741151" data-parent_id="8741125" title="Показать ветку комментариев" /> <a href="#comment_8741125" class="icon_comment-parent js-comment_parent" data-id="8741151" data-parent_id="8741125" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741151" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Существуют разные способы хранения ключей на токене (в том числе и среди продуктов КриптоПро). В предыдущем комментарии речь шла о неизвлекаемых ключах. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741151"> </ul> </li> <li class="comment_item" id="comment_8741189"> <span class="parent_id" data-parent_id="8741125" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741189"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="palmich"> <a href="https://habrahabr.ru/users/palmich/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/palmich/" class="comment-item__username">palmich</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 19:00 </time> <span class="comment-item__controls"> <a href="#comment_8741189" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741189" data-parent_id="8741125" title="Показать ветку комментариев" /> <a href="#comment_8741125" class="icon_comment-parent js-comment_parent" data-id="8741189" data-parent_id="8741125" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741189" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> там еще есть галочка, при создании ключа «возможность тиражирования» или как то так. Если правильно помню — на то, чтобы поставить такую галочку при генерации ЭЦП для электронных торгов с меня хотели еще +1000 рублей. Без этой галочки ключ с рутокена просто не копируется. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741189"> </ul> </li> </ul> </li> </ul> </li> <li class="comment_item" id="comment_8741153"> <span class="parent_id" data-parent_id="8740893" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741153"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="Greyushko"> <a href="https://habrahabr.ru/users/Greyushko/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/45d/300/f1c/45d300f1cdfc51e4ee6e0be5ba5049b8_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/Greyushko/" class="comment-item__username">Greyushko</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 17:58 </time> <span class="comment-item__controls"> <a href="#comment_8741153" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741153" data-parent_id="8740893" title="Показать ветку комментариев" /> <a href="#comment_8740893" class="icon_comment-parent js-comment_parent" data-id="8741153" data-parent_id="8740893" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741153" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 2: ↑2 и ↓0">+2</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Прошу прощения, а зачем? Токены, в принципе, для того и существуют, чтобы из них ничего нельзя было вытащить. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741153"> <li class="comment_item" id="comment_8741399"> <span class="parent_id" data-parent_id="8741153" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741399"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="dmitrmax"> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__username">dmitrmax</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 01:32 </time> <span class="comment-item__controls"> <a href="#comment_8741399" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741399" data-parent_id="8741153" title="Показать ветку комментариев" /> <a href="#comment_8741153" class="icon_comment-parent js-comment_parent" data-id="8741399" data-parent_id="8741153" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741399" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  voting-wjt__counter_negative"> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑0 и ↓1">–1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format bad bad1"> Зачем? Дерзните сделать гостовую подпись в браузере под линуксом с помощью такого хардварного токена. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741399"> <li class="comment_item" id="comment_8741427"> <span class="parent_id" data-parent_id="8741399" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741427"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 05:11 </time> <span class="comment-item__controls"> <a href="#comment_8741427" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741427" data-parent_id="8741399" title="Показать ветку комментариев" /> <a href="#comment_8741399" class="icon_comment-parent js-comment_parent" data-id="8741427" data-parent_id="8741399" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741427" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 2: ↑2 и ↓0">+2</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Токена у меня нет, но вроде как на форуме вполне себе <a href="http://forum.rutoken.ru/topic/1644/">инструкции приводятся</a>. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741427"> <li class="comment_item" id="comment_8743603"> <span class="parent_id" data-parent_id="8741427" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8743603"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="dmitrmax"> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__username">dmitrmax</a> </span> <time class="comment-item__time_published"> 18 января 2016 в 19:51 </time> <span class="comment-item__controls"> <a href="#comment_8743603" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8743603" data-parent_id="8741427" title="Показать ветку комментариев" /> <a href="#comment_8741427" class="icon_comment-parent js-comment_parent" data-id="8743603" data-parent_id="8741427" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8743603" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Есть некоторая беда с этими токенами. Заключается она в том, что поддержка этих токенов должна быть сделана на сайте с помощью плагина, коих сейчас уже небольшой зоопарк. Сделать функционал ЭП по ГОСТу с помощью стандартных механизмов браузера у таких токенов увы нельзя. С плагинами есть другая беда: большая часть плагинов используют NP API, который выпилен из Хрома и вот-вот выпилят из Firefox.<br /> <br /> Под виндой работа с данными токенами тоже не самый удобный вариант, так как при работе с ними через Crypto Pro или другое популярное СКЗИ данный токен превращается в <s>тыкву</s> флэшку. Работа Microsoft Crypto API поддержана только для RSA части этого токена. А вот функционал ГОСТовских функций по аппаратной подписи надо тянуть через PKSC#11, но программ, которые поддерживают такое под виндой в дополнение к MS Crypto API днём с огнём. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8743603"> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class="comment_item" id="comment_8741195"> <span class="parent_id" data-parent_id="8740893" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741195"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="lovecraft"> <a href="https://habrahabr.ru/users/lovecraft/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/a42/72f/962/a4272f96227472e632fdad6c48c4220e_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/lovecraft/" class="comment-item__username">lovecraft</a> </span> <time class="comment-item__time_published"> 16 января 2016 в 19:07 </time> <span class="comment-item__controls"> <a href="#comment_8741195" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741195" data-parent_id="8740893" title="Показать ветку комментариев" /> <a href="#comment_8740893" class="icon_comment-parent js-comment_parent" data-id="8741195" data-parent_id="8740893" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741195" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Как флешка монтируется обычная флешка с контейнером в виде отдельной папки. В общем-то это самый популярный и самый доступный тип токена в случае с Крипто-ПРО. И с него-то вытащить ключи сложнее всего, потому что формат хранения -проприетарный.<br /> <br /> С настоящими токенами гораздо легче — есть pcsk11-tool, есть, в конце концов, утилиты от производителей токенов. Если ключ сгенерирован на токене как неэкспортируемый, то, естественно, его ничем не вытащишь, но, как правило, ключ делают выгружаемым, чтобы можно было сделать копию, потому что вероятность использования ключа злоумышленниками намного ниже, чем вероятность его, например, утраты или поломки.<br /> <br /> Так что автору — респект. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741195"> <li class="comment_item" id="comment_8741429"> <span class="parent_id" data-parent_id="8741195" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741429"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 05:23 <span class="comment-item__time_changed icon_comment-edit" title="Kомментарий был изменён"> <i class="comment-item__sign_changed">(комментарий был изменён)</i> </span> </time> <span class="comment-item__controls"> <a href="#comment_8741429" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741429" data-parent_id="8741195" title="Показать ветку комментариев" /> <a href="#comment_8741195" class="icon_comment-parent js-comment_parent" data-id="8741429" data-parent_id="8741195" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741429" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 2: ↑2 и ↓0">+2</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <blockquote>как правило, ключ делают выгружаемым, чтобы можно было сделать копию</blockquote>Ужас какой. Кто и где делает ключ выгружаемым? В нормальных компаниях с «утратой или поломкой» борются просто: упрощением регистрации нового ключа. В идеале — это должен иметь возможность сделать сам клиент без участия службы поддержки — <a href="https://support.google.com/accounts/answer/6103534?hl=ru">примерно так</a>.<br /> <br /> Самое дебильное — что ведь кто-то что-то там ведь проверяет, сертифицирует, разбирает. Куча денег вертится. Но при этом самое элементарное — похоже никто не проверяет. Зачем тогда всё это? То есть я понимаю, что для большинства людей «безопасность — это такая галочка, без которой клиенты не придут/договор не подпишут», а как оно там реально защищает ваши данные — неважно, но, чёрт побери, всему же есть предел!<br /> <br /> Обнаружение экспортируемого ключа в продакшене — это же ЧП. Кто-то что-то настолько не понимает, что «с дуба рухнул» и решил дискредитировать всю идею аппаратных токенов… А тут оказыватся, что «как правило ключ делают выгружаемым»… грустно это… </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741429"> <li class="comment_item" id="comment_8741443"> <span class="parent_id" data-parent_id="8741429" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741443"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="palmich"> <a href="https://habrahabr.ru/users/palmich/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/palmich/" class="comment-item__username">palmich</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 09:09 </time> <span class="comment-item__controls"> <a href="#comment_8741443" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741443" data-parent_id="8741429" title="Показать ветку комментариев" /> <a href="#comment_8741429" class="icon_comment-parent js-comment_parent" data-id="8741443" data-parent_id="8741429" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741443" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> это вы просто с работой со СМЭВ не сталкивались… </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741443"> <li class="comment_item" id="comment_8741607"> <span class="parent_id" data-parent_id="8741443" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741607"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 14:15 </time> <span class="comment-item__controls"> <a href="#comment_8741607" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741607" data-parent_id="8741443" title="Показать ветку комментариев" /> <a href="#comment_8741443" class="icon_comment-parent js-comment_parent" data-id="8741607" data-parent_id="8741443" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741607" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 5: ↑5 и ↓0">+5</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Не сталкивался. И проводку у себя в доме не я монтировал. И даже систему гидроусиления руля я не чинил. Но что это, собственно, меняет?..<br /> <br /> Обратная сторона российской «смекалки»: если кто-то разработал систему, в которой что-то делать неудобно, элементарная операция регистрации дополнительного ключа (которая должна быть элементарной и бесплатной) требует кучу времени и сил и/или денег, то мы это как-нибудь обойдём. «Жучок» поставим чтобы пробки не горели, датчик кувалдой забьём, если он на свое место не лезет, ключи экспортируемыми оставим. Всё — из самых лучших побуждений.<br /> <br /> А потом — дома горяд, ракеты падают, деньги пропадают.<br /> <br /> Смысл существования криптотокена — в неизвлекаемости помещённых в него ключей. Это, собственно, <b>единственное</b> оправдание его сущесвования. Использовать экспортируемые ключи вне разработки — должно быть как минимум поводом для увольнения за халатность, а как максимум — и для привлечения к отвественности (в зависимости от того кому и сколько таких ключей было выдано).<br /> <br /> А то над паролями, записанными на бумажечке и приклеенными к монитору — все смеются. А когда ключи выдаются с PINом 12345678 и с экспортируемыми ключами — это как будто «так и надо»… </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741607"> </ul> </li> </ul> </li> <li class="comment_item" id="comment_8743645"> <span class="parent_id" data-parent_id="8741429" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8743645"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="dmitrmax"> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_blue" /> </a> <a href="https://habrahabr.ru/users/dmitrmax/" class="comment-item__username">dmitrmax</a> </span> <time class="comment-item__time_published"> 18 января 2016 в 21:10 </time> <span class="comment-item__controls"> <a href="#comment_8743645" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8743645" data-parent_id="8741429" title="Показать ветку комментариев" /> <a href="#comment_8741429" class="icon_comment-parent js-comment_parent" data-id="8743645" data-parent_id="8741429" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8743645" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑1 и ↓0">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Я вам даже больше скажу. На сегодняшний день большая часть УЦ использует в работе софт КриптоПро, который позволяет создавать пары ключей только на убогих токенах. Более того, подавляющая часть УЦ не даёт (своим регламентом) клиентам возможности получить сертификат по запросу сертификата.<br /> <br /> Таким образом, всё гораздо хуже, потому что приватный ключ генерирует УЦ. Причем он может его скопировать себе в этот момент.<br /> <br /> Если вы действительно знаете, что такое безопасность, то, конечно, потратите время и найдете УЦ, который работает с запросами. Но большинство УЦ, а стало быть и их клиентов живут вот так вот. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8743645"> </ul> </li> </ul> </li> <li class="comment_item" id="comment_8741461"> <span class="parent_id" data-parent_id="8741195" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741461"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="vsb"> <a href="https://habrahabr.ru/users/vsb/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_green" /> </a> <a href="https://habrahabr.ru/users/vsb/" class="comment-item__username">vsb</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 10:06 </time> <span class="comment-item__controls"> <a href="#comment_8741461" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741461" data-parent_id="8741195" title="Показать ветку комментариев" /> <a href="#comment_8741195" class="icon_comment-parent js-comment_parent" data-id="8741461" data-parent_id="8741195" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741461" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑1 и ↓0">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Для чего вообще нужно платить деньги за такой ключ? Купить самую дешёвую флешку и всё. В Казахстане, например, так и есть. Ты получаешь сертификат от государства для получения госуслуг. При получении можно либо принести свою флешку, либо дать удостоверение, в котором встроен криптотокен (но нужен специальный ридер), либо заплатить деньги и получить USB-токен. Покупать втридорога флешку — странно ведь. Или это обусловлено этим софтом, который читает ключи только с этой брендовой флешки? </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741461"> <li class="comment_item" id="comment_8741609"> <span class="parent_id" data-parent_id="8741461" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741609"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 14:40 </time> <span class="comment-item__controls"> <a href="#comment_8741609" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741609" data-parent_id="8741461" title="Показать ветку комментариев" /> <a href="#comment_8741461" class="icon_comment-parent js-comment_parent" data-id="8741609" data-parent_id="8741461" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741609" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Это обусловлено требованиями к безопасности. Приватный ключ с криптоключа вынуть нельзя (теоретически — даже с использованием электронного микроскопа нельзя, практически — как минимум нельзя это сделать с помощью «подручных» средств).<br /> <br /> У меня, скажем, <a href="http://www.amazon.com/Yubico-Y-159-YubiKey-4-Nano/dp/B018Y1XXT6/">подобный ключик</a> вставлен раз и навсегда в ноут, в котором и ездит. Пока он находится в моём распоряжении — всё, что с его помощью производится — это моя ответственность и мои проблемы (если я его утеряю или, скажем, таможенники заберут ноут и отправят «на проверку» — я должен немедленно об этом сообщить, чтобы ключ аннулировали).<br /> <br /> Главное: так как ключ скопировать нельзя, то никакие «отмазки» и «происки конкурентов» во внимание не принимаются: ключ был у меня в руках — значит я за то, что произошло с его помощью и отвечаю.<br /> <br /> Какой смысл класть на такой ключ экспортируемый сертификат — науке, понятно, неведомо. В этом смысле он работает как обычная флешка и никакого преимущества над оной не имеет.<br /> </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741609"> <li class="comment_item" id="comment_8741701"> <span class="parent_id" data-parent_id="8741609" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="8741701"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="grossws"> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/be3/21c/e59/be321ce5998c10ffff4b20f0c5dd9862_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__username">grossws</a> </span> <time class="comment-item__time_published"> 17 января 2016 в 17:30 </time> <span class="comment-item__controls"> <a href="#comment_8741701" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="8741701" data-parent_id="8741609" title="Показать ветку комментариев" /> <a href="#comment_8741609" class="icon_comment-parent js-comment_parent" data-id="8741701" data-parent_id="8741609" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_8741701" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <blockquote>У меня, скажем, подобный ключик вставлен раз и навсегда в ноут, в котором и ездит.</blockquote> Я такого избегаю, вставляю только когда надо что-нибудь подписать. У yubikey был <a href="https://developers.yubico.com/ykneo-openpgp/SecurityAdvisory%202015-04-14.html">security bug</a> в openpgp-апплете, который позволял производить операции без пина. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_8741701"> <li class="comment_item" id="comment_9687828"> <span class="parent_id" data-parent_id="8741701" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9687828"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 5 июля 2016 в 16:57 </time> <span class="comment-item__controls"> <a href="#comment_9687828" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9687828" data-parent_id="8741701" title="Показать ветку комментариев" /> <a href="#comment_8741701" class="icon_comment-parent js-comment_parent" data-id="9687828" data-parent_id="8741701" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9687828" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑1 и ↓0">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Этот security bug можно поиспользовать только «позаимствовав» мой ноут на какое-то время и разблокировав его. То есть это могут сделать только «свои» (если у меня украдут ноут и я ключ аннулирую, то дальше уже неважно — знает ли кто-то PIN или нет). А со «своими» бороться сложнее — они могут и троян поставить, если я куда-нибудь отойду и забуду ноут заблокировать.<br /> <br /> Так что да — вынимать ключик безопаснее, но это уже «o малое». В любом случае нужно у меня своровать некопируемый ключ. А вот если ключ из токена экспортируется — тогда вообще неясно зачем он нужен.<br /> </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9687828"> <li class="comment_item" id="comment_9688024"> <span class="parent_id" data-parent_id="9687828" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9688024"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="grossws"> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/be3/21c/e59/be321ce5998c10ffff4b20f0c5dd9862_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/grossws/" class="comment-item__username">grossws</a> </span> <time class="comment-item__time_published"> 5 июля 2016 в 19:16 </time> <span class="comment-item__controls"> <a href="#comment_9688024" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9688024" data-parent_id="9687828" title="Показать ветку комментариев" /> <a href="#comment_9687828" class="icon_comment-parent js-comment_parent" data-id="9688024" data-parent_id="9687828" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9688024" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <p>Ну да, это требует компрометации системы. И вариант с трояном принципиального отличия не имеет. Разве что в нормальном варианте необходимо ещё перехватить ещё PIN (проанализировать выхлоп кейлоггера), а при использовании соответствующего бага это не нужно. Но и тот, и другой риск стоит рассматривать при угрозе таргетированной атаки, когда эта разница в стоимости атаки уже несущественна.</p><br /> <blockquote>Так что да — вынимать ключик безопаснее, но это уже «o малое». В любом случае нужно у меня своровать некопируемый ключ. А вот если ключ из токена экспортируется — тогда вообще неясно зачем он нужен.</blockquote><br /> <p>Этого я тоже не понимаю. Выглядит ещё более дико, нежели ключи на флешке, которые просто от бедности и нежелания осуществлять поддержку более сложной системы с криптопровайдером.</p> </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9688024"> <li class="comment_item" id="comment_9691000"> <span class="parent_id" data-parent_id="9688024" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9691000"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 7 июля 2016 в 15:24 </time> <span class="comment-item__controls"> <a href="#comment_9691000" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9691000" data-parent_id="9688024" title="Показать ветку комментариев" /> <a href="#comment_9688024" class="icon_comment-parent js-comment_parent" data-id="9691000" data-parent_id="9688024" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9691000" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <blockquote>Этого я тоже не понимаю. Выглядит ещё более дико, нежели ключи на флешке, которые просто от бедности и нежелания осуществлять поддержку более сложной системы с криптопровайдером.</blockquote>Если бы. <i>Вы, конечно, шутите, Мистер Фейнман!</i> — читали? Вспомните про историю с Капитаном (ниже — маленькая цитата):<br /> <blockquote>Кабинет Капитана помещался на третьем этаже одного из тех собранных на скорую руку деревянных зданий, в которых у всех нас были кабинеты, а заказанный им сейф был железный и тяжелый. Такелажникам пришлось делать деревянные помосты и использовать специальные тали, чтобы поднять его по лестнице. Так как развлечений у нас было немного, все мы собрались поглазеть на великие усилия, с которыми сейф тащили в кабинет Капитана, и похихикать насчет секретов, которые он будет хранить в этом сейфе. Кто-то даже предлагал махнуться сейфами. Словом, об этом сейфе знали все.<br /> <br /> …<br /> <br /> – Но ты же открыл его! Значит, ты знаешь, как вскрывать сейфы.<br /> <br /> – О да. Я знаю, что замки приходят с завода установленными на 25–0–25 или на 50–25–50, и я подумал: «Чем черт не шутит. Может этот олух не потрудился сменить комбинацию», и вторая комбинация открыла замок.<br /> <br /> Итак, кое-что я от него все же узнал, – он открывал сейфы тем же чудодейственным способом, что и я. Но занятнее всего все же было то, что этот индюк Капитан получил супер-суперсейф, не постеснялся заставить пыхтеть кучу народа, которая тащила его сейф наверх, а потом даже не позаботился установить свою комбинацию.<br /> <br /> Я прошелся по кабинетам своего здания, пробуя эти две заводские комбинации, и открыл каждый пятый сейф.<br /> </blockquote>То же самое и здесь: люди думают, что использование «настоящего криптотокена» каким-то чудодейственным образом улучшает безопасность — даже если не использовать фичи, ради которых, собственно, криптотокен и существует.<br /> <br /> Это — безумно грустно, но, увы, люди всегда так были устроены…<br /> </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9691000"> <li class="comment_item" id="comment_9692096"> <span class="parent_id" data-parent_id="9691000" /> <div class="comment_body "> <div class="info comments-list__item comment-item is_topic_starter " rel="9692096"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="shukan"> <a href="https://habrahabr.ru/users/shukan/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/d2f/3e5/58f/d2f3e558fa0156c892b836f061ecaca7_small.png" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/shukan/" class="comment-item__username">shukan</a> </span> <time class="comment-item__time_published"> 8 июля 2016 в 12:23 </time> <span class="comment-item__controls"> <a href="#comment_9692096" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9692096" data-parent_id="9691000" title="Показать ветку комментариев" /> <a href="#comment_9691000" class="icon_comment-parent js-comment_parent" data-id="9692096" data-parent_id="9691000" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9692096" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Я тоже никогда не понимал, зачем нужен криптотокен, если любой мало-мальски продвинутый троян при первом же доступе к токену со стороны легального софта, со вводом пина, может послать токену команду сделать левую ЭП? <br /> <br /> Тогда сделали бы разработчики хотя бы кнопку — на токене загорается красная лампочка, что значит большой компьютер просит вычислить ЭП, пользователь видит лампочку и нажимает кнопку, соглашаясь произвести подпись. При этом должна быть сделана только одна ЭП, нужно исключить дребезг кнопки и т.д.<br /> <br /> А если в дополнение к кнопке сделать небольшой экран, где будут подсвечены реквизиты документа, хотя бы минимально получатель платежа и сумма — это будет просто замечательно, тогда троянец сможет надеяться только на невнимательность пользователя. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9692096"> <li class="comment_item" id="comment_9692642"> <span class="parent_id" data-parent_id="9692096" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9692642"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="khim"> <a href="https://habrahabr.ru/users/khim/" class="comment-item__avatar"> <span class="comment-item__avatar-img_default user-pic_lilac" /> </a> <a href="https://habrahabr.ru/users/khim/" class="comment-item__username">khim</a> </span> <time class="comment-item__time_published"> 8 июля 2016 в 17:39 </time> <span class="comment-item__controls"> <a href="#comment_9692642" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9692642" data-parent_id="9692096" title="Показать ветку комментариев" /> <a href="#comment_9692096" class="icon_comment-parent js-comment_parent" data-id="9692642" data-parent_id="9692096" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9692642" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark voting-wjt__counter_positive "> <span class="voting-wjt__counter-score js-score" title="Всего 1: ↑1 и ↓0">+1</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <blockquote>Тогда сделали бы разработчики хотя бы кнопку — на токене загорается красная лампочка, что значит большой компьютер просит вычислить ЭП, пользователь видит лампочку и нажимает кнопку, соглашаясь произвести подпись. При этом должна быть сделана только одна ЭП, нужно исключить дребезг кнопки и т.д.</blockquote>Так и сделано — посмотрите <a href="http://www.amazon.com/Yubico-Y-159-YubiKey-4-Nano/dp/B018Y1XXT6/">на вторую фотку</a>. Лампочка, правда, зелёная и кнопки нет (поднесение пальца определяется за счёт изменения индуктивности при касании), а так — всё как вы просили.<br /> <br /> <blockquote>А если в дополнение к кнопке сделать небольшой экран, где будут подсвечены реквизиты документа, хотя бы минимально получатель платежа и сумма — это будет просто замечательно, тогда троянец сможет надеяться только на невнимательность пользователя.</blockquote>Такое тоже делается, но обычно только для перевода крупных сумм. Есть токены, вообще электрически не связанные с компьютером (данные передаются через пару светодиодов, подтверждение появляется на экранчике, четыре цифры человек потом вбивает в формочку). Любой каприз за ваши деньги — вопрос только в том, как убедить людей этим пользоваться. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9692642"> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class="comment_item" id="comment_9687564"> <span class="parent_id" data-parent_id="0" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9687564"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="xorax"> <a href="https://habrahabr.ru/users/xorax/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/581/81f/31e/58181f31ec24360ad9a85b1c079f20f7_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/xorax/" class="comment-item__username">xorax</a> </span> <time class="comment-item__time_published"> 5 июля 2016 в 13:26 </time> <span class="comment-item__controls"> <a href="#comment_9687564" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9687564" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> возможен ли обратный процесс? Можно ли сделать 6 .key файлов из одного? </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9687564"> <li class="comment_item" id="comment_9690946"> <span class="parent_id" data-parent_id="9687564" /> <div class="comment_body "> <div class="info comments-list__item comment-item is_topic_starter " rel="9690946"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="shukan"> <a href="https://habrahabr.ru/users/shukan/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/d2f/3e5/58f/d2f3e558fa0156c892b836f061ecaca7_small.png" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/shukan/" class="comment-item__username">shukan</a> </span> <time class="comment-item__time_published"> 7 июля 2016 в 15:00 </time> <span class="comment-item__controls"> <a href="#comment_9690946" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9690946" data-parent_id="9687564" title="Показать ветку комментариев" /> <a href="#comment_9687564" class="icon_comment-parent js-comment_parent" data-id="9690946" data-parent_id="9687564" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9690946" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Да, возможен, для этого надо уметь рассчитывать контрольные суммы, которые проверяются при зачитывании ключевых файлов в Крипто-Про. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9690946"> <li class="comment_item" id="comment_9691014"> <span class="parent_id" data-parent_id="9690946" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9691014"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="xorax"> <a href="https://habrahabr.ru/users/xorax/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/581/81f/31e/58181f31ec24360ad9a85b1c079f20f7_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/xorax/" class="comment-item__username">xorax</a> </span> <time class="comment-item__time_published"> 7 июля 2016 в 15:32 </time> <span class="comment-item__controls"> <a href="#comment_9691014" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9691014" data-parent_id="9690946" title="Показать ветку комментариев" /> <a href="#comment_9690946" class="icon_comment-parent js-comment_parent" data-id="9691014" data-parent_id="9690946" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9691014" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Это вы о том, что в начале статьи упомянуто как «в худшем случае состоящее из более чем 2000 (двух тысяч) операций хеширования»? </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9691014"> <li class="comment_item" id="comment_9692064"> <span class="parent_id" data-parent_id="9691014" /> <div class="comment_body "> <div class="info comments-list__item comment-item is_topic_starter " rel="9692064"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="shukan"> <a href="https://habrahabr.ru/users/shukan/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/d2f/3e5/58f/d2f3e558fa0156c892b836f061ecaca7_small.png" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/shukan/" class="comment-item__username">shukan</a> </span> <time class="comment-item__time_published"> 8 июля 2016 в 12:07 </time> <span class="comment-item__controls"> <a href="#comment_9692064" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="icon_comment-tree js-comment_tree" data-id="9692064" data-parent_id="9691014" title="Показать ветку комментариев" /> <a href="#comment_9691014" class="icon_comment-parent js-comment_parent" data-id="9692064" data-parent_id="9691014" title="Показать предыдущий комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9692064" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> Нет, это так пароль «перемешивается» по 2000 раз, наверное, чтоб брутфорсить пароль было более трудоемко. <br /> <br /> Я имел в виду другие контрольные суммы, которые есть в ключевом файле, но которые не являются необходимыми для проверки правильности хранения секретного ключа. Потому что главный критерий — это когда мы, в самом конце, вычисляем публичный ключ «на лету» и сравниваем первые 8 байт с теми, что хранятся в ключевом файле. Зачем же еще что-то дополнительно контролировать? <br /> <br /> В моем примере необязательные контрольные суммы игнорируются, но в обратном процессе их игнорировать нельзя — Крипто-Про тогда не прочитает ключевой файл. </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9692064"> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class="comment_item" id="comment_9932444"> <span class="parent_id" data-parent_id="0" /> <div class="comment_body "> <div class="info comments-list__item comment-item  " rel="9932444"> <div class="folding-dot-holder"><div class="folding-dot" /></div> <span class="comment-item__user-info" data-user-login="saipr"> <a href="https://habrahabr.ru/users/saipr/" class="comment-item__avatar"> <img src="//habrastorage.org/getpro/habr/avatars/86c/535/95d/86c53595d09c1fb8e8fd6dce47afba68_small.jpg" alt class="comment-item__avatar-img" /> </a> <a href="https://habrahabr.ru/users/saipr/" class="comment-item__username">saipr</a> </span> <time class="comment-item__time_published"> 25 ноября 2016 в 21:53 </time> <span class="comment-item__controls"> <a href="#comment_9932444" class="icon_comment-anchor" title="Ссылка на комментарий" /> <span class="js-comment_chidren" title="Вернуться к ответу" /> </span> <div id="voting_9932444" class="voting-wjt voting-wjt_comments js-voting   "> <div class="voting-wjt__counter js-mark  "> <span class="voting-wjt__counter-score js-score" title="Всего 0: ↑0 и ↓0">0</span> </div> <button type="button" disabled class="voting-wjt__button voting-wjt__button_plus js-plus" title="Голосовать могут только зарегистрированные пользователи"><span>↑</span></button> <button type="button" disabled class="voting-wjt__button voting-wjt__button_minus js-minus" title="Голосовать могут только зарегистрированные пользователи"><span>↓</span></button> </div> </div> <div class="message html_format "> <blockquote>Стоит упомянуть о существовании утилиты P12FromGostCSP которая позволяет конвертировать ключ в формат P12, доступный для работы с OpenSSL, но утилита имеет следующие существенные недостатки:<br /> <br /> Читает контейнер не напрямую, а через криптопровайдер, поэтому там, где кроме OpenSSL ничего нет, не работает.<br /> Если в свойствах ключа не отмечено, что ключ «экспортируемый», то конвертировать его невозможно.</blockquote><br /> <br /> Так то оно так, но как вы вытащите закрытый ключ, если он хранится не на флешке, а на токене. Здесь не идет речь о ГОСТ-овых токенах PKCS#11. Как вы получите доступ к необходимым объектам для получения закрытого ключа? <br /> </div> <div class="reply_form_placeholder" /> <div class="reply"> </div> </div> <ul class="reply_comments" id="reply_comments_9932444"> </ul> </li> </ul> </div> <p class="for_users_only_msg">Только зарегистрированные пользователи могут оставлять комментарии. <a href="https://habrahabr.ru/auth/login/">Войдите</a>, пожалуйста.</p> <form action="/json/favorites/" method="post" id="edit_tags_form" class="hidden"> <input type="hidden" name="action" value="add" /> <input type="hidden" name="ti" value="0" /> <input type="hidden" name="tt" value="0" /> <label>Пометьте топик понятными вам метками, если хотите</label> <input type="text" name="tags_string" class="tags_string" /> <div class="description">Метки лучше разделять запятой. Например: <i>общение, социальные сети, myspace.com, подростки, мердок</i></div> <input type="submit" value="Сохранить" class="submit" /> или <a href="#" class="close" onclick="return close_edit_tags()">закрыть</a> </form> </div> <div class="sidebar_right js-sidebar_right"> <div class="live-broadcast live-broadcast_habrahabr"> <h2 class="live-broadcast__title">Что обсуждают</h2> <div class="live-broadcast__tabs tabs" id="broadcast_tabs_comments"> <ul class="tabs__menu tabs__menu_comments menu menu_inline"> <li class="menu__item"><a href="#broadcast_comments_now" class="menu__item-tab">Сейчас</a></li> <li class="menu__item"><a href="#broadcast_comments_yesterday" class="menu__item-tab">Вчера</a></li> <li class="menu__item"><a href="#broadcast_comments_week" class="menu__item-tab">Неделя</a></li> <li class="menu__item"><a href="#broadcast_comments_month" class="menu__item-tab">Месяц</a></li> </ul> <div class="tabs__content" id="broadcast_comments_now"> <ul class="content-list content-list_comments"> <li class="content-list__item"> <a href="https://habrahabr.ru/post/316064/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">10 причин почему именно сейчас стоит попробовать Microsoft SQL Server</a> <a href="https://habrahabr.ru/post/316064/#comments" class="content-list__item-counter icon_comments">61</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/edison/blog/316000/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Нативные приложения обречены (часть 1)</a> <a href="https://habrahabr.ru/company/edison/blog/316000/#comments" class="content-list__item-counter icon_comments">123</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/JetBrains/blog/316152/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Релиз DataGrip 2016.3</a> <a href="https://habrahabr.ru/company/JetBrains/blog/316152/#comments" class="content-list__item-counter icon_comments">5</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/parallels/blog/315986/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Чего не стоит ждать разработчикам в России?</a> <a href="https://habrahabr.ru/company/parallels/blog/315986/#comments" class="content-list__item-counter icon_comments">92</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/reactos/blog/315518/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Вышел ReactOS 0.4.3 под кодовым именем «Haters gonna hate»</a> <a href="https://habrahabr.ru/company/reactos/blog/315518/#comments" class="content-list__item-counter icon_comments">148</a> </li> </ul> </div> <div class="tabs__content" id="broadcast_comments_yesterday"> <ul class="content-list content-list_comments"> <li class="content-list__item"> <a href="https://habrahabr.ru/post/316022/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Осень на рынках инди-игр</a> <a href="https://habrahabr.ru/post/316022/#comments" class="content-list__item-counter icon_comments">41</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/vds/blog/315988/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">По настоящему черная пятница — VDS и Dedicated</a> <a href="https://habrahabr.ru/company/vds/blog/315988/#comments" class="content-list__item-counter icon_comments">27</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/ruvds/blog/316132/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Консоль разработчика Google Chrome: десять неочевидных полезностей</a> <a href="https://habrahabr.ru/company/ruvds/blog/316132/#comments" class="content-list__item-counter icon_comments">26</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/post/316106/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Нескучный однострочный калькулятор на sed</a> <a href="https://habrahabr.ru/post/316106/#comments" class="content-list__item-counter icon_comments">23</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/hosting-cafe/blog/316094/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Какие скидки есть у хостеров в эту Чёрную пятницу</a> <a href="https://habrahabr.ru/company/hosting-cafe/blog/316094/#comments" class="content-list__item-counter icon_comments">21</a> </li> </ul> </div> <div class="tabs__content" id="broadcast_comments_week"> <ul class="content-list content-list_comments"> <li class="content-list__item"> <a href="https://habrahabr.ru/company/edison/blog/315668/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Код, за который мне до сих пор стыдно</a> <a href="https://habrahabr.ru/company/edison/blog/315668/#comments" class="content-list__item-counter icon_comments">240</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/post/316008/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Google избавляется от частных клиентов в России</a> <a href="https://habrahabr.ru/post/316008/#comments" class="content-list__item-counter icon_comments">210</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/edison/blog/315790/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Как же вы задолбали со своими оповещениями</a> <a href="https://habrahabr.ru/company/edison/blog/315790/#comments" class="content-list__item-counter icon_comments">140</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/edison/blog/316000/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Нативные приложения обречены (часть 1)</a> <a href="https://habrahabr.ru/company/edison/blog/316000/#comments" class="content-list__item-counter icon_comments">123</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/hflabs/blog/314786/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Топограф был пьян</a> <a href="https://habrahabr.ru/company/hflabs/blog/314786/#comments" class="content-list__item-counter icon_comments">120</a> </li> </ul> </div> <div class="tabs__content" id="broadcast_comments_month"> <ul class="content-list content-list_comments"> <li class="content-list__item"> <a href="https://habrahabr.ru/company/ruvds/blog/315572/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Какой язык программирования стоит выучить первым? (ʇdıɹɔsɐʌɐɾ: ɯǝʚɯо ņıqнqvиʚɐdu)</a> <a href="https://habrahabr.ru/company/ruvds/blog/315572/#comments" class="content-list__item-counter icon_comments">426</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/post/314952/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Почему «мотивирующие» статьи не работают, не сработают и как устроена мотивация на самом деле</a> <a href="https://habrahabr.ru/post/314952/#comments" class="content-list__item-counter icon_comments">357</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/post/315152/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Ваш язык программирования — отстой</a> <a href="https://habrahabr.ru/post/315152/#comments" class="content-list__item-counter icon_comments">350</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/smartprogress/blog/315428/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Первый частный город в России, быть или не быть?</a> <a href="https://habrahabr.ru/company/smartprogress/blog/315428/#comments" class="content-list__item-counter icon_comments">317</a> </li> <li class="content-list__item"> <a href="https://habrahabr.ru/company/edison/blog/315016/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'comment'); }" class="content-list__item-link">Думаешь, ты знаешь Си?</a> <a href="https://habrahabr.ru/company/edison/blog/315016/#comments" class="content-list__item-counter icon_comments">270</a> </li> </ul> </div> </div> </div> </div> </div> <div class="column-wrapper column-wrapper_bottom column-wrapper_bordered"> <div class="content_left"> <div class="live-broadcast live-broadcast_feed"> <h2 class="live-broadcast__title live-broadcast__title_feed">Интересные публикации</h2> <div class="dropdown dropdown_broadcast"> <button type="button" class="btn btn_outline_grey btn_large icon_cog dropdown-toggle" data-toggle="dropdown"> </button> <div class="dropdown-container"> <ul class="n-dropdown-menu n-dropdown-menu_feed" id="filter"> <li class="n-dropdown-menu__item"> <label class="checkbox checkbox_custom"> <input type="checkbox" class="checkbox__input" name="habrahabr" checked/ /> <span class="checkbox__label">Хабрахабр</span> </label> </li> <li class="n-dropdown-menu__item"> <label class="checkbox checkbox_custom"> <input type="checkbox" class="checkbox__input" name="geektimes" checked/ /> <span class="checkbox__label">Гиктаймс</span> </label> </li> </ul> </div> </div> <div class="live-broadcast__content"> <ul class="content-list content-list_feed" id="list" data-posts-count="5"> <li class="content-list__item content-list__item_geektimes hidden" data-type="geektimes"> <a href="https://geektimes.ru/post/283038/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">«Кузькина мать» по-оверклокерски: как русский энтузиаст выбил три мировых рекорда в один день</a> <a href="https://geektimes.ru/post/283038/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">8</a> </li> <li class="content-list__item content-list__item_habrahabr hidden" data-type="habrahabr"> <a href="https://habrahabr.ru/post/316160/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Что означает ноябрьское обновление Steam для инди-разработчиков?</a> <a href="https://habrahabr.ru/post/316160/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">5</a> </li> <li class="content-list__item content-list__item_geektimes hidden" data-type="geektimes"> <a href="https://geektimes.ru/post/283042/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Идем по приборам</a> <a href="https://geektimes.ru/post/283042/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">1</a> </li> <li class="content-list__item content-list__item_geektimes hidden" data-type="geektimes"> <a href="https://geektimes.ru/post/283040/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Франция, Финляндия, Великобритания и Канада полностью откажутся от сжигания угля</a> <a href="https://geektimes.ru/post/283040/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">30</a> </li> <li class="content-list__item content-list__item_habrahabr hidden" data-type="habrahabr"> <a href="https://habrahabr.ru/post/316158/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Поднимаем собственный репозиторий пакетов для Ubuntu (Debian)</a> <a href="https://habrahabr.ru/post/316158/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">11</a> </li> <li class="content-list__item content-list__item_geektimes hidden" data-type="geektimes"> <a href="https://geektimes.ru/post/283036/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Microsoft продолжает совершенствовать технологию HoloLens</a> <a href="https://geektimes.ru/post/283036/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">2</a> </li> <li class="content-list__item content-list__item_habrahabr hidden" data-type="habrahabr"> <a href="https://habrahabr.ru/post/316076/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Стратегическое эссе Пола Грэма: Рефрагментация (часть 1)</a> <a href="https://habrahabr.ru/post/316076/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">1</a> </li> <li class="content-list__item content-list__item_habrahabr hidden" data-type="habrahabr"> <a href="https://habrahabr.ru/post/316152/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Релиз DataGrip 2016.3</a> <a href="https://habrahabr.ru/post/316152/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">5</a> </li> <li class="content-list__item content-list__item_habrahabr hidden" data-type="habrahabr"> <a href="https://habrahabr.ru/post/316154/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Как стать продакт-менеджером. Часть 1</a> <a href="https://habrahabr.ru/post/316154/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">1</a> </li> <li class="content-list__item content-list__item_geektimes hidden" data-type="geektimes"> <a href="https://geektimes.ru/post/283034/" class="content-list__item-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'post'); }" data-utm="?utm_source=tm_megamozg&utm_medium=tm_block&utm_campaign=tm_promo">Почему объём памяти у MacBook Pro ограничен 16GB</a> <a href="https://geektimes.ru/post/283034/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'interesting_posts', 'comment'); }" class="content-list__item-counter icon_comments">105</a> </li> </ul> </div> </div> </div> <div class="sidebar_right"> <div class="xyz_wrapper js-ad_sticky_bottom"> <div class="xyz_wrapper_inner"> <span class="xyz_wrapper_text">Реклама помогает поддерживать и развивать наши сервисы<br /><br /><a href="/adblock/" class="xyz_wrapper_button" target="_blank">Подробнее</a></span>  <div id="yandex_rtb_R-A-149298-20" style="background: #fff;" /> <script type="text/javascript">
        (function(w, d, n, s, t) {
            w[n] = w[n] || [];
            w[n].push(function() {
                Ya.Context.AdvManager.render({
                    blockId: &quot;R-A-149298-20&quot;,
                    renderTo: &quot;yandex_rtb_R-A-149298-20&quot;,
                    async: true
                });
            });
            t = d.getElementsByTagName(&quot;script&quot;)[0];
            s = d.createElement(&quot;script&quot;);
            s.type = &quot;text/javascript&quot;;
            s.src = &quot;//an.yandex.ru/system/context.js&quot;;
            s.async = true;
            t.parentNode.insertBefore(s, t);
        })(this, this.document, &quot;yandexContextAsyncCallbacks&quot;);
    </script> </div> <a href="https://special.habrahabr.ru/advertising/" class="firskill__label">Реклама</a> </div> </div> </div> <script>
  window._yaparams = {&apos;hubs&apos;:[], &apos;flow&apos;:&apos;develop (Разработка)&apos;};
  // hubs to GA
  _yaparams[&apos;hubs&apos;].push(&apos;crypto (Криптография)&apos;);
</script> </div> <div class="layout__footer"> <div class="footer_panel"> <div id="footer"> <dl> <dd><a href="https://habrahabr.ru/auth/login/">Войти</a></dd> <dd><a href="https://habrahabr.ru/auth/register/">Регистрация</a></dd> </dl> <dl> <dt>Разделы</dt> <dd><a href="https://habrahabr.ru/posts/top/">Публикации</a></dd> <dd><a href="https://habrahabr.ru/hubs/">Хабы</a></dd> <dd><a href="https://habrahabr.ru/companies/">Компании</a></dd> <dd><a href="https://habrahabr.ru/users/">Пользователи</a></dd> <dd><a href="https://toster.ru/?_aa=press_anykey">Q&amp;A</a></dd> <dd><a href="https://habrahabr.ru/sandbox/">Песочница</a></dd> </dl> <dl> <dt>Инфо</dt> <dd><a href="/info/about/">О сайте</a></dd> <dd><a href="/info/help/rules/">Правила</a></dd> <dd><a href="/info/help/">Помощь</a></dd> <dd><a href="/info/agreement/">Соглашение</a></dd> </dl> <dl> <dt>Услуги</dt> <dd><a href="https://special.habrahabr.ru/advertising/">Реклама</a></dd> <dd><a href="https://special.habrahabr.ru/">Спецпроекты</a></dd> <dd><a href="https://special.habrahabr.ru/corporate/">Тарифы</a></dd> <dd><a href="https://special.habrahabr.ru/content/">Контент</a></dd> <dd><a href="https://special.habrahabr.ru/workshops/">Семинары</a></dd> </dl> <dl> <dt>Разное</dt> <dd><a href="https://appmetrica.yandex.com/serve/240693928167260216?utm_source=HH_desktop&utm_medium=button&utm_campaign=appiOS" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'links', 'ios_app'); }">iOS приложение</a></dd> <dd><a href="https://appmetrica.yandex.com/serve/745097116363323173?id=ru.habrahabr&utm_source=HH_desktop&utm_medium=button&utm_campaign=appAndroid" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'links', 'android_app'); }">Android приложение</a></dd> <dd><a href="https://special.habrahabr.ru/hello_startup/habrahabr/" target="_blank">Помощь стартапам</a></dd> </dl> <div class="copyright"> <div class="about"> <a href="https://tmtm.ru/">© TM</a> <br /><br /> <a href="https://habrahabr.ru/feedback/">Служба поддержки</a><br /><br /> <a href="https://m.habrahabr.ru/post/275039/?mobile=yes">Мобильная версия</a><br /><br /> <div class="social_accounts"> <a href="https://twitter.com/habrahabr" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'twitter'); }"> <svg class="icon-svg icon-svg_twitter" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M12 24c-6.616 0-12-5.384-12-12s5.384-12 12-12 12 5.384 12 12-5.384 12-12 12zm0-22.909c-6.015 0-10.909 4.894-10.909 10.909s4.894 10.909 10.909 10.909 10.909-4.894 10.909-10.909-4.894-10.909-10.909-10.909zM18.04 8.253c-.445.197-.922.331-1.424.391.512-.307.904-.792 1.09-1.371-.479.284-1.009.49-1.574.601-.452-.481-1.096-.782-1.809-.782-1.369 0-2.479 1.109-2.479 2.479 0 .194.022.383.064.565-2.06-.104-3.887-1.091-5.109-2.59-.214.365-.336.792-.336 1.246 0 .86.437 1.619 1.103 2.063-.406-.013-.789-.124-1.123-.31v.031c0 1.201.854 2.203 1.989 2.431-.207.057-.427.087-.653.087-.159 0-.314-.015-.466-.045.315.985 1.231 1.702 2.316 1.721-.849.664-1.917 1.061-3.079 1.061-.2 0-.397-.012-.591-.035 1.095.704 2.398 1.114 3.799 1.114 4.559 0 7.052-3.777 7.052-7.053l-.008-.321c.484-.349.904-.785 1.237-1.283z" /></svg> </a> <a href="https://www.facebook.com/habrahabr.ru" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'facebook'); }"> <svg class="icon-svg icon-svg_fb" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M12 24c-6.616 0-12-5.384-12-12s5.384-12 12-12 12 5.384 12 12-5.384 12-12 12zm0-22.909c-6.015 0-10.909 4.894-10.909 10.909s4.894 10.909 10.909 10.909 10.909-4.894 10.909-10.909-4.894-10.909-10.909-10.909zM14.727 8.798h-1.558c-.184 0-.389.242-.389.566v1.125h1.947v1.604h-1.948v4.816h-1.839v-4.816h-1.667v-1.604h1.668v-.944c0-1.354.939-2.455 2.229-2.455h1.558v1.707z" /></svg> </a> <a href="https://vk.com/habr" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'vkontakte'); }"> <svg class="icon-svg icon-svg_vk" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M12 24c-6.616 0-12-5.384-12-12s5.384-12 12-12 12 5.384 12 12-5.384 12-12 12zm0-22.909c-6.015 0-10.909 4.894-10.909 10.909s4.894 10.909 10.909 10.909 10.909-4.894 10.909-10.909-4.894-10.909-10.909-10.909zM16.33 11.926s1.725-2.433 1.896-3.232c.057-.286-.069-.445-.365-.445h-1.497c-.343 0-.468.148-.572.365 0 0-.809 1.724-1.793 2.81-.316.351-.477.457-.651.457-.141 0-.205-.118-.205-.434v-2.776c0-.388-.046-.503-.365-.503h-2.399c-.183 0-.297.106-.297.251 0 .365.56.448.56 1.439v2.044c0 .411-.023.572-.217.572-.514 0-1.737-1.771-2.422-3.781-.137-.41-.286-.525-.674-.525h-1.496c-.217 0-.377.148-.377.365 0 .399.468 2.251 2.307 4.729 1.234 1.668 2.856 2.57 4.318 2.57.891 0 1.108-.148 1.108-.526v-1.28c0-.32.125-.457.309-.457.205 0 .568.067 1.416.902 1.005.96 1.073 1.359 1.622 1.359h1.679c.171 0 .332-.08.332-.365 0-.377-.491-1.051-1.245-1.85-.309-.411-.811-.856-.971-1.063-.229-.239-.16-.376 0-.627z" /></svg> </a> <a href="https://telegram.me/habr_ru" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'telegram'); }"> <svg class="icon-svg icon-svg_telegram" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M12.048.002c-6.616 0-12 5.384-12 12s5.384 12 12 12 12-5.384 12-12-5.384-12-12-12zm0 22.909c-6.015 0-10.909-4.894-10.909-10.909s4.894-10.909 10.909-10.909 10.909 4.894 10.909 10.909c0 6.015-4.894 10.909-10.909 10.909zM10.093 16.753c0 .164.092.209.219.094l1.891-1.697-2.11-1.092v2.696zM17.816 7.116c-.228.081-11.491 4.049-11.712 4.127-.189.067-.23.229-.007.319l2.518 1.009 1.493.598s7.189-5.28 7.287-5.351c.098-.072.211.063.14.14l-5.222 5.648-.3.334.397.214 3.304 1.779c.192.104.443.017.499-.223.065-.283 1.887-8.134 1.928-8.308.052-.226-.097-.364-.325-.285z" /></svg> </a> </div> </div> </div> </div> </div> </div> <a href="#" class="layout__elevator hidden" id="scroll_to_top" title="Наверх" onclick="if (typeof ga === 'function') { ga('send', 'event', 'navigation_button', 'down', 'https://habrahabr.ru/post/275039/'); }"> <svg class="icon-svg icon-svg_scroll-up" width="100%" height="100%" viewBox="0 0 32 32" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><title>arrow up</title><path d="M16 0C7.164 0 0 7.164 0 16s7.164 16 16 16 16-7.164 16-16S24.836 0 16 0zm8.412 19.523c-.517.512-1.355.512-1.872 0L16 13.516l-6.54 6.01c-.518.51-1.356.51-1.873 0-.516-.513-.517-1.343 0-1.855l7.476-7.326c.517-.512 1.356-.512 1.873 0l7.476 7.327c.516.513.516 1.342 0 1.854z" /></svg> </a> </div> <script type="text/javascript">
  // global vars
  var g_base_url = &apos;habrahabr.ru&apos;;
  var g_show_xpanel = false;
  var g_base_fullurl = &apos;https://habrahabr.ru/&apos;;
  var g_is_guest = false;

</script> <script type="text/javascript">
  var _paq = _paq || [];
  _paq.push([&apos;trackPageView&apos;]);
  _paq.push([&apos;enableLinkTracking&apos;]);
  (function() {
    var u=&quot;//stats.tmtm.ru/&quot;;
    _paq.push([&apos;setTrackerUrl&apos;, u+&apos;piwik.php&apos;]);
    _paq.push([&apos;setSiteId&apos;, &apos;5&apos;]);
    var d=document, g=d.createElement(&apos;script&apos;), s=d.getElementsByTagName(&apos;script&apos;)[0];
    g.type=&apos;text/javascript&apos;; g.async=true; g.defer=true; g.src=u+&apos;piwik.js&apos;; s.parentNode.insertBefore(g,s);
  })();
</script> <noscript><p><img src="//stats.tmtm.ru/piwik.php?idsite=5" style="border:0;" alt /></p></noscript> <script src="https://habracdn.net/habr/javascripts/1480084008/app.vendors.js" /> <script src="https://habracdn.net/habr/javascripts/1480084008/app.main.js" /> <script src="https://habracdn.net/habr/javascripts/1480084008/libs/flexibility.js" /> <script src="https://habracdn.net/habr/javascripts/1480084008/libs/piwikscrolldepth.min.js" /> <script type="text/javascript">
      gascrolldepth.init({
        percentage: true,
        PiwikGoal: true,
        PiwikGoal20: 3,
        PiwikGoal50: 15,
        PiwikGoal70: 17,
        PiwikGoal90: 19,
        PiwikGoal100: 20
      });
    </script> <script type="text/javascript">
        $(document).ready( function(){
          window.tmidLogin = function(){ return false; };
          if( $.cookie(&apos;tmid_no_check&apos;) == undefined ) {
            var expire = new Date();
            expire.setMinutes(expire.getMinutes() + 10 );
            $.cookie(&apos;tmid_no_check&apos;, 1, { expires: expire } );
            $.getScript(&quot;https://id.tmtm.ru/checklogin/&quot;, function(){
              if( window.tmidLogin() ) {
                var href = $(&apos;#login&apos;).attr(&apos;href&apos;)+&apos;?checklogin=true&apos;;
                if( href !== undefined ) { window.location.href = href; }
              }
            });
          }
        });
      </script> <script type="text/javascript" src="https://habrahabr.ru/viewcount/post/275039/" />  <script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            if (typeof (_yaparams) != &apos;undefined&apos;) {
                w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    params:_yaparams});
            } else {
                w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
            }

        } catch(e) { }
    });

    var n = d.getElementsByTagName(&quot;script&quot;)[0],
        s = d.createElement(&quot;script&quot;),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = &quot;text/javascript&quot;;
    s.async = true;
    s.src = (d.location.protocol == &quot;https:&quot; ? &quot;https:&quot; : &quot;http:&quot;) + &quot;//mc.yandex.ru/metrika/watch.js&quot;;

    if (w.opera == &quot;[object Opera]&quot;) {
        d.addEventListener(&quot;DOMContentLoaded&quot;, f, false);
    } else { f(); }
})(document, window, &quot;yandex_metrika_callbacks&quot;);
</script> <noscript><div><img src="//mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt /></div></noscript>  </body> </html> 